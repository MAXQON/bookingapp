(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function a0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var _d={exports:{}},vl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function ab(){if(m_)return vl;m_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,l,c){var f=null;if(c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),"key"in l){c={};for(var g in l)g!=="key"&&(c[g]=l[g])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:f,ref:l!==void 0?l:null,props:c}}return vl.Fragment=t,vl.jsx=n,vl.jsxs=n,vl}var g_;function ob(){return g_||(g_=1,_d.exports=ab()),_d.exports}var x=ob(),vd={exports:{}},Ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function lb(){if(p_)return Ct;p_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),w=Symbol.iterator;function C(N){return N===null||typeof N!="object"?null:(N=w&&N[w]||N["@@iterator"],typeof N=="function"?N:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J=Object.assign,it={};function tt(N,Y,nt){this.props=N,this.context=Y,this.refs=it,this.updater=nt||F}tt.prototype.isReactComponent={},tt.prototype.setState=function(N,Y){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,Y,"setState")},tt.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function At(){}At.prototype=tt.prototype;function ht(N,Y,nt){this.props=N,this.context=Y,this.refs=it,this.updater=nt||F}var ct=ht.prototype=new At;ct.constructor=ht,J(ct,tt.prototype),ct.isPureReactComponent=!0;var Ot=Array.isArray,_t={H:null,A:null,T:null,S:null,V:null},Rt=Object.prototype.hasOwnProperty;function M(N,Y,nt,W,at,mt){return nt=mt.ref,{$$typeof:r,type:N,key:Y,ref:nt!==void 0?nt:null,props:mt}}function b(N,Y){return M(N.type,Y,void 0,void 0,void 0,N.props)}function R(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function O(N){var Y={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(nt){return Y[nt]})}var V=/\/+/g;function k(N,Y){return typeof N=="object"&&N!==null&&N.key!=null?O(""+N.key):Y.toString(36)}function I(){}function Zt(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(I,I):(N.status="pending",N.then(function(Y){N.status==="pending"&&(N.status="fulfilled",N.value=Y)},function(Y){N.status==="pending"&&(N.status="rejected",N.reason=Y)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function se(N,Y,nt,W,at){var mt=typeof N;(mt==="undefined"||mt==="boolean")&&(N=null);var bt=!1;if(N===null)bt=!0;else switch(mt){case"bigint":case"string":case"number":bt=!0;break;case"object":switch(N.$$typeof){case r:case t:bt=!0;break;case T:return bt=N._init,se(bt(N._payload),Y,nt,W,at)}}if(bt)return at=at(N),bt=W===""?"."+k(N,0):W,Ot(at)?(nt="",bt!=null&&(nt=bt.replace(V,"$&/")+"/"),se(at,Y,nt,"",function(vn){return vn})):at!=null&&(R(at)&&(at=b(at,nt+(at.key==null||N&&N.key===at.key?"":(""+at.key).replace(V,"$&/")+"/")+bt)),Y.push(at)),1;bt=0;var he=W===""?".":W+":";if(Ot(N))for(var qt=0;qt<N.length;qt++)W=N[qt],mt=he+k(W,qt),bt+=se(W,Y,nt,mt,at);else if(qt=C(N),typeof qt=="function")for(N=qt.call(N),qt=0;!(W=N.next()).done;)W=W.value,mt=he+k(W,qt++),bt+=se(W,Y,nt,mt,at);else if(mt==="object"){if(typeof N.then=="function")return se(Zt(N),Y,nt,W,at);throw Y=String(N),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return bt}function q(N,Y,nt){if(N==null)return N;var W=[],at=0;return se(N,W,"","",function(mt){return Y.call(nt,mt,at++)}),W}function rt(N){if(N._status===-1){var Y=N._result;Y=Y(),Y.then(function(nt){(N._status===0||N._status===-1)&&(N._status=1,N._result=nt)},function(nt){(N._status===0||N._status===-1)&&(N._status=2,N._result=nt)}),N._status===-1&&(N._status=0,N._result=Y)}if(N._status===1)return N._result.default;throw N._result}var ut=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function Ut(){}return Ct.Children={map:q,forEach:function(N,Y,nt){q(N,function(){Y.apply(this,arguments)},nt)},count:function(N){var Y=0;return q(N,function(){Y++}),Y},toArray:function(N){return q(N,function(Y){return Y})||[]},only:function(N){if(!R(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ct.Component=tt,Ct.Fragment=n,Ct.Profiler=l,Ct.PureComponent=ht,Ct.StrictMode=s,Ct.Suspense=p,Ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_t,Ct.__COMPILER_RUNTIME={__proto__:null,c:function(N){return _t.H.useMemoCache(N)}},Ct.cache=function(N){return function(){return N.apply(null,arguments)}},Ct.cloneElement=function(N,Y,nt){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var W=J({},N.props),at=N.key,mt=void 0;if(Y!=null)for(bt in Y.ref!==void 0&&(mt=void 0),Y.key!==void 0&&(at=""+Y.key),Y)!Rt.call(Y,bt)||bt==="key"||bt==="__self"||bt==="__source"||bt==="ref"&&Y.ref===void 0||(W[bt]=Y[bt]);var bt=arguments.length-2;if(bt===1)W.children=nt;else if(1<bt){for(var he=Array(bt),qt=0;qt<bt;qt++)he[qt]=arguments[qt+2];W.children=he}return M(N.type,at,void 0,void 0,mt,W)},Ct.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:c,_context:N},N},Ct.createElement=function(N,Y,nt){var W,at={},mt=null;if(Y!=null)for(W in Y.key!==void 0&&(mt=""+Y.key),Y)Rt.call(Y,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(at[W]=Y[W]);var bt=arguments.length-2;if(bt===1)at.children=nt;else if(1<bt){for(var he=Array(bt),qt=0;qt<bt;qt++)he[qt]=arguments[qt+2];at.children=he}if(N&&N.defaultProps)for(W in bt=N.defaultProps,bt)at[W]===void 0&&(at[W]=bt[W]);return M(N,mt,void 0,void 0,null,at)},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(N){return{$$typeof:g,render:N}},Ct.isValidElement=R,Ct.lazy=function(N){return{$$typeof:T,_payload:{_status:-1,_result:N},_init:rt}},Ct.memo=function(N,Y){return{$$typeof:_,type:N,compare:Y===void 0?null:Y}},Ct.startTransition=function(N){var Y=_t.T,nt={};_t.T=nt;try{var W=N(),at=_t.S;at!==null&&at(nt,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(Ut,ut)}catch(mt){ut(mt)}finally{_t.T=Y}},Ct.unstable_useCacheRefresh=function(){return _t.H.useCacheRefresh()},Ct.use=function(N){return _t.H.use(N)},Ct.useActionState=function(N,Y,nt){return _t.H.useActionState(N,Y,nt)},Ct.useCallback=function(N,Y){return _t.H.useCallback(N,Y)},Ct.useContext=function(N){return _t.H.useContext(N)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(N,Y){return _t.H.useDeferredValue(N,Y)},Ct.useEffect=function(N,Y,nt){var W=_t.H;if(typeof nt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(N,Y)},Ct.useId=function(){return _t.H.useId()},Ct.useImperativeHandle=function(N,Y,nt){return _t.H.useImperativeHandle(N,Y,nt)},Ct.useInsertionEffect=function(N,Y){return _t.H.useInsertionEffect(N,Y)},Ct.useLayoutEffect=function(N,Y){return _t.H.useLayoutEffect(N,Y)},Ct.useMemo=function(N,Y){return _t.H.useMemo(N,Y)},Ct.useOptimistic=function(N,Y){return _t.H.useOptimistic(N,Y)},Ct.useReducer=function(N,Y,nt){return _t.H.useReducer(N,Y,nt)},Ct.useRef=function(N){return _t.H.useRef(N)},Ct.useState=function(N){return _t.H.useState(N)},Ct.useSyncExternalStore=function(N,Y,nt){return _t.H.useSyncExternalStore(N,Y,nt)},Ct.useTransition=function(){return _t.H.useTransition()},Ct.version="19.1.0",Ct}var y_;function lm(){return y_||(y_=1,vd.exports=lb()),vd.exports}var yt=lm();const ub=a0(yt);var Ed={exports:{}},El={},Td={exports:{}},Ad={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function cb(){return __||(__=1,function(r){function t(q,rt){var ut=q.length;q.push(rt);t:for(;0<ut;){var Ut=ut-1>>>1,N=q[Ut];if(0<l(N,rt))q[Ut]=rt,q[ut]=N,ut=Ut;else break t}}function n(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var rt=q[0],ut=q.pop();if(ut!==rt){q[0]=ut;t:for(var Ut=0,N=q.length,Y=N>>>1;Ut<Y;){var nt=2*(Ut+1)-1,W=q[nt],at=nt+1,mt=q[at];if(0>l(W,ut))at<N&&0>l(mt,W)?(q[Ut]=mt,q[at]=ut,Ut=at):(q[Ut]=W,q[nt]=ut,Ut=nt);else if(at<N&&0>l(mt,ut))q[Ut]=mt,q[at]=ut,Ut=at;else break t}}return rt}function l(q,rt){var ut=q.sortIndex-rt.sortIndex;return ut!==0?ut:q.id-rt.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var f=Date,g=f.now();r.unstable_now=function(){return f.now()-g}}var p=[],_=[],T=1,w=null,C=3,F=!1,J=!1,it=!1,tt=!1,At=typeof setTimeout=="function"?setTimeout:null,ht=typeof clearTimeout=="function"?clearTimeout:null,ct=typeof setImmediate<"u"?setImmediate:null;function Ot(q){for(var rt=n(_);rt!==null;){if(rt.callback===null)s(_);else if(rt.startTime<=q)s(_),rt.sortIndex=rt.expirationTime,t(p,rt);else break;rt=n(_)}}function _t(q){if(it=!1,Ot(q),!J)if(n(p)!==null)J=!0,Rt||(Rt=!0,k());else{var rt=n(_);rt!==null&&se(_t,rt.startTime-q)}}var Rt=!1,M=-1,b=5,R=-1;function O(){return tt?!0:!(r.unstable_now()-R<b)}function V(){if(tt=!1,Rt){var q=r.unstable_now();R=q;var rt=!0;try{t:{J=!1,it&&(it=!1,ht(M),M=-1),F=!0;var ut=C;try{e:{for(Ot(q),w=n(p);w!==null&&!(w.expirationTime>q&&O());){var Ut=w.callback;if(typeof Ut=="function"){w.callback=null,C=w.priorityLevel;var N=Ut(w.expirationTime<=q);if(q=r.unstable_now(),typeof N=="function"){w.callback=N,Ot(q),rt=!0;break e}w===n(p)&&s(p),Ot(q)}else s(p);w=n(p)}if(w!==null)rt=!0;else{var Y=n(_);Y!==null&&se(_t,Y.startTime-q),rt=!1}}break t}finally{w=null,C=ut,F=!1}rt=void 0}}finally{rt?k():Rt=!1}}}var k;if(typeof ct=="function")k=function(){ct(V)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Zt=I.port2;I.port1.onmessage=V,k=function(){Zt.postMessage(null)}}else k=function(){At(V,0)};function se(q,rt){M=At(function(){q(r.unstable_now())},rt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(q){q.callback=null},r.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<q?Math.floor(1e3/q):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_next=function(q){switch(C){case 1:case 2:case 3:var rt=3;break;default:rt=C}var ut=C;C=rt;try{return q()}finally{C=ut}},r.unstable_requestPaint=function(){tt=!0},r.unstable_runWithPriority=function(q,rt){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ut=C;C=q;try{return rt()}finally{C=ut}},r.unstable_scheduleCallback=function(q,rt,ut){var Ut=r.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?Ut+ut:Ut):ut=Ut,q){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=ut+N,q={id:T++,callback:rt,priorityLevel:q,startTime:ut,expirationTime:N,sortIndex:-1},ut>Ut?(q.sortIndex=ut,t(_,q),n(p)===null&&q===n(_)&&(it?(ht(M),M=-1):it=!0,se(_t,ut-Ut))):(q.sortIndex=N,t(p,q),J||F||(J=!0,Rt||(Rt=!0,k()))),q},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(q){var rt=C;return function(){var ut=C;C=rt;try{return q.apply(this,arguments)}finally{C=ut}}}}(Ad)),Ad}var v_;function hb(){return v_||(v_=1,Td.exports=cb()),Td.exports}var bd={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_;function fb(){if(E_)return tn;E_=1;var r=lm();function t(p){var _="https://react.dev/errors/"+p;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)_+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(p,_,T){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:p,containerInfo:_,implementation:T}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,_){if(p==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,tn.createPortal=function(p,_){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return c(p,_,null,T)},tn.flushSync=function(p){var _=f.T,T=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=_,s.p=T,s.d.f()}},tn.preconnect=function(p,_){typeof p=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,s.d.C(p,_))},tn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},tn.preinit=function(p,_){if(typeof p=="string"&&_&&typeof _.as=="string"){var T=_.as,w=g(T,_.crossOrigin),C=typeof _.integrity=="string"?_.integrity:void 0,F=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;T==="style"?s.d.S(p,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:w,integrity:C,fetchPriority:F}):T==="script"&&s.d.X(p,{crossOrigin:w,integrity:C,fetchPriority:F,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},tn.preinitModule=function(p,_){if(typeof p=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var T=g(_.as,_.crossOrigin);s.d.M(p,{crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&s.d.M(p)},tn.preload=function(p,_){if(typeof p=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var T=_.as,w=g(T,_.crossOrigin);s.d.L(p,T,{crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},tn.preloadModule=function(p,_){if(typeof p=="string")if(_){var T=g(_.as,_.crossOrigin);s.d.m(p,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else s.d.m(p)},tn.requestFormReset=function(p){s.d.r(p)},tn.unstable_batchedUpdates=function(p,_){return p(_)},tn.useFormState=function(p,_,T){return f.H.useFormState(p,_,T)},tn.useFormStatus=function(){return f.H.useHostTransitionStatus()},tn.version="19.1.0",tn}var T_;function db(){if(T_)return bd.exports;T_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),bd.exports=fb(),bd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A_;function mb(){if(A_)return El;A_=1;var r=hb(),t=lm(),n=db();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function f(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function g(e){if(c(e)!==e)throw Error(s(188))}function p(e){var i=e.alternate;if(!i){if(i=c(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,o=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return g(h),e;if(d===o)return g(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=d;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,o=d;break}if(E===o){v=!0,o=h,a=d;break}E=E.sibling}if(!v){for(E=d.child;E;){if(E===a){v=!0,a=d,o=h;break}if(E===o){v=!0,o=d,a=h;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function _(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=_(e),i!==null)return i;e=e.sibling}return null}var T=Object.assign,w=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),it=Symbol.for("react.strict_mode"),tt=Symbol.for("react.profiler"),At=Symbol.for("react.provider"),ht=Symbol.for("react.consumer"),ct=Symbol.for("react.context"),Ot=Symbol.for("react.forward_ref"),_t=Symbol.for("react.suspense"),Rt=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function k(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var I=Symbol.for("react.client.reference");function Zt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===I?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case J:return"Fragment";case tt:return"Profiler";case it:return"StrictMode";case _t:return"Suspense";case Rt:return"SuspenseList";case R:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case F:return"Portal";case ct:return(e.displayName||"Context")+".Provider";case ht:return(e._context.displayName||"Context")+".Consumer";case Ot:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return i=e.displayName||null,i!==null?i:Zt(e.type)||"Memo";case b:i=e._payload,e=e._init;try{return Zt(e(i))}catch{}}return null}var se=Array.isArray,q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut={pending:!1,data:null,method:null,action:null},Ut=[],N=-1;function Y(e){return{current:e}}function nt(e){0>N||(e.current=Ut[N],Ut[N]=null,N--)}function W(e,i){N++,Ut[N]=e.current,e.current=i}var at=Y(null),mt=Y(null),bt=Y(null),he=Y(null);function qt(e,i){switch(W(bt,i),W(mt,e),W(at,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?qy(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=qy(i),e=Hy(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}nt(at),W(at,e)}function vn(){nt(at),nt(mt),nt(bt)}function fn(e){e.memoizedState!==null&&W(he,e);var i=at.current,a=Hy(i,e.type);i!==a&&(W(mt,e),W(at,a))}function Nn(e){mt.current===e&&(nt(at),nt(mt)),he.current===e&&(nt(he),ml._currentValue=ut)}var xn=Object.prototype.hasOwnProperty,Ii=r.unstable_scheduleCallback,Ci=r.unstable_cancelCallback,Ni=r.unstable_shouldYield,ii=r.unstable_requestPaint,Re=r.unstable_now,Qn=r.unstable_getCurrentPriorityLevel,ri=r.unstable_ImmediatePriority,Ze=r.unstable_UserBlockingPriority,an=r.unstable_NormalPriority,ls=r.unstable_LowPriority,gr=r.unstable_IdlePriority,us=r.log,Dn=r.unstable_setDisableYieldValue,ae=null,Ft=null;function Je(e){if(typeof us=="function"&&Dn(e),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(ae,e)}catch{}}var Pe=Math.clz32?Math.clz32:xi,ta=Math.log,_o=Math.LN2;function xi(e){return e>>>=0,e===0?32:31-(ta(e)/_o|0)|0}var Di=256,Oi=4194304;function dn(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function pr(e,i,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,d=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~d,o!==0?h=dn(o):(v&=E,v!==0?h=dn(v):a||(a=E&~e,a!==0&&(h=dn(a))))):(E=o&~d,E!==0?h=dn(E):v!==0?h=dn(v):a||(a=o&~e,a!==0&&(h=dn(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Mi(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function cs(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Q(){var e=Di;return Di<<=1,(Di&4194048)===0&&(Di=256),e}function vt(){var e=Oi;return Oi<<=1,(Oi&62914560)===0&&(Oi=4194304),e}function Gt(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function fe(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function de(e,i,a,o,h,d){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,S=e.expirationTimes,j=e.hiddenUpdates;for(a=v&~a;0<a;){var G=31-Pe(a),X=1<<G;E[G]=0,S[G]=-1;var z=j[G];if(z!==null)for(j[G]=null,G=0;G<z.length;G++){var B=z[G];B!==null&&(B.lane&=-536870913)}a&=~X}o!==0&&Ie(e,o,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(v&~i))}function Ie(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var o=31-Pe(i);e.entangledLanes|=i,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function mn(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var o=31-Pe(a),h=1<<o;h&i|e[o]&i&&(e[o]|=i),a&=~h}}function si(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Vi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Kn(){var e=rt.p;return e!==0?e:(e=window.event,e===void 0?32:l_(e.type))}function tu(e,i){var a=rt.p;try{return rt.p=e,i()}finally{rt.p=a}}var oe=Math.random().toString(36).slice(2),Ce="__reactFiber$"+oe,Ee="__reactProps$"+oe,On="__reactContainer$"+oe,vo="__reactEvents$"+oe,Eh="__reactListeners$"+oe,yr="__reactHandles$"+oe,eu="__reactResources$"+oe,hs="__reactMarker$"+oe;function _r(e){delete e[Ce],delete e[Ee],delete e[vo],delete e[Eh],delete e[yr]}function Pi(e){var i=e[Ce];if(i)return i;for(var a=e.parentNode;a;){if(i=a[On]||a[Ce]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=Ky(e);e!==null;){if(a=e[Ce])return a;e=Ky(e)}return i}e=a,a=e.parentNode}return null}function ai(e){if(e=e[Ce]||e[On]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function oi(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function on(e){var i=e[eu];return i||(i=e[eu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function pe(e){e[hs]=!0}var Eo=new Set,ea={};function Yn(e,i){ki(e,i),ki(e+"Capture",i)}function ki(e,i){for(ea[e]=i,e=0;e<i.length;e++)Eo.add(i[e])}var nu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),iu={},fs={};function ru(e){return xn.call(fs,e)?!0:xn.call(iu,e)?!1:nu.test(e)?fs[e]=!0:(iu[e]=!0,!1)}function vr(e,i,a){if(ru(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function li(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function qe(e,i,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+o)}}var ds,su;function Ui(e){if(ds===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ds=i&&i[1]||"",su=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ds+e+su}var na=!1;function ia(e,i){if(!e||na)return"";na=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(B){var z=B}Reflect.construct(e,[],X)}else{try{X.call()}catch(B){z=B}e.call(X.prototype)}}else{try{throw Error()}catch(B){z=B}(X=e())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(B){if(B&&z&&typeof B.stack=="string")return[B.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),v=d[0],E=d[1];if(v&&E){var S=v.split(`
`),j=E.split(`
`);for(h=o=0;o<S.length&&!S[o].includes("DetermineComponentFrameRoot");)o++;for(;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;if(o===S.length||h===j.length)for(o=S.length-1,h=j.length-1;1<=o&&0<=h&&S[o]!==j[h];)h--;for(;1<=o&&0<=h;o--,h--)if(S[o]!==j[h]){if(o!==1||h!==1)do if(o--,h--,0>h||S[o]!==j[h]){var G=`
`+S[o].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=o&&0<=h);break}}}finally{na=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ui(a):""}function To(e){switch(e.tag){case 26:case 27:case 5:return Ui(e.type);case 16:return Ui("Lazy");case 13:return Ui("Suspense");case 19:return Ui("SuspenseList");case 0:case 15:return ia(e.type,!1);case 11:return ia(e.type.render,!1);case 1:return ia(e.type,!0);case 31:return Ui("Activity");default:return""}}function ra(e){try{var i="";do i+=To(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function ln(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ao(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Th(e){var i=Ao(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),o=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,d.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function sa(e){e._valueTracker||(e._valueTracker=Th(e))}function bo(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return e&&(o=Ao(e)?e.checked?"true":"false":e.value),e=o,e!==a?(i.setValue(e),!0):!1}function ms(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ah=/[\n"\\]/g;function Te(e){return e.replace(Ah,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function En(e,i,a,o,h,d,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+ln(i)):e.value!==""+ln(i)&&(e.value=""+ln(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?Er(e,v,ln(i)):a!=null?Er(e,v,ln(a)):o!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+ln(E):e.removeAttribute("name")}function gs(e,i,a,o,h,d,v,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+ln(a):"",i=i!=null?""+ln(i):a,E||i===e.value||(e.value=i),e.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function Er(e,i,a){i==="number"&&ms(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Li(e,i,a,o){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+ln(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function Jt(e,i,a){if(i!=null&&(i=""+ln(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+ln(a):""}function ps(e,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(se(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=ln(i),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function Mn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var ys=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function au(e,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":o?e.setProperty(i,a):typeof a!="number"||a===0||ys.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function So(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&au(e,h,o)}else for(var d in i)i.hasOwnProperty(d)&&au(e,d,i[d])}function wo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function aa(e){return Sh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var ji=null;function Vn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zi=null,Bi=null;function Ro(e){var i=ai(e);if(i&&(e=i.stateNode)){var a=e[Ee]||null;t:switch(e=i.stateNode,i.type){case"input":if(En(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Te(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==e&&o.form===e.form){var h=o[Ee]||null;if(!h)throw Error(s(90));En(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===e.form&&bo(o)}break t;case"textarea":Jt(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Li(e,!!a.multiple,i,!1)}}}var ui=!1;function ou(e,i,a){if(ui)return e(i,a);ui=!0;try{var o=e(i);return o}finally{if(ui=!1,(zi!==null||Bi!==null)&&(tc(),zi&&(i=zi,e=Bi,Bi=zi=null,Ro(i),e)))for(i=0;i<e.length;i++)Ro(e[i])}}function _s(e,i){var a=e.stateNode;if(a===null)return null;var o=a[Ee]||null;if(o===null)return null;a=o[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pn=!1;if(Xn)try{var vs={};Object.defineProperty(vs,"passive",{get:function(){Pn=!0}}),window.addEventListener("test",vs,vs),window.removeEventListener("test",vs,vs)}catch{Pn=!1}var ci=null,Tr=null,qi=null;function Io(){if(qi)return qi;var e,i=Tr,a=i.length,o,h="value"in ci?ci.value:ci.textContent,d=h.length;for(e=0;e<a&&i[e]===h[e];e++);var v=a-e;for(o=1;o<=v&&i[a-o]===h[d-o];o++);return qi=h.slice(e,1<o?1-o:void 0)}function hi(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function fi(){return!0}function Co(){return!1}function ke(e){function i(a,o,h,d,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?fi:Co,this.isPropagationStopped=Co,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=fi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=fi)},persist:function(){},isPersistent:fi}),i}var Kt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oa=ke(Kt),Es=T({},Kt,{view:0,detail:0}),lu=ke(Es),la,ua,di,Ts=T({},Es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ss,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==di&&(di&&e.type==="mousemove"?(la=e.screenX-di.screenX,ua=e.screenY-di.screenY):ua=la=0,di=e),la)},movementY:function(e){return"movementY"in e?e.movementY:ua}}),kn=ke(Ts),uu=T({},Ts,{dataTransfer:0}),wh=ke(uu),As=T({},Es,{relatedTarget:0}),ca=ke(As),No=T({},Kt,{animationName:0,elapsedTime:0,pseudoElement:0}),ha=ke(No),cu=T({},Kt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fa=ke(cu),Rh=T({},Kt,{data:0}),xo=ke(Rh),bs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Do(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=fu[e])?!!i[e]:!1}function Ss(){return Do}var du=T({},Es,{key:function(e){if(e.key){var i=bs[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=hi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ss,charCode:function(e){return e.type==="keypress"?hi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?hi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),da=ke(du),mu=T({},Ts,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oo=ke(mu),Hi=T({},Es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ss}),gu=ke(Hi),pu=T({},Kt,{propertyName:0,elapsedTime:0,pseudoElement:0}),yu=ke(pu),_u=T({},Ts,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ma=ke(_u),un=T({},Kt,{newState:0,oldState:0}),vu=ke(un),Eu=[9,13,27,32],mi=Xn&&"CompositionEvent"in window,u=null;Xn&&"documentMode"in document&&(u=document.documentMode);var m=Xn&&"TextEvent"in window&&!u,y=Xn&&(!mi||u&&8<u&&11>=u),A=" ",U=!1;function H(e,i){switch(e){case"keyup":return Eu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function et(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Lt=!1;function Ne(e,i){switch(e){case"compositionend":return et(i);case"keypress":return i.which!==32?null:(U=!0,A);case"textInput":return e=i.data,e===A&&U?null:e;default:return null}}function jt(e,i){if(Lt)return e==="compositionend"||!mi&&H(e,i)?(e=Io(),qi=Tr=ci=null,Lt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return y&&i.locale!=="ko"?null:i.data;default:return null}}var Ue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xe(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Ue[e.type]:i==="textarea"}function Fi(e,i,a,o){zi?Bi?Bi.push(o):Bi=[o]:zi=o,i=ac(i,"onChange"),0<i.length&&(a=new oa("onChange","change",null,a,o),e.push({event:a,listeners:i}))}var He=null,gi=null;function Mo(e){Uy(e,0)}function Tu(e){var i=oi(e);if(bo(i))return e}function rg(e,i){if(e==="change")return i}var sg=!1;if(Xn){var Ih;if(Xn){var Ch="oninput"in document;if(!Ch){var ag=document.createElement("div");ag.setAttribute("oninput","return;"),Ch=typeof ag.oninput=="function"}Ih=Ch}else Ih=!1;sg=Ih&&(!document.documentMode||9<document.documentMode)}function og(){He&&(He.detachEvent("onpropertychange",lg),gi=He=null)}function lg(e){if(e.propertyName==="value"&&Tu(gi)){var i=[];Fi(i,gi,e,Vn(e)),ou(Mo,i)}}function kT(e,i,a){e==="focusin"?(og(),He=i,gi=a,He.attachEvent("onpropertychange",lg)):e==="focusout"&&og()}function UT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Tu(gi)}function LT(e,i){if(e==="click")return Tu(i)}function jT(e,i){if(e==="input"||e==="change")return Tu(i)}function zT(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Tn=typeof Object.is=="function"?Object.is:zT;function Vo(e,i){if(Tn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!xn.call(i,h)||!Tn(e[h],i[h]))return!1}return!0}function ug(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cg(e,i){var a=ug(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=i&&o>=i)return{node:a,offset:i-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=ug(a)}}function hg(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?hg(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function fg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=ms(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=ms(e.document)}return i}function Nh(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var BT=Xn&&"documentMode"in document&&11>=document.documentMode,ga=null,xh=null,Po=null,Dh=!1;function dg(e,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Dh||ga==null||ga!==ms(o)||(o=ga,"selectionStart"in o&&Nh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Po&&Vo(Po,o)||(Po=o,o=ac(xh,"onSelect"),0<o.length&&(i=new oa("onSelect","select",null,i,a),e.push({event:i,listeners:o}),i.target=ga)))}function ws(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var pa={animationend:ws("Animation","AnimationEnd"),animationiteration:ws("Animation","AnimationIteration"),animationstart:ws("Animation","AnimationStart"),transitionrun:ws("Transition","TransitionRun"),transitionstart:ws("Transition","TransitionStart"),transitioncancel:ws("Transition","TransitionCancel"),transitionend:ws("Transition","TransitionEnd")},Oh={},mg={};Xn&&(mg=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);function Rs(e){if(Oh[e])return Oh[e];if(!pa[e])return e;var i=pa[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in mg)return Oh[e]=i[a];return e}var gg=Rs("animationend"),pg=Rs("animationiteration"),yg=Rs("animationstart"),qT=Rs("transitionrun"),HT=Rs("transitionstart"),FT=Rs("transitioncancel"),_g=Rs("transitionend"),vg=new Map,Mh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mh.push("scrollEnd");function $n(e,i){vg.set(e,i),Yn(i,[e])}var Eg=new WeakMap;function Un(e,i){if(typeof e=="object"&&e!==null){var a=Eg.get(e);return a!==void 0?a:(i={value:e,source:i,stack:ra(i)},Eg.set(e,i),i)}return{value:e,source:i,stack:ra(i)}}var Ln=[],ya=0,Vh=0;function Au(){for(var e=ya,i=Vh=ya=0;i<e;){var a=Ln[i];Ln[i++]=null;var o=Ln[i];Ln[i++]=null;var h=Ln[i];Ln[i++]=null;var d=Ln[i];if(Ln[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}d!==0&&Tg(a,h,d)}}function bu(e,i,a,o){Ln[ya++]=e,Ln[ya++]=i,Ln[ya++]=a,Ln[ya++]=o,Vh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Ph(e,i,a,o){return bu(e,i,a,o),Su(e)}function _a(e,i){return bu(e,null,null,i),Su(e)}function Tg(e,i,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=e.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&i!==null&&(h=31-Pe(a),e=d.hiddenUpdates,o=e[h],o===null?e[h]=[i]:o.push(i),i.lane=a|536870912),d):null}function Su(e){if(50<al)throw al=0,qf=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var va={};function GT(e,i,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(e,i,a,o){return new GT(e,i,a,o)}function kh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Gi(e,i){var a=e.alternate;return a===null?(a=An(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Ag(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function wu(e,i,a,o,h,d){var v=0;if(o=e,typeof e=="function")kh(e)&&(v=1);else if(typeof e=="string")v=KA(e,a,at.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case R:return e=An(31,a,i,h),e.elementType=R,e.lanes=d,e;case J:return Is(a.children,h,d,i);case it:v=8,h|=24;break;case tt:return e=An(12,a,i,h|2),e.elementType=tt,e.lanes=d,e;case _t:return e=An(13,a,i,h),e.elementType=_t,e.lanes=d,e;case Rt:return e=An(19,a,i,h),e.elementType=Rt,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case At:case ct:v=10;break t;case ht:v=9;break t;case Ot:v=11;break t;case M:v=14;break t;case b:v=16,o=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return i=An(v,a,i,h),i.elementType=e,i.type=o,i.lanes=d,i}function Is(e,i,a,o){return e=An(7,e,o,i),e.lanes=a,e}function Uh(e,i,a){return e=An(6,e,null,i),e.lanes=a,e}function Lh(e,i,a){return i=An(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Ea=[],Ta=0,Ru=null,Iu=0,jn=[],zn=0,Cs=null,Qi=1,Ki="";function Ns(e,i){Ea[Ta++]=Iu,Ea[Ta++]=Ru,Ru=e,Iu=i}function bg(e,i,a){jn[zn++]=Qi,jn[zn++]=Ki,jn[zn++]=Cs,Cs=e;var o=Qi;e=Ki;var h=32-Pe(o)-1;o&=~(1<<h),a+=1;var d=32-Pe(i)+h;if(30<d){var v=h-h%5;d=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Qi=1<<32-Pe(i)+h|a<<h|o,Ki=d+e}else Qi=1<<d|a<<h|o,Ki=e}function jh(e){e.return!==null&&(Ns(e,1),bg(e,1,0))}function zh(e){for(;e===Ru;)Ru=Ea[--Ta],Ea[Ta]=null,Iu=Ea[--Ta],Ea[Ta]=null;for(;e===Cs;)Cs=jn[--zn],jn[zn]=null,Ki=jn[--zn],jn[zn]=null,Qi=jn[--zn],jn[zn]=null}var cn=null,me=null,Qt=!1,xs=null,pi=!1,Bh=Error(s(519));function Ds(e){var i=Error(s(418,""));throw Lo(Un(i,e)),Bh}function Sg(e){var i=e.stateNode,a=e.type,o=e.memoizedProps;switch(i[Ce]=e,i[Ee]=o,a){case"dialog":Vt("cancel",i),Vt("close",i);break;case"iframe":case"object":case"embed":Vt("load",i);break;case"video":case"audio":for(a=0;a<ll.length;a++)Vt(ll[a],i);break;case"source":Vt("error",i);break;case"img":case"image":case"link":Vt("error",i),Vt("load",i);break;case"details":Vt("toggle",i);break;case"input":Vt("invalid",i),gs(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),sa(i);break;case"select":Vt("invalid",i);break;case"textarea":Vt("invalid",i),ps(i,o.value,o.defaultValue,o.children),sa(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||By(i.textContent,a)?(o.popover!=null&&(Vt("beforetoggle",i),Vt("toggle",i)),o.onScroll!=null&&Vt("scroll",i),o.onScrollEnd!=null&&Vt("scrollend",i),o.onClick!=null&&(i.onclick=oc),i=!0):i=!1,i||Ds(e)}function wg(e){for(cn=e.return;cn;)switch(cn.tag){case 5:case 13:pi=!1;return;case 27:case 3:pi=!0;return;default:cn=cn.return}}function ko(e){if(e!==cn)return!1;if(!Qt)return wg(e),Qt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||rd(e.type,e.memoizedProps)),a=!a),a&&me&&Ds(e),wg(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){me=Jn(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}me=null}}else i===27?(i=me,Ur(e.type)?(e=ld,ld=null,me=e):me=i):me=cn?Jn(e.stateNode.nextSibling):null;return!0}function Uo(){me=cn=null,Qt=!1}function Rg(){var e=xs;return e!==null&&(yn===null?yn=e:yn.push.apply(yn,e),xs=null),e}function Lo(e){xs===null?xs=[e]:xs.push(e)}var qh=Y(null),Os=null,Yi=null;function Ar(e,i,a){W(qh,i._currentValue),i._currentValue=a}function Xi(e){e._currentValue=qh.current,nt(qh)}function Hh(e,i,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===a)break;e=e.return}}function Fh(e,i,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;t:for(;d!==null;){var E=d;d=h;for(var S=0;S<i.length;S++)if(E.context===i[S]){d.lanes|=a,E=d.alternate,E!==null&&(E.lanes|=a),Hh(d.return,a,e),o||(v=null);break t}d=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Hh(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function jo(e,i,a,o){e=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=h.type;Tn(h.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(h===he.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(ml):e=[ml])}h=h.return}e!==null&&Fh(i,e,a,o),i.flags|=262144}function Cu(e){for(e=e.firstContext;e!==null;){if(!Tn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ms(e){Os=e,Yi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function We(e){return Ig(Os,e)}function Nu(e,i){return Os===null&&Ms(e),Ig(e,i)}function Ig(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Yi===null){if(e===null)throw Error(s(308));Yi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Yi=Yi.next=i;return a}var QT=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},KT=r.unstable_scheduleCallback,YT=r.unstable_NormalPriority,De={$$typeof:ct,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gh(){return{controller:new QT,data:new Map,refCount:0}}function zo(e){e.refCount--,e.refCount===0&&KT(YT,function(){e.controller.abort()})}var Bo=null,Qh=0,Aa=0,ba=null;function XT(e,i){if(Bo===null){var a=Bo=[];Qh=0,Aa=Xf(),ba={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Qh++,i.then(Cg,Cg),i}function Cg(){if(--Qh===0&&Bo!==null){ba!==null&&(ba.status="fulfilled");var e=Bo;Bo=null,Aa=0,ba=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function $T(e,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Ng=q.S;q.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&XT(e,i),Ng!==null&&Ng(e,i)};var Vs=Y(null);function Kh(){var e=Vs.current;return e!==null?e:ie.pooledCache}function xu(e,i){i===null?W(Vs,Vs.current):W(Vs,i.pool)}function xg(){var e=Kh();return e===null?null:{parent:De._currentValue,pool:e}}var qo=Error(s(460)),Dg=Error(s(474)),Du=Error(s(542)),Yh={then:function(){}};function Og(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ou(){}function Mg(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(Ou,Ou),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Pg(e),e;default:if(typeof i.status=="string")i.then(Ou,Ou);else{if(e=ie,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Pg(e),e}throw Ho=i,qo}}var Ho=null;function Vg(){if(Ho===null)throw Error(s(459));var e=Ho;return Ho=null,e}function Pg(e){if(e===qo||e===Du)throw Error(s(483))}var br=!1;function Xh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $h(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Sr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function wr(e,i,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Xt&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Su(e),Tg(e,null,a),i}return bu(e,o,i,a),Su(e)}function Fo(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,mn(e,a)}}function Zh(e,i){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var Jh=!1;function Go(){if(Jh){var e=ba;if(e!==null)throw e}}function Qo(e,i,a,o){Jh=!1;var h=e.updateQueue;br=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var S=E,j=S.next;S.next=null,v===null?d=j:v.next=j,v=S;var G=e.alternate;G!==null&&(G=G.updateQueue,E=G.lastBaseUpdate,E!==v&&(E===null?G.firstBaseUpdate=j:E.next=j,G.lastBaseUpdate=S))}if(d!==null){var X=h.baseState;v=0,G=j=S=null,E=d;do{var z=E.lane&-536870913,B=z!==E.lane;if(B?(zt&z)===z:(o&z)===z){z!==0&&z===Aa&&(Jh=!0),G!==null&&(G=G.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var St=e,gt=E;z=i;var ee=a;switch(gt.tag){case 1:if(St=gt.payload,typeof St=="function"){X=St.call(ee,X,z);break t}X=St;break t;case 3:St.flags=St.flags&-65537|128;case 0:if(St=gt.payload,z=typeof St=="function"?St.call(ee,X,z):St,z==null)break t;X=T({},X,z);break t;case 2:br=!0}}z=E.callback,z!==null&&(e.flags|=64,B&&(e.flags|=8192),B=h.callbacks,B===null?h.callbacks=[z]:B.push(z))}else B={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},G===null?(j=G=B,S=X):G=G.next=B,v|=z;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;B=E,E=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);G===null&&(S=X),h.baseState=S,h.firstBaseUpdate=j,h.lastBaseUpdate=G,d===null&&(h.shared.lanes=0),Mr|=v,e.lanes=v,e.memoizedState=X}}function kg(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function Ug(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)kg(a[e],i)}var Sa=Y(null),Mu=Y(0);function Lg(e,i){e=nr,W(Mu,e),W(Sa,i),nr=e|i.baseLanes}function Wh(){W(Mu,nr),W(Sa,Sa.current)}function tf(){nr=Mu.current,nt(Sa),nt(Mu)}var Rr=0,Nt=null,Wt=null,Ae=null,Vu=!1,wa=!1,Ps=!1,Pu=0,Ko=0,Ra=null,ZT=0;function ye(){throw Error(s(321))}function ef(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!Tn(e[a],i[a]))return!1;return!0}function nf(e,i,a,o,h,d){return Rr=d,Nt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,q.H=e===null||e.memoizedState===null?Tp:Ap,Ps=!1,d=a(o,h),Ps=!1,wa&&(d=zg(i,a,o,h)),jg(e),d}function jg(e){q.H=Bu;var i=Wt!==null&&Wt.next!==null;if(Rr=0,Ae=Wt=Nt=null,Vu=!1,Ko=0,Ra=null,i)throw Error(s(300));e===null||Le||(e=e.dependencies,e!==null&&Cu(e)&&(Le=!0))}function zg(e,i,a,o){Nt=e;var h=0;do{if(wa&&(Ra=null),Ko=0,wa=!1,25<=h)throw Error(s(301));if(h+=1,Ae=Wt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}q.H=rA,d=i(a,o)}while(wa);return d}function JT(){var e=q.H,i=e.useState()[0];return i=typeof i.then=="function"?Yo(i):i,e=e.useState()[0],(Wt!==null?Wt.memoizedState:null)!==e&&(Nt.flags|=1024),i}function rf(){var e=Pu!==0;return Pu=0,e}function sf(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function af(e){if(Vu){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Vu=!1}Rr=0,Ae=Wt=Nt=null,wa=!1,Ko=Pu=0,Ra=null}function gn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ae===null?Nt.memoizedState=Ae=e:Ae=Ae.next=e,Ae}function be(){if(Wt===null){var e=Nt.alternate;e=e!==null?e.memoizedState:null}else e=Wt.next;var i=Ae===null?Nt.memoizedState:Ae.next;if(i!==null)Ae=i,Wt=e;else{if(e===null)throw Nt.alternate===null?Error(s(467)):Error(s(310));Wt=e,e={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Ae===null?Nt.memoizedState=Ae=e:Ae=Ae.next=e}return Ae}function of(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yo(e){var i=Ko;return Ko+=1,Ra===null&&(Ra=[]),e=Mg(Ra,e,i),i=Nt,(Ae===null?i.memoizedState:Ae.next)===null&&(i=i.alternate,q.H=i===null||i.memoizedState===null?Tp:Ap),e}function ku(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Yo(e);if(e.$$typeof===ct)return We(e)}throw Error(s(438,String(e)))}function lf(e){var i=null,a=Nt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=Nt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=of(),Nt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),o=0;o<e;o++)a[o]=O;return i.index++,a}function $i(e,i){return typeof i=="function"?i(e):i}function Uu(e){var i=be();return uf(i,Wt,e)}function uf(e,i,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=e.baseQueue,d=o.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,o.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{i=h.next;var E=v=null,S=null,j=i,G=!1;do{var X=j.lane&-536870913;if(X!==j.lane?(zt&X)===X:(Rr&X)===X){var z=j.revertLane;if(z===0)S!==null&&(S=S.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),X===Aa&&(G=!0);else if((Rr&z)===z){j=j.next,z===Aa&&(G=!0);continue}else X={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},S===null?(E=S=X,v=d):S=S.next=X,Nt.lanes|=z,Mr|=z;X=j.action,Ps&&a(d,X),d=j.hasEagerState?j.eagerState:a(d,X)}else z={lane:X,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},S===null?(E=S=z,v=d):S=S.next=z,Nt.lanes|=X,Mr|=X;j=j.next}while(j!==null&&j!==i);if(S===null?v=d:S.next=E,!Tn(d,e.memoizedState)&&(Le=!0,G&&(a=ba,a!==null)))throw a;e.memoizedState=d,e.baseState=v,e.baseQueue=S,o.lastRenderedState=d}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function cf(e){var i=be(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=e(d,v.action),v=v.next;while(v!==h);Tn(d,i.memoizedState)||(Le=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,o]}function Bg(e,i,a){var o=Nt,h=be(),d=Qt;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!Tn((Wt||h).memoizedState,a);v&&(h.memoizedState=a,Le=!0),h=h.queue;var E=Fg.bind(null,o,h,e);if(Xo(2048,8,E,[e]),h.getSnapshot!==i||v||Ae!==null&&Ae.memoizedState.tag&1){if(o.flags|=2048,Ia(9,Lu(),Hg.bind(null,o,h,a,i),null),ie===null)throw Error(s(349));d||(Rr&124)!==0||qg(o,i,a)}return a}function qg(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=Nt.updateQueue,i===null?(i=of(),Nt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function Hg(e,i,a,o){i.value=a,i.getSnapshot=o,Gg(i)&&Qg(e)}function Fg(e,i,a){return a(function(){Gg(i)&&Qg(e)})}function Gg(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!Tn(e,a)}catch{return!0}}function Qg(e){var i=_a(e,2);i!==null&&In(i,e,2)}function hf(e){var i=gn();if(typeof e=="function"){var a=e;if(e=a(),Ps){Je(!0);try{a()}finally{Je(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:e},i}function Kg(e,i,a,o){return e.baseState=a,uf(e,Wt,typeof o=="function"?o:$i)}function WT(e,i,a,o,h){if(zu(e))throw Error(s(485));if(e=i.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};q.T!==null?a(!0):d.isTransition=!1,o(d),a=i.pending,a===null?(d.next=i.pending=d,Yg(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Yg(e,i){var a=i.action,o=i.payload,h=e.state;if(i.isTransition){var d=q.T,v={};q.T=v;try{var E=a(h,o),S=q.S;S!==null&&S(v,E),Xg(e,i,E)}catch(j){ff(e,i,j)}finally{q.T=d}}else try{d=a(h,o),Xg(e,i,d)}catch(j){ff(e,i,j)}}function Xg(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){$g(e,i,o)},function(o){return ff(e,i,o)}):$g(e,i,a)}function $g(e,i,a){i.status="fulfilled",i.value=a,Zg(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,Yg(e,a)))}function ff(e,i,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,Zg(i),i=i.next;while(i!==o)}e.action=null}function Zg(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Jg(e,i){return i}function Wg(e,i){if(Qt){var a=ie.formState;if(a!==null){t:{var o=Nt;if(Qt){if(me){e:{for(var h=me,d=pi;h.nodeType!==8;){if(!d){h=null;break e}if(h=Jn(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){me=Jn(h.nextSibling),o=h.data==="F!";break t}}Ds(o)}o=!1}o&&(i=a[0])}}return a=gn(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jg,lastRenderedState:i},a.queue=o,a=_p.bind(null,Nt,o),o.dispatch=a,o=hf(!1),d=yf.bind(null,Nt,!1,o.queue),o=gn(),h={state:i,dispatch:null,action:e,pending:null},o.queue=h,a=WT.bind(null,Nt,h,d,a),h.dispatch=a,o.memoizedState=e,[i,a,!1]}function tp(e){var i=be();return ep(i,Wt,e)}function ep(e,i,a){if(i=uf(e,i,Jg)[0],e=Uu($i)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Yo(i)}catch(v){throw v===qo?Du:v}else o=i;i=be();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Nt.flags|=2048,Ia(9,Lu(),tA.bind(null,h,a),null)),[o,d,e]}function tA(e,i){e.action=i}function np(e){var i=be(),a=Wt;if(a!==null)return ep(i,a,e);be(),i=i.memoizedState,a=be();var o=a.queue.dispatch;return a.memoizedState=e,[i,o,!1]}function Ia(e,i,a,o){return e={tag:e,create:a,deps:o,inst:i,next:null},i=Nt.updateQueue,i===null&&(i=of(),Nt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,i.lastEffect=e),e}function Lu(){return{destroy:void 0,resource:void 0}}function ip(){return be().memoizedState}function ju(e,i,a,o){var h=gn();o=o===void 0?null:o,Nt.flags|=e,h.memoizedState=Ia(1|i,Lu(),a,o)}function Xo(e,i,a,o){var h=be();o=o===void 0?null:o;var d=h.memoizedState.inst;Wt!==null&&o!==null&&ef(o,Wt.memoizedState.deps)?h.memoizedState=Ia(i,d,a,o):(Nt.flags|=e,h.memoizedState=Ia(1|i,d,a,o))}function rp(e,i){ju(8390656,8,e,i)}function sp(e,i){Xo(2048,8,e,i)}function ap(e,i){return Xo(4,2,e,i)}function op(e,i){return Xo(4,4,e,i)}function lp(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function up(e,i,a){a=a!=null?a.concat([e]):null,Xo(4,4,lp.bind(null,i,e),a)}function df(){}function cp(e,i){var a=be();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&ef(i,o[1])?o[0]:(a.memoizedState=[e,i],e)}function hp(e,i){var a=be();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&ef(i,o[1]))return o[0];if(o=e(),Ps){Je(!0);try{e()}finally{Je(!1)}}return a.memoizedState=[o,i],o}function mf(e,i,a){return a===void 0||(Rr&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=my(),Nt.lanes|=e,Mr|=e,a)}function fp(e,i,a,o){return Tn(a,i)?a:Sa.current!==null?(e=mf(e,a,o),Tn(e,i)||(Le=!0),e):(Rr&42)===0?(Le=!0,e.memoizedState=a):(e=my(),Nt.lanes|=e,Mr|=e,i)}function dp(e,i,a,o,h){var d=rt.p;rt.p=d!==0&&8>d?d:8;var v=q.T,E={};q.T=E,yf(e,!1,i,a);try{var S=h(),j=q.S;if(j!==null&&j(E,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var G=$T(S,o);$o(e,i,G,Rn(e))}else $o(e,i,o,Rn(e))}catch(X){$o(e,i,{then:function(){},status:"rejected",reason:X},Rn())}finally{rt.p=d,q.T=v}}function eA(){}function gf(e,i,a,o){if(e.tag!==5)throw Error(s(476));var h=mp(e).queue;dp(e,h,i,ut,a===null?eA:function(){return gp(e),a(o)})}function mp(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ut,baseState:ut,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:ut},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function gp(e){var i=mp(e).next.queue;$o(e,i,{},Rn())}function pf(){return We(ml)}function pp(){return be().memoizedState}function yp(){return be().memoizedState}function nA(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=Rn();e=Sr(a);var o=wr(i,e,a);o!==null&&(In(o,i,a),Fo(o,i,a)),i={cache:Gh()},e.payload=i;return}i=i.return}}function iA(e,i,a){var o=Rn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},zu(e)?vp(i,a):(a=Ph(e,i,a,o),a!==null&&(In(a,e,o),Ep(a,i,o)))}function _p(e,i,a){var o=Rn();$o(e,i,a,o)}function $o(e,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(zu(e))vp(i,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,E=d(v,a);if(h.hasEagerState=!0,h.eagerState=E,Tn(E,v))return bu(e,i,h,0),ie===null&&Au(),!1}catch{}finally{}if(a=Ph(e,i,h,o),a!==null)return In(a,e,o),Ep(a,i,o),!0}return!1}function yf(e,i,a,o){if(o={lane:2,revertLane:Xf(),action:o,hasEagerState:!1,eagerState:null,next:null},zu(e)){if(i)throw Error(s(479))}else i=Ph(e,a,o,2),i!==null&&In(i,e,2)}function zu(e){var i=e.alternate;return e===Nt||i!==null&&i===Nt}function vp(e,i){wa=Vu=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Ep(e,i,a){if((a&4194048)!==0){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,mn(e,a)}}var Bu={readContext:We,use:ku,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useLayoutEffect:ye,useInsertionEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useSyncExternalStore:ye,useId:ye,useHostTransitionStatus:ye,useFormState:ye,useActionState:ye,useOptimistic:ye,useMemoCache:ye,useCacheRefresh:ye},Tp={readContext:We,use:ku,useCallback:function(e,i){return gn().memoizedState=[e,i===void 0?null:i],e},useContext:We,useEffect:rp,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,ju(4194308,4,lp.bind(null,i,e),a)},useLayoutEffect:function(e,i){return ju(4194308,4,e,i)},useInsertionEffect:function(e,i){ju(4,2,e,i)},useMemo:function(e,i){var a=gn();i=i===void 0?null:i;var o=e();if(Ps){Je(!0);try{e()}finally{Je(!1)}}return a.memoizedState=[o,i],o},useReducer:function(e,i,a){var o=gn();if(a!==void 0){var h=a(i);if(Ps){Je(!0);try{a(i)}finally{Je(!1)}}}else h=i;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=iA.bind(null,Nt,e),[o.memoizedState,e]},useRef:function(e){var i=gn();return e={current:e},i.memoizedState=e},useState:function(e){e=hf(e);var i=e.queue,a=_p.bind(null,Nt,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:df,useDeferredValue:function(e,i){var a=gn();return mf(a,e,i)},useTransition:function(){var e=hf(!1);return e=dp.bind(null,Nt,e.queue,!0,!1),gn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var o=Nt,h=gn();if(Qt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),ie===null)throw Error(s(349));(zt&124)!==0||qg(o,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,rp(Fg.bind(null,o,d,e),[e]),o.flags|=2048,Ia(9,Lu(),Hg.bind(null,o,d,a,i),null),a},useId:function(){var e=gn(),i=ie.identifierPrefix;if(Qt){var a=Ki,o=Qi;a=(o&~(1<<32-Pe(o)-1)).toString(32)+a,i=""+i+"R"+a,a=Pu++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=ZT++,i=""+i+"r"+a.toString(32)+"";return e.memoizedState=i},useHostTransitionStatus:pf,useFormState:Wg,useActionState:Wg,useOptimistic:function(e){var i=gn();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=yf.bind(null,Nt,!0,a),a.dispatch=i,[e,i]},useMemoCache:lf,useCacheRefresh:function(){return gn().memoizedState=nA.bind(null,Nt)}},Ap={readContext:We,use:ku,useCallback:cp,useContext:We,useEffect:sp,useImperativeHandle:up,useInsertionEffect:ap,useLayoutEffect:op,useMemo:hp,useReducer:Uu,useRef:ip,useState:function(){return Uu($i)},useDebugValue:df,useDeferredValue:function(e,i){var a=be();return fp(a,Wt.memoizedState,e,i)},useTransition:function(){var e=Uu($i)[0],i=be().memoizedState;return[typeof e=="boolean"?e:Yo(e),i]},useSyncExternalStore:Bg,useId:pp,useHostTransitionStatus:pf,useFormState:tp,useActionState:tp,useOptimistic:function(e,i){var a=be();return Kg(a,Wt,e,i)},useMemoCache:lf,useCacheRefresh:yp},rA={readContext:We,use:ku,useCallback:cp,useContext:We,useEffect:sp,useImperativeHandle:up,useInsertionEffect:ap,useLayoutEffect:op,useMemo:hp,useReducer:cf,useRef:ip,useState:function(){return cf($i)},useDebugValue:df,useDeferredValue:function(e,i){var a=be();return Wt===null?mf(a,e,i):fp(a,Wt.memoizedState,e,i)},useTransition:function(){var e=cf($i)[0],i=be().memoizedState;return[typeof e=="boolean"?e:Yo(e),i]},useSyncExternalStore:Bg,useId:pp,useHostTransitionStatus:pf,useFormState:np,useActionState:np,useOptimistic:function(e,i){var a=be();return Wt!==null?Kg(a,Wt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:lf,useCacheRefresh:yp},Ca=null,Zo=0;function qu(e){var i=Zo;return Zo+=1,Ca===null&&(Ca=[]),Mg(Ca,e,i)}function Jo(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Hu(e,i){throw i.$$typeof===w?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function bp(e){var i=e._init;return i(e._payload)}function Sp(e){function i(P,D){if(e){var L=P.deletions;L===null?(P.deletions=[D],P.flags|=16):L.push(D)}}function a(P,D){if(!e)return null;for(;D!==null;)i(P,D),D=D.sibling;return null}function o(P){for(var D=new Map;P!==null;)P.key!==null?D.set(P.key,P):D.set(P.index,P),P=P.sibling;return D}function h(P,D){return P=Gi(P,D),P.index=0,P.sibling=null,P}function d(P,D,L){return P.index=L,e?(L=P.alternate,L!==null?(L=L.index,L<D?(P.flags|=67108866,D):L):(P.flags|=67108866,D)):(P.flags|=1048576,D)}function v(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function E(P,D,L,K){return D===null||D.tag!==6?(D=Uh(L,P.mode,K),D.return=P,D):(D=h(D,L),D.return=P,D)}function S(P,D,L,K){var ot=L.type;return ot===J?G(P,D,L.props.children,K,L.key):D!==null&&(D.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===b&&bp(ot)===D.type)?(D=h(D,L.props),Jo(D,L),D.return=P,D):(D=wu(L.type,L.key,L.props,null,P.mode,K),Jo(D,L),D.return=P,D)}function j(P,D,L,K){return D===null||D.tag!==4||D.stateNode.containerInfo!==L.containerInfo||D.stateNode.implementation!==L.implementation?(D=Lh(L,P.mode,K),D.return=P,D):(D=h(D,L.children||[]),D.return=P,D)}function G(P,D,L,K,ot){return D===null||D.tag!==7?(D=Is(L,P.mode,K,ot),D.return=P,D):(D=h(D,L),D.return=P,D)}function X(P,D,L){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Uh(""+D,P.mode,L),D.return=P,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case C:return L=wu(D.type,D.key,D.props,null,P.mode,L),Jo(L,D),L.return=P,L;case F:return D=Lh(D,P.mode,L),D.return=P,D;case b:var K=D._init;return D=K(D._payload),X(P,D,L)}if(se(D)||k(D))return D=Is(D,P.mode,L,null),D.return=P,D;if(typeof D.then=="function")return X(P,qu(D),L);if(D.$$typeof===ct)return X(P,Nu(P,D),L);Hu(P,D)}return null}function z(P,D,L,K){var ot=D!==null?D.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return ot!==null?null:E(P,D,""+L,K);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case C:return L.key===ot?S(P,D,L,K):null;case F:return L.key===ot?j(P,D,L,K):null;case b:return ot=L._init,L=ot(L._payload),z(P,D,L,K)}if(se(L)||k(L))return ot!==null?null:G(P,D,L,K,null);if(typeof L.then=="function")return z(P,D,qu(L),K);if(L.$$typeof===ct)return z(P,D,Nu(P,L),K);Hu(P,L)}return null}function B(P,D,L,K,ot){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return P=P.get(L)||null,E(D,P,""+K,ot);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case C:return P=P.get(K.key===null?L:K.key)||null,S(D,P,K,ot);case F:return P=P.get(K.key===null?L:K.key)||null,j(D,P,K,ot);case b:var Dt=K._init;return K=Dt(K._payload),B(P,D,L,K,ot)}if(se(K)||k(K))return P=P.get(L)||null,G(D,P,K,ot,null);if(typeof K.then=="function")return B(P,D,L,qu(K),ot);if(K.$$typeof===ct)return B(P,D,L,Nu(D,K),ot);Hu(D,K)}return null}function St(P,D,L,K){for(var ot=null,Dt=null,ft=D,pt=D=0,ze=null;ft!==null&&pt<L.length;pt++){ft.index>pt?(ze=ft,ft=null):ze=ft.sibling;var Ht=z(P,ft,L[pt],K);if(Ht===null){ft===null&&(ft=ze);break}e&&ft&&Ht.alternate===null&&i(P,ft),D=d(Ht,D,pt),Dt===null?ot=Ht:Dt.sibling=Ht,Dt=Ht,ft=ze}if(pt===L.length)return a(P,ft),Qt&&Ns(P,pt),ot;if(ft===null){for(;pt<L.length;pt++)ft=X(P,L[pt],K),ft!==null&&(D=d(ft,D,pt),Dt===null?ot=ft:Dt.sibling=ft,Dt=ft);return Qt&&Ns(P,pt),ot}for(ft=o(ft);pt<L.length;pt++)ze=B(ft,P,pt,L[pt],K),ze!==null&&(e&&ze.alternate!==null&&ft.delete(ze.key===null?pt:ze.key),D=d(ze,D,pt),Dt===null?ot=ze:Dt.sibling=ze,Dt=ze);return e&&ft.forEach(function(qr){return i(P,qr)}),Qt&&Ns(P,pt),ot}function gt(P,D,L,K){if(L==null)throw Error(s(151));for(var ot=null,Dt=null,ft=D,pt=D=0,ze=null,Ht=L.next();ft!==null&&!Ht.done;pt++,Ht=L.next()){ft.index>pt?(ze=ft,ft=null):ze=ft.sibling;var qr=z(P,ft,Ht.value,K);if(qr===null){ft===null&&(ft=ze);break}e&&ft&&qr.alternate===null&&i(P,ft),D=d(qr,D,pt),Dt===null?ot=qr:Dt.sibling=qr,Dt=qr,ft=ze}if(Ht.done)return a(P,ft),Qt&&Ns(P,pt),ot;if(ft===null){for(;!Ht.done;pt++,Ht=L.next())Ht=X(P,Ht.value,K),Ht!==null&&(D=d(Ht,D,pt),Dt===null?ot=Ht:Dt.sibling=Ht,Dt=Ht);return Qt&&Ns(P,pt),ot}for(ft=o(ft);!Ht.done;pt++,Ht=L.next())Ht=B(ft,P,pt,Ht.value,K),Ht!==null&&(e&&Ht.alternate!==null&&ft.delete(Ht.key===null?pt:Ht.key),D=d(Ht,D,pt),Dt===null?ot=Ht:Dt.sibling=Ht,Dt=Ht);return e&&ft.forEach(function(sb){return i(P,sb)}),Qt&&Ns(P,pt),ot}function ee(P,D,L,K){if(typeof L=="object"&&L!==null&&L.type===J&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case C:t:{for(var ot=L.key;D!==null;){if(D.key===ot){if(ot=L.type,ot===J){if(D.tag===7){a(P,D.sibling),K=h(D,L.props.children),K.return=P,P=K;break t}}else if(D.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===b&&bp(ot)===D.type){a(P,D.sibling),K=h(D,L.props),Jo(K,L),K.return=P,P=K;break t}a(P,D);break}else i(P,D);D=D.sibling}L.type===J?(K=Is(L.props.children,P.mode,K,L.key),K.return=P,P=K):(K=wu(L.type,L.key,L.props,null,P.mode,K),Jo(K,L),K.return=P,P=K)}return v(P);case F:t:{for(ot=L.key;D!==null;){if(D.key===ot)if(D.tag===4&&D.stateNode.containerInfo===L.containerInfo&&D.stateNode.implementation===L.implementation){a(P,D.sibling),K=h(D,L.children||[]),K.return=P,P=K;break t}else{a(P,D);break}else i(P,D);D=D.sibling}K=Lh(L,P.mode,K),K.return=P,P=K}return v(P);case b:return ot=L._init,L=ot(L._payload),ee(P,D,L,K)}if(se(L))return St(P,D,L,K);if(k(L)){if(ot=k(L),typeof ot!="function")throw Error(s(150));return L=ot.call(L),gt(P,D,L,K)}if(typeof L.then=="function")return ee(P,D,qu(L),K);if(L.$$typeof===ct)return ee(P,D,Nu(P,L),K);Hu(P,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,D!==null&&D.tag===6?(a(P,D.sibling),K=h(D,L),K.return=P,P=K):(a(P,D),K=Uh(L,P.mode,K),K.return=P,P=K),v(P)):a(P,D)}return function(P,D,L,K){try{Zo=0;var ot=ee(P,D,L,K);return Ca=null,ot}catch(ft){if(ft===qo||ft===Du)throw ft;var Dt=An(29,ft,null,P.mode);return Dt.lanes=K,Dt.return=P,Dt}finally{}}}var Na=Sp(!0),wp=Sp(!1),Bn=Y(null),yi=null;function Ir(e){var i=e.alternate;W(Oe,Oe.current&1),W(Bn,e),yi===null&&(i===null||Sa.current!==null||i.memoizedState!==null)&&(yi=e)}function Rp(e){if(e.tag===22){if(W(Oe,Oe.current),W(Bn,e),yi===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(yi=e)}}else Cr()}function Cr(){W(Oe,Oe.current),W(Bn,Bn.current)}function Zi(e){nt(Bn),yi===e&&(yi=null),nt(Oe)}var Oe=Y(0);function Fu(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||od(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function _f(e,i,a,o){i=e.memoizedState,a=a(o,i),a=a==null?i:T({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var vf={enqueueSetState:function(e,i,a){e=e._reactInternals;var o=Rn(),h=Sr(o);h.payload=i,a!=null&&(h.callback=a),i=wr(e,h,o),i!==null&&(In(i,e,o),Fo(i,e,o))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var o=Rn(),h=Sr(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=wr(e,h,o),i!==null&&(In(i,e,o),Fo(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=Rn(),o=Sr(a);o.tag=2,i!=null&&(o.callback=i),i=wr(e,o,a),i!==null&&(In(i,e,a),Fo(i,e,a))}};function Ip(e,i,a,o,h,d,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,v):i.prototype&&i.prototype.isPureReactComponent?!Vo(a,o)||!Vo(h,d):!0}function Cp(e,i,a,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==e&&vf.enqueueReplaceState(i,i.state,null)}function ks(e,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(e=e.defaultProps){a===i&&(a=T({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var Gu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Np(e){Gu(e)}function xp(e){console.error(e)}function Dp(e){Gu(e)}function Qu(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function Op(e,i,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Ef(e,i,a){return a=Sr(a),a.tag=3,a.payload={element:null},a.callback=function(){Qu(e,i)},a}function Mp(e){return e=Sr(e),e.tag=3,e}function Vp(e,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;e.payload=function(){return h(d)},e.callback=function(){Op(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Op(i,a,o),typeof h!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function sA(e,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&jo(i,a,h,!0),a=Bn.current,a!==null){switch(a.tag){case 13:return yi===null?Ff():a.alternate===null&&ge===0&&(ge=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Yh?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),Qf(e,o,h)),!1;case 22:return a.flags|=65536,o===Yh?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),Qf(e,o,h)),!1}throw Error(s(435,a.tag))}return Qf(e,o,h),Ff(),!1}if(Qt)return i=Bn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==Bh&&(e=Error(s(422),{cause:o}),Lo(Un(e,a)))):(o!==Bh&&(i=Error(s(423),{cause:o}),Lo(Un(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=Un(o,a),h=Ef(e.stateNode,o,h),Zh(e,h),ge!==4&&(ge=2)),!1;var d=Error(s(520),{cause:o});if(d=Un(d,a),sl===null?sl=[d]:sl.push(d),ge!==4&&(ge=2),i===null)return!0;o=Un(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=Ef(a.stateNode,o,e),Zh(a,e),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Vr===null||!Vr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Mp(h),Vp(h,e,a,o),Zh(a,h),!1}a=a.return}while(a!==null);return!1}var Pp=Error(s(461)),Le=!1;function Fe(e,i,a,o){i.child=e===null?wp(i,null,a,o):Na(i,e.child,a,o)}function kp(e,i,a,o,h){a=a.render;var d=i.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return Ms(i),o=nf(e,i,a,v,d,h),E=rf(),e!==null&&!Le?(sf(e,i,h),Ji(e,i,h)):(Qt&&E&&jh(i),i.flags|=1,Fe(e,i,o,h),i.child)}function Up(e,i,a,o,h){if(e===null){var d=a.type;return typeof d=="function"&&!kh(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Lp(e,i,d,o,h)):(e=wu(a.type,null,o,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!Cf(e,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Vo,a(v,o)&&e.ref===i.ref)return Ji(e,i,h)}return i.flags|=1,e=Gi(d,o),e.ref=i.ref,e.return=i,i.child=e}function Lp(e,i,a,o,h){if(e!==null){var d=e.memoizedProps;if(Vo(d,o)&&e.ref===i.ref)if(Le=!1,i.pendingProps=o=d,Cf(e,h))(e.flags&131072)!==0&&(Le=!0);else return i.lanes=e.lanes,Ji(e,i,h)}return Tf(e,i,a,o,h)}function jp(e,i,a){var o=i.pendingProps,h=o.children,d=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=d!==null?d.baseLanes|a:a,e!==null){for(h=i.child=e.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~o}else i.childLanes=0,i.child=null;return zp(e,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&xu(i,d!==null?d.cachePool:null),d!==null?Lg(i,d):Wh(),Rp(i);else return i.lanes=i.childLanes=536870912,zp(e,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(xu(i,d.cachePool),Lg(i,d),Cr(),i.memoizedState=null):(e!==null&&xu(i,null),Wh(),Cr());return Fe(e,i,h,a),i.child}function zp(e,i,a,o){var h=Kh();return h=h===null?null:{parent:De._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},e!==null&&xu(i,null),Wh(),Rp(i),e!==null&&jo(e,i,o,!0),null}function Ku(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Tf(e,i,a,o,h){return Ms(i),a=nf(e,i,a,o,void 0,h),o=rf(),e!==null&&!Le?(sf(e,i,h),Ji(e,i,h)):(Qt&&o&&jh(i),i.flags|=1,Fe(e,i,a,h),i.child)}function Bp(e,i,a,o,h,d){return Ms(i),i.updateQueue=null,a=zg(i,o,a,h),jg(e),o=rf(),e!==null&&!Le?(sf(e,i,d),Ji(e,i,d)):(Qt&&o&&jh(i),i.flags|=1,Fe(e,i,a,d),i.child)}function qp(e,i,a,o,h){if(Ms(i),i.stateNode===null){var d=va,v=a.contextType;typeof v=="object"&&v!==null&&(d=We(v)),d=new a(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=vf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},Xh(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?We(v):va,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(_f(i,a,v,o),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&vf.enqueueReplaceState(d,d.state,null),Qo(i,o,d,h),Go(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(e===null){d=i.stateNode;var E=i.memoizedProps,S=ks(a,E);d.props=S;var j=d.context,G=a.contextType;v=va,typeof G=="object"&&G!==null&&(v=We(G));var X=a.getDerivedStateFromProps;G=typeof X=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,G||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||j!==v)&&Cp(i,d,o,v),br=!1;var z=i.memoizedState;d.state=z,Qo(i,o,d,h),Go(),j=i.memoizedState,E||z!==j||br?(typeof X=="function"&&(_f(i,a,X,o),j=i.memoizedState),(S=br||Ip(i,a,S,o,z,j,v))?(G||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=j),d.props=o,d.state=j,d.context=v,o=S):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,$h(e,i),v=i.memoizedProps,G=ks(a,v),d.props=G,X=i.pendingProps,z=d.context,j=a.contextType,S=va,typeof j=="object"&&j!==null&&(S=We(j)),E=a.getDerivedStateFromProps,(j=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==X||z!==S)&&Cp(i,d,o,S),br=!1,z=i.memoizedState,d.state=z,Qo(i,o,d,h),Go();var B=i.memoizedState;v!==X||z!==B||br||e!==null&&e.dependencies!==null&&Cu(e.dependencies)?(typeof E=="function"&&(_f(i,a,E,o),B=i.memoizedState),(G=br||Ip(i,a,G,o,z,B,S)||e!==null&&e.dependencies!==null&&Cu(e.dependencies))?(j||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,B,S),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,B,S)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=B),d.props=o,d.state=B,d.context=S,o=G):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),o=!1)}return d=o,Ku(e,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&o?(i.child=Na(i,e.child,null,h),i.child=Na(i,null,a,h)):Fe(e,i,a,h),i.memoizedState=d.state,e=i.child):e=Ji(e,i,h),e}function Hp(e,i,a,o){return Uo(),i.flags|=256,Fe(e,i,a,o),i.child}var Af={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bf(e){return{baseLanes:e,cachePool:xg()}}function Sf(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=qn),e}function Fp(e,i,a){var o=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=e!==null&&e.memoizedState===null?!1:(Oe.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(Qt){if(h?Ir(i):Cr(),Qt){var E=me,S;if(S=E){t:{for(S=E,E=pi;S.nodeType!==8;){if(!E){E=null;break t}if(S=Jn(S.nextSibling),S===null){E=null;break t}}E=S}E!==null?(i.memoizedState={dehydrated:E,treeContext:Cs!==null?{id:Qi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},S=An(18,null,null,0),S.stateNode=E,S.return=i,i.child=S,cn=i,me=null,S=!0):S=!1}S||Ds(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return od(E)?i.lanes=32:i.lanes=536870912,null;Zi(i)}return E=o.children,o=o.fallback,h?(Cr(),h=i.mode,E=Yu({mode:"hidden",children:E},h),o=Is(o,h,a,null),E.return=i,o.return=i,E.sibling=o,i.child=E,h=i.child,h.memoizedState=bf(a),h.childLanes=Sf(e,v,a),i.memoizedState=Af,o):(Ir(i),wf(i,E))}if(S=e.memoizedState,S!==null&&(E=S.dehydrated,E!==null)){if(d)i.flags&256?(Ir(i),i.flags&=-257,i=Rf(e,i,a)):i.memoizedState!==null?(Cr(),i.child=e.child,i.flags|=128,i=null):(Cr(),h=o.fallback,E=i.mode,o=Yu({mode:"visible",children:o.children},E),h=Is(h,E,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,Na(i,e.child,null,a),o=i.child,o.memoizedState=bf(a),o.childLanes=Sf(e,v,a),i.memoizedState=Af,i=h);else if(Ir(i),od(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var j=v.dgst;v=j,o=Error(s(419)),o.stack="",o.digest=v,Lo({value:o,source:null,stack:null}),i=Rf(e,i,a)}else if(Le||jo(e,i,a,!1),v=(a&e.childLanes)!==0,Le||v){if(v=ie,v!==null&&(o=a&-a,o=(o&42)!==0?1:si(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==S.retryLane))throw S.retryLane=o,_a(e,o),In(v,e,o),Pp;E.data==="$?"||Ff(),i=Rf(e,i,a)}else E.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=S.treeContext,me=Jn(E.nextSibling),cn=i,Qt=!0,xs=null,pi=!1,e!==null&&(jn[zn++]=Qi,jn[zn++]=Ki,jn[zn++]=Cs,Qi=e.id,Ki=e.overflow,Cs=i),i=wf(i,o.children),i.flags|=4096);return i}return h?(Cr(),h=o.fallback,E=i.mode,S=e.child,j=S.sibling,o=Gi(S,{mode:"hidden",children:o.children}),o.subtreeFlags=S.subtreeFlags&65011712,j!==null?h=Gi(j,h):(h=Is(h,E,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,E=e.child.memoizedState,E===null?E=bf(a):(S=E.cachePool,S!==null?(j=De._currentValue,S=S.parent!==j?{parent:j,pool:j}:S):S=xg(),E={baseLanes:E.baseLanes|a,cachePool:S}),h.memoizedState=E,h.childLanes=Sf(e,v,a),i.memoizedState=Af,o):(Ir(i),a=e.child,e=a.sibling,a=Gi(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function wf(e,i){return i=Yu({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Yu(e,i){return e=An(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Rf(e,i,a){return Na(i,e.child,null,a),e=wf(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Gp(e,i,a){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),Hh(e.return,i,a)}function If(e,i,a,o,h){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=a,d.tailMode=h)}function Qp(e,i,a){var o=i.pendingProps,h=o.revealOrder,d=o.tail;if(Fe(e,i,o.children,a),o=Oe.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gp(e,a,i);else if(e.tag===19)Gp(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(W(Oe,o),h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&Fu(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),If(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&Fu(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}If(i,!0,a,null,d);break;case"together":If(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ji(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Mr|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(jo(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=Gi(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Gi(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Cf(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Cu(e)))}function aA(e,i,a){switch(i.tag){case 3:qt(i,i.stateNode.containerInfo),Ar(i,De,e.memoizedState.cache),Uo();break;case 27:case 5:fn(i);break;case 4:qt(i,i.stateNode.containerInfo);break;case 10:Ar(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(Ir(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Fp(e,i,a):(Ir(i),e=Ji(e,i,a),e!==null?e.sibling:null);Ir(i);break;case 19:var h=(e.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(jo(e,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return Qp(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),W(Oe,Oe.current),o)break;return null;case 22:case 23:return i.lanes=0,jp(e,i,a);case 24:Ar(i,De,e.memoizedState.cache)}return Ji(e,i,a)}function Kp(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Le=!0;else{if(!Cf(e,a)&&(i.flags&128)===0)return Le=!1,aA(e,i,a);Le=(e.flags&131072)!==0}else Le=!1,Qt&&(i.flags&1048576)!==0&&bg(i,Iu,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")kh(o)?(e=ks(o,e),i.tag=1,i=qp(null,i,o,e,a)):(i.tag=0,i=Tf(null,i,o,e,a));else{if(o!=null){if(h=o.$$typeof,h===Ot){i.tag=11,i=kp(null,i,o,e,a);break t}else if(h===M){i.tag=14,i=Up(null,i,o,e,a);break t}}throw i=Zt(o)||o,Error(s(306,i,""))}}return i;case 0:return Tf(e,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=ks(o,i.pendingProps),qp(e,i,o,h,a);case 3:t:{if(qt(i,i.stateNode.containerInfo),e===null)throw Error(s(387));o=i.pendingProps;var d=i.memoizedState;h=d.element,$h(e,i),Qo(i,o,null,a);var v=i.memoizedState;if(o=v.cache,Ar(i,De,o),o!==d.cache&&Fh(i,[De],a,!0),Go(),o=v.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Hp(e,i,o,a);break t}else if(o!==h){h=Un(Error(s(424)),i),Lo(h),i=Hp(e,i,o,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(me=Jn(e.firstChild),cn=i,Qt=!0,xs=null,pi=!0,a=wp(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Uo(),o===h){i=Ji(e,i,a);break t}Fe(e,i,o,a)}i=i.child}return i;case 26:return Ku(e,i),e===null?(a=Zy(i.type,null,i.pendingProps,null))?i.memoizedState=a:Qt||(a=i.type,e=i.pendingProps,o=lc(bt.current).createElement(a),o[Ce]=i,o[Ee]=e,Qe(o,a,e),pe(o),i.stateNode=o):i.memoizedState=Zy(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return fn(i),e===null&&Qt&&(o=i.stateNode=Yy(i.type,i.pendingProps,bt.current),cn=i,pi=!0,h=me,Ur(i.type)?(ld=h,me=Jn(o.firstChild)):me=h),Fe(e,i,i.pendingProps.children,a),Ku(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Qt&&((h=o=me)&&(o=VA(o,i.type,i.pendingProps,pi),o!==null?(i.stateNode=o,cn=i,me=Jn(o.firstChild),pi=!1,h=!0):h=!1),h||Ds(i)),fn(i),h=i.type,d=i.pendingProps,v=e!==null?e.memoizedProps:null,o=d.children,rd(h,d)?o=null:v!==null&&rd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=nf(e,i,JT,null,null,a),ml._currentValue=h),Ku(e,i),Fe(e,i,o,a),i.child;case 6:return e===null&&Qt&&((e=a=me)&&(a=PA(a,i.pendingProps,pi),a!==null?(i.stateNode=a,cn=i,me=null,e=!0):e=!1),e||Ds(i)),null;case 13:return Fp(e,i,a);case 4:return qt(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=Na(i,null,o,a):Fe(e,i,o,a),i.child;case 11:return kp(e,i,i.type,i.pendingProps,a);case 7:return Fe(e,i,i.pendingProps,a),i.child;case 8:return Fe(e,i,i.pendingProps.children,a),i.child;case 12:return Fe(e,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,Ar(i,i.type,o.value),Fe(e,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Ms(i),h=We(h),o=o(h),i.flags|=1,Fe(e,i,o,a),i.child;case 14:return Up(e,i,i.type,i.pendingProps,a);case 15:return Lp(e,i,i.type,i.pendingProps,a);case 19:return Qp(e,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},e===null?(a=Yu(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Gi(e.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return jp(e,i,a);case 24:return Ms(i),o=We(De),e===null?(h=Kh(),h===null&&(h=ie,d=Gh(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:o,cache:h},Xh(i),Ar(i,De,h)):((e.lanes&a)!==0&&($h(e,i),Qo(i,null,null,a),Go()),h=e.memoizedState,d=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Ar(i,De,o)):(o=d.cache,Ar(i,De,o),o!==h.cache&&Fh(i,[De],a,!0))),Fe(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Wi(e){e.flags|=4}function Yp(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!n_(i)){if(i=Bn.current,i!==null&&((zt&4194048)===zt?yi!==null:(zt&62914560)!==zt&&(zt&536870912)===0||i!==yi))throw Ho=Yh,Dg;e.flags|=8192}}function Xu(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?vt():536870912,e.lanes|=i,Ma|=i)}function Wo(e,i){if(!Qt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function ue(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,i}function oA(e,i,a){var o=i.pendingProps;switch(zh(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ue(i),null;case 1:return ue(i),null;case 3:return a=i.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Xi(De),vn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ko(i)?Wi(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Rg())),ue(i),null;case 26:return a=i.memoizedState,e===null?(Wi(i),a!==null?(ue(i),Yp(i,a)):(ue(i),i.flags&=-16777217)):a?a!==e.memoizedState?(Wi(i),ue(i),Yp(i,a)):(ue(i),i.flags&=-16777217):(e.memoizedProps!==o&&Wi(i),ue(i),i.flags&=-16777217),null;case 27:Nn(i),a=bt.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==o&&Wi(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return ue(i),null}e=at.current,ko(i)?Sg(i):(e=Yy(h,o,a),i.stateNode=e,Wi(i))}return ue(i),null;case 5:if(Nn(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&Wi(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return ue(i),null}if(e=at.current,ko(i))Sg(i);else{switch(h=lc(bt.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}e[Ce]=i,e[Ee]=o;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(Qe(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Wi(i)}}return ue(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==o&&Wi(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(e=bt.current,ko(i)){if(e=i.stateNode,a=i.memoizedProps,o=null,h=cn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Ce]=i,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||By(e.nodeValue,a)),e||Ds(i)}else e=lc(e).createTextNode(o),e[Ce]=i,i.stateNode=e}return ue(i),null;case 13:if(o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=ko(i),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Ce]=i}else Uo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ue(i),h=!1}else h=Rg(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Zi(i),i):(Zi(i),null)}if(Zi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var d=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),Xu(i,i.updateQueue),ue(i),null;case 4:return vn(),e===null&&Wf(i.stateNode.containerInfo),ue(i),null;case 10:return Xi(i.type),ue(i),null;case 19:if(nt(Oe),h=i.memoizedState,h===null)return ue(i),null;if(o=(i.flags&128)!==0,d=h.rendering,d===null)if(o)Wo(h,!1);else{if(ge!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=Fu(e),d!==null){for(i.flags|=128,Wo(h,!1),e=d.updateQueue,i.updateQueue=e,Xu(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Ag(a,e),a=a.sibling;return W(Oe,Oe.current&1|2),i.child}e=e.sibling}h.tail!==null&&Re()>Ju&&(i.flags|=128,o=!0,Wo(h,!1),i.lanes=4194304)}else{if(!o)if(e=Fu(d),e!==null){if(i.flags|=128,o=!0,e=e.updateQueue,i.updateQueue=e,Xu(i,e),Wo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Qt)return ue(i),null}else 2*Re()-h.renderingStartTime>Ju&&a!==536870912&&(i.flags|=128,o=!0,Wo(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(e=h.last,e!==null?e.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Re(),i.sibling=null,e=Oe.current,W(Oe,o?e&1|2:e&1),i):(ue(i),null);case 22:case 23:return Zi(i),tf(),o=i.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(ue(i),i.subtreeFlags&6&&(i.flags|=8192)):ue(i),a=i.updateQueue,a!==null&&Xu(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),e!==null&&nt(Vs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Xi(De),ue(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function lA(e,i){switch(zh(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Xi(De),vn(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Nn(i),null;case 13:if(Zi(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Uo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return nt(Oe),null;case 4:return vn(),null;case 10:return Xi(i.type),null;case 22:case 23:return Zi(i),tf(),e!==null&&nt(Vs),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Xi(De),null;case 25:return null;default:return null}}function Xp(e,i){switch(zh(i),i.tag){case 3:Xi(De),vn();break;case 26:case 27:case 5:Nn(i);break;case 4:vn();break;case 13:Zi(i);break;case 19:nt(Oe);break;case 10:Xi(i.type);break;case 22:case 23:Zi(i),tf(),e!==null&&nt(Vs);break;case 24:Xi(De)}}function tl(e,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var d=a.create,v=a.inst;o=d(),v.destroy=o}a=a.next}while(a!==h)}}catch(E){ne(i,i.return,E)}}function Nr(e,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&e)===e){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=i;var S=a,j=E;try{j()}catch(G){ne(h,S,G)}}}o=o.next}while(o!==d)}}catch(G){ne(i,i.return,G)}}function $p(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{Ug(i,a)}catch(o){ne(e,e.return,o)}}}function Zp(e,i,a){a.props=ks(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){ne(e,i,o)}}function el(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){ne(e,i,h)}}function _i(e,i){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){ne(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ne(e,i,h)}else a.current=null}function Jp(e){var i=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){ne(e,e.return,h)}}function Nf(e,i,a){try{var o=e.stateNode;NA(o,e.type,a,i),o[Ee]=i}catch(h){ne(e,e.return,h)}}function Wp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ur(e.type)||e.tag===4}function xf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Wp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ur(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Df(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=oc));else if(o!==4&&(o===27&&Ur(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(Df(e,i,a),e=e.sibling;e!==null;)Df(e,i,a),e=e.sibling}function $u(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(o!==4&&(o===27&&Ur(e.type)&&(a=e.stateNode),e=e.child,e!==null))for($u(e,i,a),e=e.sibling;e!==null;)$u(e,i,a),e=e.sibling}function ty(e){var i=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Qe(i,o,a),i[Ce]=e,i[Ee]=a}catch(d){ne(e,e.return,d)}}var tr=!1,_e=!1,Of=!1,ey=typeof WeakSet=="function"?WeakSet:Set,je=null;function uA(e,i){if(e=e.containerInfo,nd=mc,e=fg(e),Nh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var v=0,E=-1,S=-1,j=0,G=0,X=e,z=null;e:for(;;){for(var B;X!==a||h!==0&&X.nodeType!==3||(E=v+h),X!==d||o!==0&&X.nodeType!==3||(S=v+o),X.nodeType===3&&(v+=X.nodeValue.length),(B=X.firstChild)!==null;)z=X,X=B;for(;;){if(X===e)break e;if(z===a&&++j===h&&(E=v),z===d&&++G===o&&(S=v),(B=X.nextSibling)!==null)break;X=z,z=X.parentNode}X=B}a=E===-1||S===-1?null:{start:E,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(id={focusedElem:e,selectionRange:a},mc=!1,je=i;je!==null;)if(i=je,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,je=e;else for(;je!==null;){switch(i=je,d=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var St=ks(a.type,h,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(St,d),o.__reactInternalSnapshotBeforeUpdate=e}catch(gt){ne(a,a.return,gt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)ad(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ad(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,je=e;break}je=i.return}}function ny(e,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:xr(e,a),o&4&&tl(5,a);break;case 1:if(xr(e,a),o&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(v){ne(a,a.return,v)}else{var h=ks(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){ne(a,a.return,v)}}o&64&&$p(a),o&512&&el(a,a.return);break;case 3:if(xr(e,a),o&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Ug(e,i)}catch(v){ne(a,a.return,v)}}break;case 27:i===null&&o&4&&ty(a);case 26:case 5:xr(e,a),i===null&&o&4&&Jp(a),o&512&&el(a,a.return);break;case 12:xr(e,a);break;case 13:xr(e,a),o&4&&sy(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=_A.bind(null,a),kA(e,a))));break;case 22:if(o=a.memoizedState!==null||tr,!o){i=i!==null&&i.memoizedState!==null||_e,h=tr;var d=_e;tr=o,(_e=i)&&!d?Dr(e,a,(a.subtreeFlags&8772)!==0):xr(e,a),tr=h,_e=d}break;case 30:break;default:xr(e,a)}}function iy(e){var i=e.alternate;i!==null&&(e.alternate=null,iy(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&_r(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var le=null,pn=!1;function er(e,i,a){for(a=a.child;a!==null;)ry(e,i,a),a=a.sibling}function ry(e,i,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(ae,a)}catch{}switch(a.tag){case 26:_e||_i(a,i),er(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:_e||_i(a,i);var o=le,h=pn;Ur(a.type)&&(le=a.stateNode,pn=!1),er(e,i,a),cl(a.stateNode),le=o,pn=h;break;case 5:_e||_i(a,i);case 6:if(o=le,h=pn,le=null,er(e,i,a),le=o,pn=h,le!==null)if(pn)try{(le.nodeType===9?le.body:le.nodeName==="HTML"?le.ownerDocument.body:le).removeChild(a.stateNode)}catch(d){ne(a,i,d)}else try{le.removeChild(a.stateNode)}catch(d){ne(a,i,d)}break;case 18:le!==null&&(pn?(e=le,Qy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),_l(e)):Qy(le,a.stateNode));break;case 4:o=le,h=pn,le=a.stateNode.containerInfo,pn=!0,er(e,i,a),le=o,pn=h;break;case 0:case 11:case 14:case 15:_e||Nr(2,a,i),_e||Nr(4,a,i),er(e,i,a);break;case 1:_e||(_i(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Zp(a,i,o)),er(e,i,a);break;case 21:er(e,i,a);break;case 22:_e=(o=_e)||a.memoizedState!==null,er(e,i,a),_e=o;break;default:er(e,i,a)}}function sy(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{_l(e)}catch(a){ne(i,i.return,a)}}function cA(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new ey),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new ey),i;default:throw Error(s(435,e.tag))}}function Mf(e,i){var a=cA(e);i.forEach(function(o){var h=vA.bind(null,e,o);a.has(o)||(a.add(o),o.then(h,h))})}function bn(e,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=e,v=i,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(Ur(E.type)){le=E.stateNode,pn=!1;break t}break;case 5:le=E.stateNode,pn=!1;break t;case 3:case 4:le=E.stateNode.containerInfo,pn=!0;break t}E=E.return}if(le===null)throw Error(s(160));ry(d,v,h),le=null,pn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)ay(i,e),i=i.sibling}var Zn=null;function ay(e,i){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:bn(i,e),Sn(e),o&4&&(Nr(3,e,e.return),tl(3,e),Nr(5,e,e.return));break;case 1:bn(i,e),Sn(e),o&512&&(_e||a===null||_i(a,a.return)),o&64&&tr&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Zn;if(bn(i,e),Sn(e),o&512&&(_e||a===null||_i(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[hs]||d[Ce]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),Qe(d,o,a),d[Ce]=e,pe(d),o=d;break t;case"link":var v=t_("link","href",h).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(d=v[E],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}d=h.createElement(o),Qe(d,o,a),h.head.appendChild(d);break;case"meta":if(v=t_("meta","content",h).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(d=v[E],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}d=h.createElement(o),Qe(d,o,a),h.head.appendChild(d);break;default:throw Error(s(468,o))}d[Ce]=e,pe(d),o=d}e.stateNode=o}else e_(h,e.type,e.stateNode);else e.stateNode=Wy(h,o,e.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?e_(h,e.type,e.stateNode):Wy(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Nf(e,e.memoizedProps,a.memoizedProps)}break;case 27:bn(i,e),Sn(e),o&512&&(_e||a===null||_i(a,a.return)),a!==null&&o&4&&Nf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(bn(i,e),Sn(e),o&512&&(_e||a===null||_i(a,a.return)),e.flags&32){h=e.stateNode;try{Mn(h,"")}catch(B){ne(e,e.return,B)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,Nf(e,h,a!==null?a.memoizedProps:h)),o&1024&&(Of=!0);break;case 6:if(bn(i,e),Sn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(B){ne(e,e.return,B)}}break;case 3:if(hc=null,h=Zn,Zn=uc(i.containerInfo),bn(i,e),Zn=h,Sn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{_l(i.containerInfo)}catch(B){ne(e,e.return,B)}Of&&(Of=!1,oy(e));break;case 4:o=Zn,Zn=uc(e.stateNode.containerInfo),bn(i,e),Sn(e),Zn=o;break;case 12:bn(i,e),Sn(e);break;case 13:bn(i,e),Sn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(jf=Re()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Mf(e,o)));break;case 22:h=e.memoizedState!==null;var S=a!==null&&a.memoizedState!==null,j=tr,G=_e;if(tr=j||h,_e=G||S,bn(i,e),_e=G,tr=j,Sn(e),o&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||S||tr||_e||Us(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){S=a=i;try{if(d=S.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=S.stateNode;var X=S.memoizedProps.style,z=X!=null&&X.hasOwnProperty("display")?X.display:null;E.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(B){ne(S,S.return,B)}}}else if(i.tag===6){if(a===null){S=i;try{S.stateNode.nodeValue=h?"":S.memoizedProps}catch(B){ne(S,S.return,B)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Mf(e,a))));break;case 19:bn(i,e),Sn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Mf(e,o)));break;case 30:break;case 21:break;default:bn(i,e),Sn(e)}}function Sn(e){var i=e.flags;if(i&2){try{for(var a,o=e.return;o!==null;){if(Wp(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=xf(e);$u(e,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(Mn(v,""),a.flags&=-33);var E=xf(e);$u(e,E,v);break;case 3:case 4:var S=a.stateNode.containerInfo,j=xf(e);Df(e,j,S);break;default:throw Error(s(161))}}catch(G){ne(e,e.return,G)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function oy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;oy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function xr(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ny(e,i.alternate,i),i=i.sibling}function Us(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Nr(4,i,i.return),Us(i);break;case 1:_i(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Zp(i,i.return,a),Us(i);break;case 27:cl(i.stateNode);case 26:case 5:_i(i,i.return),Us(i);break;case 22:i.memoizedState===null&&Us(i);break;case 30:Us(i);break;default:Us(i)}e=e.sibling}}function Dr(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=e,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:Dr(h,d,a),tl(4,d);break;case 1:if(Dr(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(j){ne(o,o.return,j)}if(o=d,h=o.updateQueue,h!==null){var E=o.stateNode;try{var S=h.shared.hiddenCallbacks;if(S!==null)for(h.shared.hiddenCallbacks=null,h=0;h<S.length;h++)kg(S[h],E)}catch(j){ne(o,o.return,j)}}a&&v&64&&$p(d),el(d,d.return);break;case 27:ty(d);case 26:case 5:Dr(h,d,a),a&&o===null&&v&4&&Jp(d),el(d,d.return);break;case 12:Dr(h,d,a);break;case 13:Dr(h,d,a),a&&v&4&&sy(h,d);break;case 22:d.memoizedState===null&&Dr(h,d,a),el(d,d.return);break;case 30:break;default:Dr(h,d,a)}i=i.sibling}}function Vf(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&zo(a))}function Pf(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&zo(e))}function vi(e,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ly(e,i,a,o),i=i.sibling}function ly(e,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:vi(e,i,a,o),h&2048&&tl(9,i);break;case 1:vi(e,i,a,o);break;case 3:vi(e,i,a,o),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&zo(e)));break;case 12:if(h&2048){vi(e,i,a,o),e=i.stateNode;try{var d=i.memoizedProps,v=d.id,E=d.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){ne(i,i.return,S)}}else vi(e,i,a,o);break;case 13:vi(e,i,a,o);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?vi(e,i,a,o):nl(e,i):d._visibility&2?vi(e,i,a,o):(d._visibility|=2,xa(e,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&Vf(v,i);break;case 24:vi(e,i,a,o),h&2048&&Pf(i.alternate,i);break;default:vi(e,i,a,o)}}function xa(e,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=e,v=i,E=a,S=o,j=v.flags;switch(v.tag){case 0:case 11:case 15:xa(d,v,E,S,h),tl(8,v);break;case 23:break;case 22:var G=v.stateNode;v.memoizedState!==null?G._visibility&2?xa(d,v,E,S,h):nl(d,v):(G._visibility|=2,xa(d,v,E,S,h)),h&&j&2048&&Vf(v.alternate,v);break;case 24:xa(d,v,E,S,h),h&&j&2048&&Pf(v.alternate,v);break;default:xa(d,v,E,S,h)}i=i.sibling}}function nl(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,o=i,h=o.flags;switch(o.tag){case 22:nl(a,o),h&2048&&Vf(o.alternate,o);break;case 24:nl(a,o),h&2048&&Pf(o.alternate,o);break;default:nl(a,o)}i=i.sibling}}var il=8192;function Da(e){if(e.subtreeFlags&il)for(e=e.child;e!==null;)uy(e),e=e.sibling}function uy(e){switch(e.tag){case 26:Da(e),e.flags&il&&e.memoizedState!==null&&XA(Zn,e.memoizedState,e.memoizedProps);break;case 5:Da(e);break;case 3:case 4:var i=Zn;Zn=uc(e.stateNode.containerInfo),Da(e),Zn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=il,il=16777216,Da(e),il=i):Da(e));break;default:Da(e)}}function cy(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function rl(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];je=o,fy(o,e)}cy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)hy(e),e=e.sibling}function hy(e){switch(e.tag){case 0:case 11:case 15:rl(e),e.flags&2048&&Nr(9,e,e.return);break;case 3:rl(e);break;case 12:rl(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Zu(e)):rl(e);break;default:rl(e)}}function Zu(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];je=o,fy(o,e)}cy(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Nr(8,i,i.return),Zu(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Zu(i));break;default:Zu(i)}e=e.sibling}}function fy(e,i){for(;je!==null;){var a=je;switch(a.tag){case 0:case 11:case 15:Nr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:zo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,je=o;else t:for(a=e;je!==null;){o=je;var h=o.sibling,d=o.return;if(iy(o),o===a){je=null;break t}if(h!==null){h.return=d,je=h;break t}je=d}}}var hA={getCacheForType:function(e){var i=We(De),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},fA=typeof WeakMap=="function"?WeakMap:Map,Xt=0,ie=null,Mt=null,zt=0,$t=0,wn=null,Or=!1,Oa=!1,kf=!1,nr=0,ge=0,Mr=0,Ls=0,Uf=0,qn=0,Ma=0,sl=null,yn=null,Lf=!1,jf=0,Ju=1/0,Wu=null,Vr=null,Ge=0,Pr=null,Va=null,Pa=0,zf=0,Bf=null,dy=null,al=0,qf=null;function Rn(){if((Xt&2)!==0&&zt!==0)return zt&-zt;if(q.T!==null){var e=Aa;return e!==0?e:Xf()}return Kn()}function my(){qn===0&&(qn=(zt&536870912)===0||Qt?Q():536870912);var e=Bn.current;return e!==null&&(e.flags|=32),qn}function In(e,i,a){(e===ie&&($t===2||$t===9)||e.cancelPendingCommit!==null)&&(ka(e,0),kr(e,zt,qn,!1)),fe(e,a),((Xt&2)===0||e!==ie)&&(e===ie&&((Xt&2)===0&&(Ls|=a),ge===4&&kr(e,zt,qn,!1)),Ei(e))}function gy(e,i,a){if((Xt&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&e.expiredLanes)===0||Mi(e,i),h=o?gA(e,i):Gf(e,i,!0),d=o;do{if(h===0){Oa&&!o&&kr(e,i,0,!1);break}else{if(a=e.current.alternate,d&&!dA(a)){h=Gf(e,i,!1),d=!1;continue}if(h===2){if(d=i,e.errorRecoveryDisabledLanes&d)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var E=e;h=sl;var S=E.current.memoizedState.isDehydrated;if(S&&(ka(E,v).flags|=256),v=Gf(E,v,!1),v!==2){if(kf&&!S){E.errorRecoveryDisabledLanes|=d,Ls|=d,h=4;break t}d=yn,yn=h,d!==null&&(yn===null?yn=d:yn.push.apply(yn,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){ka(e,0),kr(e,i,0,!0);break}t:{switch(o=e,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:kr(o,i,qn,!Or);break t;case 2:yn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=jf+300-Re(),10<h)){if(kr(o,i,qn,!Or),pr(o,0,!0)!==0)break t;o.timeoutHandle=Fy(py.bind(null,o,a,yn,Wu,Lf,i,qn,Ls,Ma,Or,d,2,-0,0),h);break t}py(o,a,yn,Wu,Lf,i,qn,Ls,Ma,Or,d,0,-0,0)}}break}while(!0);Ei(e)}function py(e,i,a,o,h,d,v,E,S,j,G,X,z,B){if(e.timeoutHandle=-1,X=i.subtreeFlags,(X&8192||(X&16785408)===16785408)&&(dl={stylesheets:null,count:0,unsuspend:YA},uy(i),X=$A(),X!==null)){e.cancelPendingCommit=X(by.bind(null,e,i,d,a,o,h,v,E,S,G,1,z,B)),kr(e,d,v,!j);return}by(e,i,d,a,o,h,v,E,S)}function dA(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!Tn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function kr(e,i,a,o){i&=~Uf,i&=~Ls,e.suspendedLanes|=i,e.pingedLanes&=~i,o&&(e.warmLanes|=i),o=e.expirationTimes;for(var h=i;0<h;){var d=31-Pe(h),v=1<<d;o[d]=-1,h&=~v}a!==0&&Ie(e,a,i)}function tc(){return(Xt&6)===0?(ol(0),!1):!0}function Hf(){if(Mt!==null){if($t===0)var e=Mt.return;else e=Mt,Yi=Os=null,af(e),Ca=null,Zo=0,e=Mt;for(;e!==null;)Xp(e.alternate,e),e=e.return;Mt=null}}function ka(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,DA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Hf(),ie=e,Mt=a=Gi(e.current,null),zt=i,$t=0,wn=null,Or=!1,Oa=Mi(e,i),kf=!1,Ma=qn=Uf=Ls=Mr=ge=0,yn=sl=null,Lf=!1,(i&8)!==0&&(i|=i&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=i;0<o;){var h=31-Pe(o),d=1<<h;i|=e[h],o&=~d}return nr=i,Au(),a}function yy(e,i){Nt=null,q.H=Bu,i===qo||i===Du?(i=Vg(),$t=3):i===Dg?(i=Vg(),$t=4):$t=i===Pp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,wn=i,Mt===null&&(ge=1,Qu(e,Un(i,e.current)))}function _y(){var e=q.H;return q.H=Bu,e===null?Bu:e}function vy(){var e=q.A;return q.A=hA,e}function Ff(){ge=4,Or||(zt&4194048)!==zt&&Bn.current!==null||(Oa=!0),(Mr&134217727)===0&&(Ls&134217727)===0||ie===null||kr(ie,zt,qn,!1)}function Gf(e,i,a){var o=Xt;Xt|=2;var h=_y(),d=vy();(ie!==e||zt!==i)&&(Wu=null,ka(e,i)),i=!1;var v=ge;t:do try{if($t!==0&&Mt!==null){var E=Mt,S=wn;switch($t){case 8:Hf(),v=6;break t;case 3:case 2:case 9:case 6:Bn.current===null&&(i=!0);var j=$t;if($t=0,wn=null,Ua(e,E,S,j),a&&Oa){v=0;break t}break;default:j=$t,$t=0,wn=null,Ua(e,E,S,j)}}mA(),v=ge;break}catch(G){yy(e,G)}while(!0);return i&&e.shellSuspendCounter++,Yi=Os=null,Xt=o,q.H=h,q.A=d,Mt===null&&(ie=null,zt=0,Au()),v}function mA(){for(;Mt!==null;)Ey(Mt)}function gA(e,i){var a=Xt;Xt|=2;var o=_y(),h=vy();ie!==e||zt!==i?(Wu=null,Ju=Re()+500,ka(e,i)):Oa=Mi(e,i);t:do try{if($t!==0&&Mt!==null){i=Mt;var d=wn;e:switch($t){case 1:$t=0,wn=null,Ua(e,i,d,1);break;case 2:case 9:if(Og(d)){$t=0,wn=null,Ty(i);break}i=function(){$t!==2&&$t!==9||ie!==e||($t=7),Ei(e)},d.then(i,i);break t;case 3:$t=7;break t;case 4:$t=5;break t;case 7:Og(d)?($t=0,wn=null,Ty(i)):($t=0,wn=null,Ua(e,i,d,7));break;case 5:var v=null;switch(Mt.tag){case 26:v=Mt.memoizedState;case 5:case 27:var E=Mt;if(!v||n_(v)){$t=0,wn=null;var S=E.sibling;if(S!==null)Mt=S;else{var j=E.return;j!==null?(Mt=j,ec(j)):Mt=null}break e}}$t=0,wn=null,Ua(e,i,d,5);break;case 6:$t=0,wn=null,Ua(e,i,d,6);break;case 8:Hf(),ge=6;break t;default:throw Error(s(462))}}pA();break}catch(G){yy(e,G)}while(!0);return Yi=Os=null,q.H=o,q.A=h,Xt=a,Mt!==null?0:(ie=null,zt=0,Au(),ge)}function pA(){for(;Mt!==null&&!Ni();)Ey(Mt)}function Ey(e){var i=Kp(e.alternate,e,nr);e.memoizedProps=e.pendingProps,i===null?ec(e):Mt=i}function Ty(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=Bp(a,i,i.pendingProps,i.type,void 0,zt);break;case 11:i=Bp(a,i,i.pendingProps,i.type.render,i.ref,zt);break;case 5:af(i);default:Xp(a,i),i=Mt=Ag(i,nr),i=Kp(a,i,nr)}e.memoizedProps=e.pendingProps,i===null?ec(e):Mt=i}function Ua(e,i,a,o){Yi=Os=null,af(i),Ca=null,Zo=0;var h=i.return;try{if(sA(e,h,i,a,zt)){ge=1,Qu(e,Un(a,e.current)),Mt=null;return}}catch(d){if(h!==null)throw Mt=h,d;ge=1,Qu(e,Un(a,e.current)),Mt=null;return}i.flags&32768?(Qt||o===1?e=!0:Oa||(zt&536870912)!==0?e=!1:(Or=e=!0,(o===2||o===9||o===3||o===6)&&(o=Bn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Ay(i,e)):ec(i)}function ec(e){var i=e;do{if((i.flags&32768)!==0){Ay(i,Or);return}e=i.return;var a=oA(i.alternate,i,nr);if(a!==null){Mt=a;return}if(i=i.sibling,i!==null){Mt=i;return}Mt=i=e}while(i!==null);ge===0&&(ge=5)}function Ay(e,i){do{var a=lA(e.alternate,e);if(a!==null){a.flags&=32767,Mt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Mt=e;return}Mt=e=a}while(e!==null);ge=6,Mt=null}function by(e,i,a,o,h,d,v,E,S){e.cancelPendingCommit=null;do nc();while(Ge!==0);if((Xt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Vh,de(e,a,d,v,E,S),e===ie&&(Mt=ie=null,zt=0),Va=i,Pr=e,Pa=a,zf=d,Bf=h,dy=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,EA(an,function(){return Cy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=q.T,q.T=null,h=rt.p,rt.p=2,v=Xt,Xt|=4;try{uA(e,i,a)}finally{Xt=v,rt.p=h,q.T=o}}Ge=1,Sy(),wy(),Ry()}}function Sy(){if(Ge===1){Ge=0;var e=Pr,i=Va,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=q.T,q.T=null;var o=rt.p;rt.p=2;var h=Xt;Xt|=4;try{ay(i,e);var d=id,v=fg(e.containerInfo),E=d.focusedElem,S=d.selectionRange;if(v!==E&&E&&E.ownerDocument&&hg(E.ownerDocument.documentElement,E)){if(S!==null&&Nh(E)){var j=S.start,G=S.end;if(G===void 0&&(G=j),"selectionStart"in E)E.selectionStart=j,E.selectionEnd=Math.min(G,E.value.length);else{var X=E.ownerDocument||document,z=X&&X.defaultView||window;if(z.getSelection){var B=z.getSelection(),St=E.textContent.length,gt=Math.min(S.start,St),ee=S.end===void 0?gt:Math.min(S.end,St);!B.extend&&gt>ee&&(v=ee,ee=gt,gt=v);var P=cg(E,gt),D=cg(E,ee);if(P&&D&&(B.rangeCount!==1||B.anchorNode!==P.node||B.anchorOffset!==P.offset||B.focusNode!==D.node||B.focusOffset!==D.offset)){var L=X.createRange();L.setStart(P.node,P.offset),B.removeAllRanges(),gt>ee?(B.addRange(L),B.extend(D.node,D.offset)):(L.setEnd(D.node,D.offset),B.addRange(L))}}}}for(X=[],B=E;B=B.parentNode;)B.nodeType===1&&X.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<X.length;E++){var K=X[E];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}mc=!!nd,id=nd=null}finally{Xt=h,rt.p=o,q.T=a}}e.current=i,Ge=2}}function wy(){if(Ge===2){Ge=0;var e=Pr,i=Va,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=q.T,q.T=null;var o=rt.p;rt.p=2;var h=Xt;Xt|=4;try{ny(e,i.alternate,i)}finally{Xt=h,rt.p=o,q.T=a}}Ge=3}}function Ry(){if(Ge===4||Ge===3){Ge=0,ii();var e=Pr,i=Va,a=Pa,o=dy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ge=5:(Ge=0,Va=Pr=null,Iy(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Vr=null),Vi(a),i=i.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(ae,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=q.T,h=rt.p,rt.p=2,q.T=null;try{for(var d=e.onRecoverableError,v=0;v<o.length;v++){var E=o[v];d(E.value,{componentStack:E.stack})}}finally{q.T=i,rt.p=h}}(Pa&3)!==0&&nc(),Ei(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===qf?al++:(al=0,qf=e):al=0,ol(0)}}function Iy(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,zo(i)))}function nc(e){return Sy(),wy(),Ry(),Cy()}function Cy(){if(Ge!==5)return!1;var e=Pr,i=zf;zf=0;var a=Vi(Pa),o=q.T,h=rt.p;try{rt.p=32>a?32:a,q.T=null,a=Bf,Bf=null;var d=Pr,v=Pa;if(Ge=0,Va=Pr=null,Pa=0,(Xt&6)!==0)throw Error(s(331));var E=Xt;if(Xt|=4,hy(d.current),ly(d,d.current,v,a),Xt=E,ol(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(ae,d)}catch{}return!0}finally{rt.p=h,q.T=o,Iy(e,i)}}function Ny(e,i,a){i=Un(a,i),i=Ef(e.stateNode,i,2),e=wr(e,i,2),e!==null&&(fe(e,2),Ei(e))}function ne(e,i,a){if(e.tag===3)Ny(e,e,a);else for(;i!==null;){if(i.tag===3){Ny(i,e,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Vr===null||!Vr.has(o))){e=Un(a,e),a=Mp(2),o=wr(i,a,2),o!==null&&(Vp(a,o,i,e),fe(o,2),Ei(o));break}}i=i.return}}function Qf(e,i,a){var o=e.pingCache;if(o===null){o=e.pingCache=new fA;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(kf=!0,h.add(a),e=yA.bind(null,e,i,a),i.then(e,e))}function yA(e,i,a){var o=e.pingCache;o!==null&&o.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ie===e&&(zt&a)===a&&(ge===4||ge===3&&(zt&62914560)===zt&&300>Re()-jf?(Xt&2)===0&&ka(e,0):Uf|=a,Ma===zt&&(Ma=0)),Ei(e)}function xy(e,i){i===0&&(i=vt()),e=_a(e,i),e!==null&&(fe(e,i),Ei(e))}function _A(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),xy(e,a)}function vA(e,i){var a=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),xy(e,a)}function EA(e,i){return Ii(e,i)}var ic=null,La=null,Kf=!1,rc=!1,Yf=!1,js=0;function Ei(e){e!==La&&e.next===null&&(La===null?ic=La=e:La=La.next=e),rc=!0,Kf||(Kf=!0,AA())}function ol(e,i){if(!Yf&&rc){Yf=!0;do for(var a=!1,o=ic;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var v=o.suspendedLanes,E=o.pingedLanes;d=(1<<31-Pe(42|e)+1)-1,d&=h&~(v&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Vy(o,d))}else d=zt,d=pr(o,o===ie?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||Mi(o,d)||(a=!0,Vy(o,d));o=o.next}while(a);Yf=!1}}function TA(){Dy()}function Dy(){rc=Kf=!1;var e=0;js!==0&&(xA()&&(e=js),js=0);for(var i=Re(),a=null,o=ic;o!==null;){var h=o.next,d=Oy(o,i);d===0?(o.next=null,a===null?ic=h:a.next=h,h===null&&(La=a)):(a=o,(e!==0||(d&3)!==0)&&(rc=!0)),o=h}ol(e)}function Oy(e,i){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var v=31-Pe(d),E=1<<v,S=h[v];S===-1?((E&a)===0||(E&o)!==0)&&(h[v]=cs(E,i)):S<=i&&(e.expiredLanes|=E),d&=~E}if(i=ie,a=zt,a=pr(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===i&&($t===2||$t===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Ci(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Mi(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(o!==null&&Ci(o),Vi(a)){case 2:case 8:a=Ze;break;case 32:a=an;break;case 268435456:a=gr;break;default:a=an}return o=My.bind(null,e),a=Ii(a,o),e.callbackPriority=i,e.callbackNode=a,i}return o!==null&&o!==null&&Ci(o),e.callbackPriority=2,e.callbackNode=null,2}function My(e,i){if(Ge!==0&&Ge!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(nc()&&e.callbackNode!==a)return null;var o=zt;return o=pr(e,e===ie?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(gy(e,o,i),Oy(e,Re()),e.callbackNode!=null&&e.callbackNode===a?My.bind(null,e):null)}function Vy(e,i){if(nc())return null;gy(e,i,!0)}function AA(){OA(function(){(Xt&6)!==0?Ii(ri,TA):Dy()})}function Xf(){return js===0&&(js=Q()),js}function Py(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:aa(""+e)}function ky(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function bA(e,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var d=Py((h[Ee]||null).action),v=o.submitter;v&&(i=(i=v[Ee]||null)?Py(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var E=new oa("action","action",null,o,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(js!==0){var S=v?ky(h,v):new FormData(h);gf(a,{pending:!0,data:S,method:h.method,action:d},null,S)}}else typeof d=="function"&&(E.preventDefault(),S=v?ky(h,v):new FormData(h),gf(a,{pending:!0,data:S,method:h.method,action:d},d,S))},currentTarget:h}]})}}for(var $f=0;$f<Mh.length;$f++){var Zf=Mh[$f],SA=Zf.toLowerCase(),wA=Zf[0].toUpperCase()+Zf.slice(1);$n(SA,"on"+wA)}$n(gg,"onAnimationEnd"),$n(pg,"onAnimationIteration"),$n(yg,"onAnimationStart"),$n("dblclick","onDoubleClick"),$n("focusin","onFocus"),$n("focusout","onBlur"),$n(qT,"onTransitionRun"),$n(HT,"onTransitionStart"),$n(FT,"onTransitionCancel"),$n(_g,"onTransitionEnd"),ki("onMouseEnter",["mouseout","mouseover"]),ki("onMouseLeave",["mouseout","mouseover"]),ki("onPointerEnter",["pointerout","pointerover"]),ki("onPointerLeave",["pointerout","pointerover"]),Yn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ll));function Uy(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var d=void 0;if(i)for(var v=o.length-1;0<=v;v--){var E=o[v],S=E.instance,j=E.currentTarget;if(E=E.listener,S!==d&&h.isPropagationStopped())break t;d=E,h.currentTarget=j;try{d(h)}catch(G){Gu(G)}h.currentTarget=null,d=S}else for(v=0;v<o.length;v++){if(E=o[v],S=E.instance,j=E.currentTarget,E=E.listener,S!==d&&h.isPropagationStopped())break t;d=E,h.currentTarget=j;try{d(h)}catch(G){Gu(G)}h.currentTarget=null,d=S}}}}function Vt(e,i){var a=i[vo];a===void 0&&(a=i[vo]=new Set);var o=e+"__bubble";a.has(o)||(Ly(i,e,2,!1),a.add(o))}function Jf(e,i,a){var o=0;i&&(o|=4),Ly(a,e,o,i)}var sc="_reactListening"+Math.random().toString(36).slice(2);function Wf(e){if(!e[sc]){e[sc]=!0,Eo.forEach(function(a){a!=="selectionchange"&&(RA.has(a)||Jf(a,!1,e),Jf(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[sc]||(i[sc]=!0,Jf("selectionchange",!1,i))}}function Ly(e,i,a,o){switch(l_(i)){case 2:var h=WA;break;case 8:h=tb;break;default:h=dd}a=h.bind(null,i,a,e),h=void 0,!Pn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function td(e,i,a,o,h){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=o.return;v!==null;){var S=v.tag;if((S===3||S===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=Pi(E),v===null)return;if(S=v.tag,S===5||S===6||S===26||S===27){o=d=v;continue t}E=E.parentNode}}o=o.return}ou(function(){var j=d,G=Vn(a),X=[];t:{var z=vg.get(e);if(z!==void 0){var B=oa,St=e;switch(e){case"keypress":if(hi(a)===0)break t;case"keydown":case"keyup":B=da;break;case"focusin":St="focus",B=ca;break;case"focusout":St="blur",B=ca;break;case"beforeblur":case"afterblur":B=ca;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=kn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=wh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=gu;break;case gg:case pg:case yg:B=ha;break;case _g:B=yu;break;case"scroll":case"scrollend":B=lu;break;case"wheel":B=ma;break;case"copy":case"cut":case"paste":B=fa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Oo;break;case"toggle":case"beforetoggle":B=vu}var gt=(i&4)!==0,ee=!gt&&(e==="scroll"||e==="scrollend"),P=gt?z!==null?z+"Capture":null:z;gt=[];for(var D=j,L;D!==null;){var K=D;if(L=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||L===null||P===null||(K=_s(D,P),K!=null&&gt.push(ul(D,K,L))),ee)break;D=D.return}0<gt.length&&(z=new B(z,St,null,a,G),X.push({event:z,listeners:gt}))}}if((i&7)===0){t:{if(z=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",z&&a!==ji&&(St=a.relatedTarget||a.fromElement)&&(Pi(St)||St[On]))break t;if((B||z)&&(z=G.window===G?G:(z=G.ownerDocument)?z.defaultView||z.parentWindow:window,B?(St=a.relatedTarget||a.toElement,B=j,St=St?Pi(St):null,St!==null&&(ee=c(St),gt=St.tag,St!==ee||gt!==5&&gt!==27&&gt!==6)&&(St=null)):(B=null,St=j),B!==St)){if(gt=kn,K="onMouseLeave",P="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(gt=Oo,K="onPointerLeave",P="onPointerEnter",D="pointer"),ee=B==null?z:oi(B),L=St==null?z:oi(St),z=new gt(K,D+"leave",B,a,G),z.target=ee,z.relatedTarget=L,K=null,Pi(G)===j&&(gt=new gt(P,D+"enter",St,a,G),gt.target=L,gt.relatedTarget=ee,K=gt),ee=K,B&&St)e:{for(gt=B,P=St,D=0,L=gt;L;L=ja(L))D++;for(L=0,K=P;K;K=ja(K))L++;for(;0<D-L;)gt=ja(gt),D--;for(;0<L-D;)P=ja(P),L--;for(;D--;){if(gt===P||P!==null&&gt===P.alternate)break e;gt=ja(gt),P=ja(P)}gt=null}else gt=null;B!==null&&jy(X,z,B,gt,!1),St!==null&&ee!==null&&jy(X,ee,St,gt,!0)}}t:{if(z=j?oi(j):window,B=z.nodeName&&z.nodeName.toLowerCase(),B==="select"||B==="input"&&z.type==="file")var ot=rg;else if(xe(z))if(sg)ot=jT;else{ot=UT;var Dt=kT}else B=z.nodeName,!B||B.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?j&&wo(j.elementType)&&(ot=rg):ot=LT;if(ot&&(ot=ot(e,j))){Fi(X,ot,a,G);break t}Dt&&Dt(e,z,j),e==="focusout"&&j&&z.type==="number"&&j.memoizedProps.value!=null&&Er(z,"number",z.value)}switch(Dt=j?oi(j):window,e){case"focusin":(xe(Dt)||Dt.contentEditable==="true")&&(ga=Dt,xh=j,Po=null);break;case"focusout":Po=xh=ga=null;break;case"mousedown":Dh=!0;break;case"contextmenu":case"mouseup":case"dragend":Dh=!1,dg(X,a,G);break;case"selectionchange":if(BT)break;case"keydown":case"keyup":dg(X,a,G)}var ft;if(mi)t:{switch(e){case"compositionstart":var pt="onCompositionStart";break t;case"compositionend":pt="onCompositionEnd";break t;case"compositionupdate":pt="onCompositionUpdate";break t}pt=void 0}else Lt?H(e,a)&&(pt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(pt="onCompositionStart");pt&&(y&&a.locale!=="ko"&&(Lt||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&Lt&&(ft=Io()):(ci=G,Tr="value"in ci?ci.value:ci.textContent,Lt=!0)),Dt=ac(j,pt),0<Dt.length&&(pt=new xo(pt,e,null,a,G),X.push({event:pt,listeners:Dt}),ft?pt.data=ft:(ft=et(a),ft!==null&&(pt.data=ft)))),(ft=m?Ne(e,a):jt(e,a))&&(pt=ac(j,"onBeforeInput"),0<pt.length&&(Dt=new xo("onBeforeInput","beforeinput",null,a,G),X.push({event:Dt,listeners:pt}),Dt.data=ft)),bA(X,e,j,a,G)}Uy(X,i)})}function ul(e,i,a){return{instance:e,listener:i,currentTarget:a}}function ac(e,i){for(var a=i+"Capture",o=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=_s(e,a),h!=null&&o.unshift(ul(e,h,d)),h=_s(e,i),h!=null&&o.push(ul(e,h,d))),e.tag===3)return o;e=e.return}return[]}function ja(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function jy(e,i,a,o,h){for(var d=i._reactName,v=[];a!==null&&a!==o;){var E=a,S=E.alternate,j=E.stateNode;if(E=E.tag,S!==null&&S===o)break;E!==5&&E!==26&&E!==27||j===null||(S=j,h?(j=_s(a,d),j!=null&&v.unshift(ul(a,j,S))):h||(j=_s(a,d),j!=null&&v.push(ul(a,j,S)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var IA=/\r\n?/g,CA=/\u0000|\uFFFD/g;function zy(e){return(typeof e=="string"?e:""+e).replace(IA,`
`).replace(CA,"")}function By(e,i){return i=zy(i),zy(e)===i}function oc(){}function te(e,i,a,o,h,d){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||Mn(e,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&Mn(e,""+o);break;case"className":li(e,"class",o);break;case"tabIndex":li(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":li(e,a,o);break;case"style":So(e,o,d);break;case"data":if(i!=="object"){li(e,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=aa(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&te(e,i,"name",h.name,h,null),te(e,i,"formEncType",h.formEncType,h,null),te(e,i,"formMethod",h.formMethod,h,null),te(e,i,"formTarget",h.formTarget,h,null)):(te(e,i,"encType",h.encType,h,null),te(e,i,"method",h.method,h,null),te(e,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=aa(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=oc);break;case"onScroll":o!=null&&Vt("scroll",e);break;case"onScrollEnd":o!=null&&Vt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=aa(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Vt("beforetoggle",e),Vt("toggle",e),vr(e,"popover",o);break;case"xlinkActuate":qe(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":qe(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":qe(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":qe(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":qe(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":qe(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":qe(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":qe(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":qe(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":vr(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=bh.get(a)||a,vr(e,a,o))}}function ed(e,i,a,o,h,d){switch(a){case"style":So(e,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?Mn(e,o):(typeof o=="number"||typeof o=="bigint")&&Mn(e,""+o);break;case"onScroll":o!=null&&Vt("scroll",e);break;case"onScrollEnd":o!=null&&Vt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=oc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ea.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=e[Ee]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(i,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):vr(e,a,o)}}}function Qe(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vt("error",e),Vt("load",e);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:te(e,i,d,v,a,null)}}h&&te(e,i,"srcSet",a.srcSet,a,null),o&&te(e,i,"src",a.src,a,null);return;case"input":Vt("invalid",e);var E=d=v=h=null,S=null,j=null;for(o in a)if(a.hasOwnProperty(o)){var G=a[o];if(G!=null)switch(o){case"name":h=G;break;case"type":v=G;break;case"checked":S=G;break;case"defaultChecked":j=G;break;case"value":d=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:te(e,i,o,G,a,null)}}gs(e,d,E,S,j,v,h,!1),sa(e);return;case"select":Vt("invalid",e),o=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":d=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:te(e,i,h,E,a,null)}i=d,a=v,e.multiple=!!o,i!=null?Li(e,!!o,i,!1):a!=null&&Li(e,!!o,a,!0);return;case"textarea":Vt("invalid",e),d=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":h=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:te(e,i,v,E,a,null)}ps(e,o,h,d),sa(e);return;case"option":for(S in a)if(a.hasOwnProperty(S)&&(o=a[S],o!=null))switch(S){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:te(e,i,S,o,a,null)}return;case"dialog":Vt("beforetoggle",e),Vt("toggle",e),Vt("cancel",e),Vt("close",e);break;case"iframe":case"object":Vt("load",e);break;case"video":case"audio":for(o=0;o<ll.length;o++)Vt(ll[o],e);break;case"image":Vt("error",e),Vt("load",e);break;case"details":Vt("toggle",e);break;case"embed":case"source":case"link":Vt("error",e),Vt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(o=a[j],o!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:te(e,i,j,o,a,null)}return;default:if(wo(i)){for(G in a)a.hasOwnProperty(G)&&(o=a[G],o!==void 0&&ed(e,i,G,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&te(e,i,E,o,a,null))}function NA(e,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,E=null,S=null,j=null,G=null;for(B in a){var X=a[B];if(a.hasOwnProperty(B)&&X!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":S=X;default:o.hasOwnProperty(B)||te(e,i,B,null,o,X)}}for(var z in o){var B=o[z];if(X=a[z],o.hasOwnProperty(z)&&(B!=null||X!=null))switch(z){case"type":d=B;break;case"name":h=B;break;case"checked":j=B;break;case"defaultChecked":G=B;break;case"value":v=B;break;case"defaultValue":E=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,i));break;default:B!==X&&te(e,i,z,B,o,X)}}En(e,v,E,S,j,G,d,h);return;case"select":B=v=E=z=null;for(d in a)if(S=a[d],a.hasOwnProperty(d)&&S!=null)switch(d){case"value":break;case"multiple":B=S;default:o.hasOwnProperty(d)||te(e,i,d,null,o,S)}for(h in o)if(d=o[h],S=a[h],o.hasOwnProperty(h)&&(d!=null||S!=null))switch(h){case"value":z=d;break;case"defaultValue":E=d;break;case"multiple":v=d;default:d!==S&&te(e,i,h,d,o,S)}i=E,a=v,o=B,z!=null?Li(e,!!a,z,!1):!!o!=!!a&&(i!=null?Li(e,!!a,i,!0):Li(e,!!a,a?[]:"",!1));return;case"textarea":B=z=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:te(e,i,E,null,o,h)}for(v in o)if(h=o[v],d=a[v],o.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":z=h;break;case"defaultValue":B=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&te(e,i,v,h,o,d)}Jt(e,z,B);return;case"option":for(var St in a)if(z=a[St],a.hasOwnProperty(St)&&z!=null&&!o.hasOwnProperty(St))switch(St){case"selected":e.selected=!1;break;default:te(e,i,St,null,o,z)}for(S in o)if(z=o[S],B=a[S],o.hasOwnProperty(S)&&z!==B&&(z!=null||B!=null))switch(S){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:te(e,i,S,z,o,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gt in a)z=a[gt],a.hasOwnProperty(gt)&&z!=null&&!o.hasOwnProperty(gt)&&te(e,i,gt,null,o,z);for(j in o)if(z=o[j],B=a[j],o.hasOwnProperty(j)&&z!==B&&(z!=null||B!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,i));break;default:te(e,i,j,z,o,B)}return;default:if(wo(i)){for(var ee in a)z=a[ee],a.hasOwnProperty(ee)&&z!==void 0&&!o.hasOwnProperty(ee)&&ed(e,i,ee,void 0,o,z);for(G in o)z=o[G],B=a[G],!o.hasOwnProperty(G)||z===B||z===void 0&&B===void 0||ed(e,i,G,z,o,B);return}}for(var P in a)z=a[P],a.hasOwnProperty(P)&&z!=null&&!o.hasOwnProperty(P)&&te(e,i,P,null,o,z);for(X in o)z=o[X],B=a[X],!o.hasOwnProperty(X)||z===B||z==null&&B==null||te(e,i,X,z,o,B)}var nd=null,id=null;function lc(e){return e.nodeType===9?e:e.ownerDocument}function qy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hy(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function rd(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var sd=null;function xA(){var e=window.event;return e&&e.type==="popstate"?e===sd?!1:(sd=e,!0):(sd=null,!1)}var Fy=typeof setTimeout=="function"?setTimeout:void 0,DA=typeof clearTimeout=="function"?clearTimeout:void 0,Gy=typeof Promise=="function"?Promise:void 0,OA=typeof queueMicrotask=="function"?queueMicrotask:typeof Gy<"u"?function(e){return Gy.resolve(null).then(e).catch(MA)}:Fy;function MA(e){setTimeout(function(){throw e})}function Ur(e){return e==="head"}function Qy(e,i){var a=i,o=0,h=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<o&&8>o){a=o;var v=e.ownerDocument;if(a&1&&cl(v.documentElement),a&2&&cl(v.body),a&4)for(a=v.head,cl(a),v=a.firstChild;v;){var E=v.nextSibling,S=v.nodeName;v[hs]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(h===0){e.removeChild(d),_l(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=d}while(a);_l(i)}function ad(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ad(a),_r(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function VA(e,i,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[hs])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Jn(e.nextSibling),e===null)break}return null}function PA(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Jn(e.nextSibling),e===null))return null;return e}function od(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function kA(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Jn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var ld=null;function Ky(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function Yy(e,i,a){switch(i=lc(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function cl(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);_r(e)}var Hn=new Map,Xy=new Set;function uc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ir=rt.d;rt.d={f:UA,r:LA,D:jA,C:zA,L:BA,m:qA,X:FA,S:HA,M:GA};function UA(){var e=ir.f(),i=tc();return e||i}function LA(e){var i=ai(e);i!==null&&i.tag===5&&i.type==="form"?gp(i):ir.r(e)}var za=typeof document>"u"?null:document;function $y(e,i,a){var o=za;if(o&&typeof i=="string"&&i){var h=Te(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Xy.has(h)||(Xy.add(h),e={rel:e,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Qe(i,"link",e),pe(i),o.head.appendChild(i)))}}function jA(e){ir.D(e),$y("dns-prefetch",e,null)}function zA(e,i){ir.C(e,i),$y("preconnect",e,i)}function BA(e,i,a){ir.L(e,i,a);var o=za;if(o&&e&&i){var h='link[rel="preload"][as="'+Te(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Te(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Te(a.imageSizes)+'"]')):h+='[href="'+Te(e)+'"]';var d=h;switch(i){case"style":d=Ba(e);break;case"script":d=qa(e)}Hn.has(d)||(e=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Hn.set(d,e),o.querySelector(h)!==null||i==="style"&&o.querySelector(hl(d))||i==="script"&&o.querySelector(fl(d))||(i=o.createElement("link"),Qe(i,"link",e),pe(i),o.head.appendChild(i)))}}function qA(e,i){ir.m(e,i);var a=za;if(a&&e){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Te(o)+'"][href="'+Te(e)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=qa(e)}if(!Hn.has(d)&&(e=T({rel:"modulepreload",href:e},i),Hn.set(d,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(fl(d)))return}o=a.createElement("link"),Qe(o,"link",e),pe(o),a.head.appendChild(o)}}}function HA(e,i,a){ir.S(e,i,a);var o=za;if(o&&e){var h=on(o).hoistableStyles,d=Ba(e);i=i||"default";var v=h.get(d);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(hl(d)))E.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Hn.get(d))&&ud(e,a);var S=v=o.createElement("link");pe(S),Qe(S,"link",e),S._p=new Promise(function(j,G){S.onload=j,S.onerror=G}),S.addEventListener("load",function(){E.loading|=1}),S.addEventListener("error",function(){E.loading|=2}),E.loading|=4,cc(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(d,v)}}}function FA(e,i){ir.X(e,i);var a=za;if(a&&e){var o=on(a).hoistableScripts,h=qa(e),d=o.get(h);d||(d=a.querySelector(fl(h)),d||(e=T({src:e,async:!0},i),(i=Hn.get(h))&&cd(e,i),d=a.createElement("script"),pe(d),Qe(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function GA(e,i){ir.M(e,i);var a=za;if(a&&e){var o=on(a).hoistableScripts,h=qa(e),d=o.get(h);d||(d=a.querySelector(fl(h)),d||(e=T({src:e,async:!0,type:"module"},i),(i=Hn.get(h))&&cd(e,i),d=a.createElement("script"),pe(d),Qe(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function Zy(e,i,a,o){var h=(h=bt.current)?uc(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ba(a.href),a=on(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ba(a.href);var d=on(h).hoistableStyles,v=d.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,v),(d=h.querySelector(hl(e)))&&!d._p&&(v.instance=d,v.state.loading=5),Hn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Hn.set(e,a),d||QA(h,e,a,v.state))),i&&o===null)throw Error(s(528,""));return v}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=qa(a),a=on(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Ba(e){return'href="'+Te(e)+'"'}function hl(e){return'link[rel="stylesheet"]['+e+"]"}function Jy(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function QA(e,i,a,o){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=e.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Qe(i,"link",a),pe(i),e.head.appendChild(i))}function qa(e){return'[src="'+Te(e)+'"]'}function fl(e){return"script[async]"+e}function Wy(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=e.querySelector('style[data-href~="'+Te(a.href)+'"]');if(o)return i.instance=o,pe(o),o;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),pe(o),Qe(o,"style",h),cc(o,a.precedence,e),i.instance=o;case"stylesheet":h=Ba(a.href);var d=e.querySelector(hl(h));if(d)return i.state.loading|=4,i.instance=d,pe(d),d;o=Jy(a),(h=Hn.get(h))&&ud(o,h),d=(e.ownerDocument||e).createElement("link"),pe(d);var v=d;return v._p=new Promise(function(E,S){v.onload=E,v.onerror=S}),Qe(d,"link",o),i.state.loading|=4,cc(d,a.precedence,e),i.instance=d;case"script":return d=qa(a.src),(h=e.querySelector(fl(d)))?(i.instance=h,pe(h),h):(o=a,(h=Hn.get(d))&&(o=T({},a),cd(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),pe(h),Qe(h,"link",o),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,cc(o,a.precedence,e));return i.instance}function cc(e,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===i)d=E;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function ud(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function cd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var hc=null;function t_(e,i,a){if(hc===null){var o=new Map,h=hc=new Map;h.set(a,o)}else h=hc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var d=a[h];if(!(d[hs]||d[Ce]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=e+v;var E=o.get(v);E?E.push(d):o.set(v,[d])}}return o}function e_(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function KA(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function n_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var dl=null;function YA(){}function XA(e,i,a){if(dl===null)throw Error(s(475));var o=dl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Ba(a.href),d=e.querySelector(hl(h));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=fc.bind(o),e.then(o,o)),i.state.loading|=4,i.instance=d,pe(d);return}d=e.ownerDocument||e,a=Jy(a),(h=Hn.get(h))&&ud(a,h),d=d.createElement("link"),pe(d);var v=d;v._p=new Promise(function(E,S){v.onload=E,v.onerror=S}),Qe(d,"link",a),i.instance=d}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=fc.bind(o),e.addEventListener("load",i),e.addEventListener("error",i))}}function $A(){if(dl===null)throw Error(s(475));var e=dl;return e.stylesheets&&e.count===0&&hd(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&hd(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function fc(){if(this.count--,this.count===0){if(this.stylesheets)hd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var dc=null;function hd(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,dc=new Map,i.forEach(ZA,e),dc=null,fc.call(e))}function ZA(e,i){if(!(i.state.loading&4)){var a=dc.get(e);if(a)var o=a.get(null);else{a=new Map,dc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||o,d===o&&a.set(null,h),a.set(v,h),this.count++,o=fc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var ml={$$typeof:ct,Provider:null,Consumer:null,_currentValue:ut,_currentValue2:ut,_threadCount:0};function JA(e,i,a,o,h,d,v,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gt(0),this.hiddenUpdates=Gt(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function i_(e,i,a,o,h,d,v,E,S,j,G,X){return e=new JA(e,i,a,v,E,S,j,X),i=1,d===!0&&(i|=24),d=An(3,null,null,i),e.current=d,d.stateNode=e,i=Gh(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:i},Xh(d),e}function r_(e){return e?(e=va,e):va}function s_(e,i,a,o,h,d){h=r_(h),o.context===null?o.context=h:o.pendingContext=h,o=Sr(i),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=wr(e,o,i),a!==null&&(In(a,e,i),Fo(a,e,i))}function a_(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function fd(e,i){a_(e,i),(e=e.alternate)&&a_(e,i)}function o_(e){if(e.tag===13){var i=_a(e,67108864);i!==null&&In(i,e,67108864),fd(e,67108864)}}var mc=!0;function WA(e,i,a,o){var h=q.T;q.T=null;var d=rt.p;try{rt.p=2,dd(e,i,a,o)}finally{rt.p=d,q.T=h}}function tb(e,i,a,o){var h=q.T;q.T=null;var d=rt.p;try{rt.p=8,dd(e,i,a,o)}finally{rt.p=d,q.T=h}}function dd(e,i,a,o){if(mc){var h=md(o);if(h===null)td(e,i,o,gc,a),u_(e,o);else if(nb(h,e,i,a,o))o.stopPropagation();else if(u_(e,o),i&4&&-1<eb.indexOf(e)){for(;h!==null;){var d=ai(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=dn(d.pendingLanes);if(v!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var S=1<<31-Pe(v);E.entanglements[1]|=S,v&=~S}Ei(d),(Xt&6)===0&&(Ju=Re()+500,ol(0))}}break;case 13:E=_a(d,2),E!==null&&In(E,d,2),tc(),fd(d,2)}if(d=md(o),d===null&&td(e,i,o,gc,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else td(e,i,o,null,a)}}function md(e){return e=Vn(e),gd(e)}var gc=null;function gd(e){if(gc=null,e=Pi(e),e!==null){var i=c(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=f(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return gc=e,null}function l_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qn()){case ri:return 2;case Ze:return 8;case an:case ls:return 32;case gr:return 268435456;default:return 32}default:return 32}}var pd=!1,Lr=null,jr=null,zr=null,gl=new Map,pl=new Map,Br=[],eb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function u_(e,i){switch(e){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":jr=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":gl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":pl.delete(i.pointerId)}}function yl(e,i,a,o,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},i!==null&&(i=ai(i),i!==null&&o_(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function nb(e,i,a,o,h){switch(i){case"focusin":return Lr=yl(Lr,e,i,a,o,h),!0;case"dragenter":return jr=yl(jr,e,i,a,o,h),!0;case"mouseover":return zr=yl(zr,e,i,a,o,h),!0;case"pointerover":var d=h.pointerId;return gl.set(d,yl(gl.get(d)||null,e,i,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,pl.set(d,yl(pl.get(d)||null,e,i,a,o,h)),!0}return!1}function c_(e){var i=Pi(e.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){e.blockedOn=i,tu(e.priority,function(){if(a.tag===13){var o=Rn();o=si(o);var h=_a(a,o);h!==null&&In(h,a,o),fd(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=md(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);ji=o,a.target.dispatchEvent(o),ji=null}else return i=ai(a),i!==null&&o_(i),e.blockedOn=a,!1;i.shift()}return!0}function h_(e,i,a){pc(e)&&a.delete(i)}function ib(){pd=!1,Lr!==null&&pc(Lr)&&(Lr=null),jr!==null&&pc(jr)&&(jr=null),zr!==null&&pc(zr)&&(zr=null),gl.forEach(h_),pl.forEach(h_)}function yc(e,i){e.blockedOn===i&&(e.blockedOn=null,pd||(pd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,ib)))}var _c=null;function f_(e){_c!==e&&(_c=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){_c===e&&(_c=null);for(var i=0;i<e.length;i+=3){var a=e[i],o=e[i+1],h=e[i+2];if(typeof o!="function"){if(gd(o||a)===null)continue;break}var d=ai(a);d!==null&&(e.splice(i,3),i-=3,gf(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function _l(e){function i(S){return yc(S,e)}Lr!==null&&yc(Lr,e),jr!==null&&yc(jr,e),zr!==null&&yc(zr,e),gl.forEach(i),pl.forEach(i);for(var a=0;a<Br.length;a++){var o=Br[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Br.length&&(a=Br[0],a.blockedOn===null);)c_(a),a.blockedOn===null&&Br.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],v=h[Ee]||null;if(typeof d=="function")v||f_(a);else if(v){var E=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Ee]||null)E=v.formAction;else if(gd(h)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),f_(a)}}}function yd(e){this._internalRoot=e}vc.prototype.render=yd.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=Rn();s_(a,o,e,i,null,null)},vc.prototype.unmount=yd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;s_(e.current,2,null,e,null,null),tc(),i[On]=null}};function vc(e){this._internalRoot=e}vc.prototype.unstable_scheduleHydration=function(e){if(e){var i=Kn();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Br.length&&i!==0&&i<Br[a].priority;a++);Br.splice(a,0,e),a===0&&c_(e)}};var d_=t.version;if(d_!=="19.1.0")throw Error(s(527,d_,"19.1.0"));rt.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=p(i),e=e!==null?_(e):null,e=e===null?null:e.stateNode,e};var rb={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ec.isDisabled&&Ec.supportsFiber)try{ae=Ec.inject(rb),Ft=Ec}catch{}}return El.createRoot=function(e,i){if(!l(e))throw Error(s(299));var a=!1,o="",h=Np,d=xp,v=Dp,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=i_(e,1,!1,null,null,a,o,h,d,v,E,null),e[On]=i.current,Wf(e),new yd(i)},El.hydrateRoot=function(e,i,a){if(!l(e))throw Error(s(299));var o=!1,h="",d=Np,v=xp,E=Dp,S=null,j=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(S=a.unstable_transitionCallbacks),a.formState!==void 0&&(j=a.formState)),i=i_(e,1,!0,i,a??null,o,h,d,v,E,S,j),i.context=r_(null),a=i.current,o=Rn(),o=si(o),h=Sr(o),h.callback=null,wr(a,h,o),a=o,i.current.lanes=a,fe(i,a),Ei(i),e[On]=i.current,Wf(e),new vc(i)},El.version="19.1.0",El}var b_;function gb(){if(b_)return Ed.exports;b_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Ed.exports=mb(),Ed.exports}var pb=gb();const yb=a0(pb),_b=()=>{};var S_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},vb=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];t[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],f=r[n++],g=r[n++],p=((l&7)<<18|(c&63)<<12|(f&63)<<6|g&63)-65536;t[s++]=String.fromCharCode(55296+(p>>10)),t[s++]=String.fromCharCode(56320+(p&1023))}else{const c=r[n++],f=r[n++];t[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|f&63)}}return t.join("")},l0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],f=l+1<r.length,g=f?r[l+1]:0,p=l+2<r.length,_=p?r[l+2]:0,T=c>>2,w=(c&3)<<4|g>>4;let C=(g&15)<<2|_>>6,F=_&63;p||(F=64,f||(C=64)),s.push(n[T],n[w],n[C],n[F])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(o0(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):vb(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],g=l<r.length?n[r.charAt(l)]:0;++l;const _=l<r.length?n[r.charAt(l)]:64;++l;const w=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||g==null||_==null||w==null)throw new Eb;const C=c<<2|g>>4;if(s.push(C),_!==64){const F=g<<4&240|_>>2;if(s.push(F),w!==64){const J=_<<6&192|w;s.push(J)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Eb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tb=function(r){const t=o0(r);return l0.encodeByteArray(t,!0)},Uc=function(r){return Tb(r).replace(/\./g,"")},u0=function(r){try{return l0.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=()=>Ab().__FIREBASE_DEFAULTS__,Sb=()=>{if(typeof process>"u"||typeof S_>"u")return;const r=S_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},wb=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&u0(r[1]);return t&&JSON.parse(t)},nh=()=>{try{return _b()||bb()||Sb()||wb()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},c0=r=>{var t,n;return(n=(t=nh())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[r]},Rb=r=>{const t=c0(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},h0=()=>{var r;return(r=nh())===null||r===void 0?void 0:r.config},f0=r=>{var t;return(t=nh())===null||t===void 0?void 0:t[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(r){return r.endsWith(".cloudworkstations.dev")}async function d0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Uc(JSON.stringify(n)),Uc(JSON.stringify(f)),""].join(".")}const Cl={};function Nb(){const r={prod:[],emulator:[]};for(const t of Object.keys(Cl))Cl[t]?r.emulator.push(t):r.prod.push(t);return r}function xb(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let w_=!1;function m0(r,t){if(typeof window>"u"||typeof document>"u"||!uo(window.location.host)||Cl[r]===t||Cl[r]||w_)return;Cl[r]=t;function n(C){return`__firebase__banner__${C}`}const s="__firebase__banner",c=Nb().prod.length>0;function f(){const C=document.getElementById(s);C&&C.remove()}function g(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function p(C,F){C.setAttribute("width","24"),C.setAttribute("id",F),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function _(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{w_=!0,f()},C}function T(C,F){C.setAttribute("id",F),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function w(){const C=xb(s),F=n("text"),J=document.getElementById(F)||document.createElement("span"),it=n("learnmore"),tt=document.getElementById(it)||document.createElement("a"),At=n("preprendIcon"),ht=document.getElementById(At)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const ct=C.element;g(ct),T(tt,it);const Ot=_();p(ht,At),ct.append(ht,J,tt,Ot),document.body.appendChild(ct)}c?(J.innerText="Preview backend disconnected.",ht.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ht.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,J.innerText="Preview backend running in this workspace."),J.setAttribute("id",F)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Db(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function Ob(){var r;const t=(r=nh())===null||r===void 0?void 0:r.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Vb(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Pb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kb(){const r=sn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Ub(){return!Ob()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lb(){try{return typeof indexedDB=="object"}catch{return!1}}function jb(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var c;t(((c=l.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="FirebaseError";class dr extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=zb,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hl.prototype.create)}}class Hl{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},l=`${this.service}/${t}`,c=this.errors[t],f=c?Bb(c,s):"Error",g=`${this.serviceName}: ${f} (${l}).`;return new dr(l,g,s)}}function Bb(r,t){return r.replace(qb,(n,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const qb=/\{\$([^}]+)}/g;function Hb(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Fs(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const l of n){if(!s.includes(l))return!1;const c=r[l],f=t[l];if(R_(c)&&R_(f)){if(!Fs(c,f))return!1}else if(c!==f)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function R_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function Al(r){const t={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,c]=s.split("=");t[decodeURIComponent(l)]=decodeURIComponent(c)}}),t}function bl(r){const t=r.indexOf("?");if(!t)return"";const n=r.indexOf("#",t);return r.substring(t,n>0?n:void 0)}function Fb(r,t){const n=new Gb(r,t);return n.subscribe.bind(n)}class Gb{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let l;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Qb(t,["next","error","complete"])?l=t:l={next:t,error:n,complete:s},l.next===void 0&&(l.next=Sd),l.error===void 0&&(l.error=Sd),l.complete===void 0&&(l.complete=Sd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qb(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function Sd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(r){return r&&r._delegate?r._delegate:r}class Gs{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new Ib;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),l=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(l)return null;throw c}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Xb(t))try{this.getOrInitializeService({instanceIdentifier:Bs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(t=Bs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Bs){return this.instances.has(t)}getOptions(t=Bs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);s===g&&f.resolve(l)}return l}onInit(t,n){var s;const l=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(l))!==null&&s!==void 0?s:new Set;c.add(t),this.onInitCallbacks.set(l,c);const f=this.instances.get(l);return f&&t(f,l),()=>{c.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Yb(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Bs){return this.component?this.component.multipleInstances?t:Bs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Yb(r){return r===Bs?void 0:r}function Xb(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Kb(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Pt||(Pt={}));const Zb={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},Jb=Pt.INFO,Wb={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},tS=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=Wb[t];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class um{constructor(t){this.name=t,this._logLevel=Jb,this._logHandler=tS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Zb[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...t),this._logHandler(this,Pt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...t),this._logHandler(this,Pt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...t),this._logHandler(this,Pt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...t),this._logHandler(this,Pt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...t),this._logHandler(this,Pt.ERROR,...t)}}const eS=(r,t)=>t.some(n=>r instanceof n);let I_,C_;function nS(){return I_||(I_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iS(){return C_||(C_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const g0=new WeakMap,Pd=new WeakMap,p0=new WeakMap,wd=new WeakMap,cm=new WeakMap;function rS(r){const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",f)},c=()=>{n(Yr(r.result)),l()},f=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",f)});return t.then(n=>{n instanceof IDBCursor&&g0.set(n,r)}).catch(()=>{}),cm.set(t,r),t}function sS(r){if(Pd.has(r))return;const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",f),r.removeEventListener("abort",f)},c=()=>{n(),l()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",f),r.addEventListener("abort",f)});Pd.set(r,t)}let kd={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return Pd.get(r);if(t==="objectStoreNames")return r.objectStoreNames||p0.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yr(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function aS(r){kd=r(kd)}function oS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(Rd(this),t,...n);return p0.set(s,t.sort?t.sort():[t]),Yr(s)}:iS().includes(r)?function(...t){return r.apply(Rd(this),t),Yr(g0.get(this))}:function(...t){return Yr(r.apply(Rd(this),t))}}function lS(r){return typeof r=="function"?oS(r):(r instanceof IDBTransaction&&sS(r),eS(r,nS())?new Proxy(r,kd):r)}function Yr(r){if(r instanceof IDBRequest)return rS(r);if(wd.has(r))return wd.get(r);const t=lS(r);return t!==r&&(wd.set(r,t),cm.set(t,r)),t}const Rd=r=>cm.get(r);function uS(r,t,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const f=indexedDB.open(r,t),g=Yr(f);return s&&f.addEventListener("upgradeneeded",p=>{s(Yr(f.result),p.oldVersion,p.newVersion,Yr(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),l&&p.addEventListener("versionchange",_=>l(_.oldVersion,_.newVersion,_))}).catch(()=>{}),g}const cS=["get","getKey","getAll","getAllKeys","count"],hS=["put","add","delete","clear"],Id=new Map;function N_(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Id.get(t))return Id.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,l=hS.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||cS.includes(n)))return;const c=async function(f,...g){const p=this.transaction(f,l?"readwrite":"readonly");let _=p.store;return s&&(_=_.index(g.shift())),(await Promise.all([_[n](...g),l&&p.done]))[0]};return Id.set(t,c),c}aS(r=>({...r,get:(t,n,s)=>N_(t,n)||r.get(t,n,s),has:(t,n)=>!!N_(t,n)||r.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dS(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function dS(r){const t=r.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Ud="@firebase/app",x_="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur=new um("@firebase/app"),mS="@firebase/app-compat",gS="@firebase/analytics-compat",pS="@firebase/analytics",yS="@firebase/app-check-compat",_S="@firebase/app-check",vS="@firebase/auth",ES="@firebase/auth-compat",TS="@firebase/database",AS="@firebase/data-connect",bS="@firebase/database-compat",SS="@firebase/functions",wS="@firebase/functions-compat",RS="@firebase/installations",IS="@firebase/installations-compat",CS="@firebase/messaging",NS="@firebase/messaging-compat",xS="@firebase/performance",DS="@firebase/performance-compat",OS="@firebase/remote-config",MS="@firebase/remote-config-compat",VS="@firebase/storage",PS="@firebase/storage-compat",kS="@firebase/firestore",US="@firebase/ai",LS="@firebase/firestore-compat",jS="firebase",zS="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="[DEFAULT]",BS={[Ud]:"fire-core",[mS]:"fire-core-compat",[pS]:"fire-analytics",[gS]:"fire-analytics-compat",[_S]:"fire-app-check",[yS]:"fire-app-check-compat",[vS]:"fire-auth",[ES]:"fire-auth-compat",[TS]:"fire-rtdb",[AS]:"fire-data-connect",[bS]:"fire-rtdb-compat",[SS]:"fire-fn",[wS]:"fire-fn-compat",[RS]:"fire-iid",[IS]:"fire-iid-compat",[CS]:"fire-fcm",[NS]:"fire-fcm-compat",[xS]:"fire-perf",[DS]:"fire-perf-compat",[OS]:"fire-rc",[MS]:"fire-rc-compat",[VS]:"fire-gcs",[PS]:"fire-gcs-compat",[kS]:"fire-fst",[LS]:"fire-fst-compat",[US]:"fire-vertex","fire-js":"fire-js",[jS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=new Map,qS=new Map,jd=new Map;function D_(r,t){try{r.container.addComponent(t)}catch(n){ur.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function Wa(r){const t=r.name;if(jd.has(t))return ur.debug(`There were multiple attempts to register component ${t}.`),!1;jd.set(t,r);for(const n of Lc.values())D_(n,r);for(const n of qS.values())D_(n,r);return!0}function hm(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function Cn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xr=new Hl("app","Firebase",HS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(t,n,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Gs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=zS;function y0(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s=Object.assign({name:Ld,automaticDataCollectionEnabled:!0},t),l=s.name;if(typeof l!="string"||!l)throw Xr.create("bad-app-name",{appName:String(l)});if(n||(n=h0()),!n)throw Xr.create("no-options");const c=Lc.get(l);if(c){if(Fs(n,c.options)&&Fs(s,c.config))return c;throw Xr.create("duplicate-app",{appName:l})}const f=new $b(l);for(const p of jd.values())f.addComponent(p);const g=new FS(n,s,f);return Lc.set(l,g),g}function _0(r=Ld){const t=Lc.get(r);if(!t&&r===Ld&&h0())return y0();if(!t)throw Xr.create("no-app",{appName:r});return t}function $r(r,t,n){var s;let l=(s=BS[r])!==null&&s!==void 0?s:r;n&&(l+=`-${n}`);const c=l.match(/\s|\//),f=t.match(/\s|\//);if(c||f){const g=[`Unable to register library "${l}" with version "${t}":`];c&&g.push(`library name "${l}" contains illegal characters (whitespace or "/")`),c&&f&&g.push("and"),f&&g.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ur.warn(g.join(" "));return}Wa(new Gs(`${l}-version`,()=>({library:l,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="firebase-heartbeat-database",QS=1,Vl="firebase-heartbeat-store";let Cd=null;function v0(){return Cd||(Cd=uS(GS,QS,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Vl)}catch(n){console.warn(n)}}}}).catch(r=>{throw Xr.create("idb-open",{originalErrorMessage:r.message})})),Cd}async function KS(r){try{const n=(await v0()).transaction(Vl),s=await n.objectStore(Vl).get(E0(r));return await n.done,s}catch(t){if(t instanceof dr)ur.warn(t.message);else{const n=Xr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ur.warn(n.message)}}}async function O_(r,t){try{const s=(await v0()).transaction(Vl,"readwrite");await s.objectStore(Vl).put(t,E0(r)),await s.done}catch(n){if(n instanceof dr)ur.warn(n.message);else{const s=Xr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ur.warn(s.message)}}}function E0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=1024,XS=30;class $S{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JS(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=M_();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>XS){const f=WS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ur.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=M_(),{heartbeatsToSend:s,unsentEntries:l}=ZS(this._heartbeatsCache.heartbeats),c=Uc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return ur.warn(n),""}}}function M_(){return new Date().toISOString().substring(0,10)}function ZS(r,t=YS){const n=[];let s=r.slice();for(const l of r){const c=n.find(f=>f.agent===l.agent);if(c){if(c.dates.push(l.date),V_(n)>t){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),V_(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class JS{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lb()?jb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await KS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return O_(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return O_(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...t.heartbeats]})}else return}}function V_(r){return Uc(JSON.stringify({version:2,heartbeats:r})).length}function WS(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(r){Wa(new Gs("platform-logger",t=>new fS(t),"PRIVATE")),Wa(new Gs("heartbeat",t=>new $S(t),"PRIVATE")),$r(Ud,x_,r),$r(Ud,x_,"esm2017"),$r("fire-js","")}t1("");var e1="firebase",n1="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$r(e1,n1,"app");function fm(r,t){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&t.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(r);l<s.length;l++)t.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(r,s[l])&&(n[s[l]]=r[s[l]]);return n}function T0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const i1=T0,A0=new Hl("auth","Firebase",T0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=new um("@firebase/auth");function r1(r,...t){jc.logLevel<=Pt.WARN&&jc.warn(`Auth (${co}): ${r}`,...t)}function Ic(r,...t){jc.logLevel<=Pt.ERROR&&jc.error(`Auth (${co}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(r,...t){throw mm(r,...t)}function ei(r,...t){return mm(r,...t)}function dm(r,t,n){const s=Object.assign(Object.assign({},i1()),{[t]:n});return new Hl("auth","Firebase",s).create(t,{appName:r.name})}function or(r){return dm(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function s1(r,t,n){const s=n;if(!(t instanceof s))throw s.name!==t.constructor.name&&Gn(r,"argument-error"),dm(r,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mm(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return A0.create(r,...t)}function Et(r,t,...n){if(!r)throw mm(t,...n)}function sr(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Ic(t),new Error(t)}function cr(r,t){r||sr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function a1(){return P_()==="http:"||P_()==="https:"}function P_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(a1()||Vb()||"connection"in navigator)?navigator.onLine:!0}function l1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(t,n){this.shortDelay=t,this.longDelay=n,cr(n>t,"Short delay should be less than long delay!"),this.isMobile=Db()||Pb()}get(){return o1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(r,t){cr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],h1=new Gl(3e4,6e4);function as(r,t){return r.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:r.tenantId}):t}async function mr(r,t,n,s,l={}){return S0(r,l,async()=>{let c={},f={};s&&(t==="GET"?f=s:c={body:JSON.stringify(s)});const g=Fl(Object.assign({key:r.config.apiKey},f)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const _=Object.assign({method:t,headers:p},c);return Mb()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&uo(r.emulatorConfig.host)&&(_.credentials="include"),b0.fetch()(await w0(r,r.config.apiHost,n,g),_)})}async function S0(r,t,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},u1),t);try{const l=new d1(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw Tc(r,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const g=c.ok?f.errorMessage:f.error.message,[p,_]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tc(r,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw Tc(r,"email-already-in-use",f);if(p==="USER_DISABLED")throw Tc(r,"user-disabled",f);const T=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw dm(r,T,_);Gn(r,T)}}catch(l){if(l instanceof dr)throw l;Gn(r,"network-request-failed",{message:String(l)})}}async function Ql(r,t,n,s,l={}){const c=await mr(r,t,n,s,l);return"mfaPendingCredential"in c&&Gn(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function w0(r,t,n,s){const l=`${t}${n}?${s}`,c=r,f=c.config.emulator?gm(r.config,l):`${r.config.apiScheme}://${l}`;return c1.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}function f1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class d1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ei(this.auth,"network-request-failed")),h1.get())})}}function Tc(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=ei(r,t,s);return l.customData._tokenResponse=n,l}function k_(r){return r!==void 0&&r.enterprise!==void 0}class m1{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return f1(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function g1(r,t){return mr(r,"GET","/v2/recaptchaConfig",as(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p1(r,t){return mr(r,"POST","/v1/accounts:delete",t)}async function zc(r,t){return mr(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function y1(r,t=!1){const n=Xe(r),s=await n.getIdToken(t),l=pm(s);Et(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,f=c==null?void 0:c.sign_in_provider;return{claims:l,token:s,authTime:Nl(Nd(l.auth_time)),issuedAtTime:Nl(Nd(l.iat)),expirationTime:Nl(Nd(l.exp)),signInProvider:f||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Nd(r){return Number(r)*1e3}function pm(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return Ic("JWT malformed, contained fewer than 3 sections"),null;try{const l=u0(n);return l?JSON.parse(l):(Ic("Failed to decode base64 JWT payload"),null)}catch(l){return Ic("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function U_(r){const t=pm(r);return Et(t,"internal-error"),Et(typeof t.exp<"u","internal-error"),Et(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function to(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof dr&&_1(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function _1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const l=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,l)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nl(this.lastLoginAt),this.creationTime=Nl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bc(r){var t;const n=r.auth,s=await r.getIdToken(),l=await to(r,zc(n,{idToken:s}));Et(l==null?void 0:l.users.length,n,"internal-error");const c=l.users[0];r._notifyReloadListener(c);const f=!((t=c.providerUserInfo)===null||t===void 0)&&t.length?R0(c.providerUserInfo):[],g=T1(r.providerData,f),p=r.isAnonymous,_=!(r.email&&c.passwordHash)&&!(g!=null&&g.length),T=p?_:!1,w={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:g,metadata:new Bd(c.createdAt,c.lastLoginAt),isAnonymous:T};Object.assign(r,w)}async function E1(r){const t=Xe(r);await Bc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function T1(r,t){return[...r.filter(s=>!t.some(l=>l.providerId===s.providerId)),...t]}function R0(r){return r.map(t=>{var{providerId:n}=t,s=fm(t,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A1(r,t){const n=await S0(r,{},async()=>{const s=Fl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,f=await w0(r,l,"/v1/token",`key=${c}`),g=await r._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:s};return r.emulatorConfig&&uo(r.emulatorConfig.host)&&(p.credentials="include"),b0.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function b1(r,t){return mr(r,"POST","/v2/accounts:revokeToken",as(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Et(t.idToken,"internal-error"),Et(typeof t.idToken<"u","internal-error"),Et(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):U_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Et(t.length!==0,"internal-error");const n=U_(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Et(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await A1(t,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,f=new Xa;return s&&(Et(typeof s=="string","internal-error",{appName:t}),f.refreshToken=s),l&&(Et(typeof l=="string","internal-error",{appName:t}),f.accessToken=l),c&&(Et(typeof c=="number","internal-error",{appName:t}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Xa,this.toJSON())}_performRefresh(){return sr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(r,t){Et(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Wn{constructor(t){var{uid:n,auth:s,stsTokenManager:l}=t,c=fm(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new v1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=l,this.accessToken=l.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Bd(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(t){const n=await to(this,this.stsTokenManager.getToken(this.auth,t));return Et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return y1(this,t)}reload(){return E1(this)}_assign(t){this!==t&&(Et(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Wn(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await Bc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cn(this.auth.app))return Promise.reject(or(this.auth));const t=await this.getIdToken();return await to(this,p1(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var s,l,c,f,g,p,_,T;const w=(s=n.displayName)!==null&&s!==void 0?s:void 0,C=(l=n.email)!==null&&l!==void 0?l:void 0,F=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,J=(f=n.photoURL)!==null&&f!==void 0?f:void 0,it=(g=n.tenantId)!==null&&g!==void 0?g:void 0,tt=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,At=(_=n.createdAt)!==null&&_!==void 0?_:void 0,ht=(T=n.lastLoginAt)!==null&&T!==void 0?T:void 0,{uid:ct,emailVerified:Ot,isAnonymous:_t,providerData:Rt,stsTokenManager:M}=n;Et(ct&&M,t,"internal-error");const b=Xa.fromJSON(this.name,M);Et(typeof ct=="string",t,"internal-error"),Hr(w,t.name),Hr(C,t.name),Et(typeof Ot=="boolean",t,"internal-error"),Et(typeof _t=="boolean",t,"internal-error"),Hr(F,t.name),Hr(J,t.name),Hr(it,t.name),Hr(tt,t.name),Hr(At,t.name),Hr(ht,t.name);const R=new Wn({uid:ct,auth:t,email:C,emailVerified:Ot,displayName:w,isAnonymous:_t,photoURL:J,phoneNumber:F,tenantId:it,stsTokenManager:b,createdAt:At,lastLoginAt:ht});return Rt&&Array.isArray(Rt)&&(R.providerData=Rt.map(O=>Object.assign({},O))),tt&&(R._redirectEventId=tt),R}static async _fromIdTokenResponse(t,n,s=!1){const l=new Xa;l.updateFromServerResponse(n);const c=new Wn({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:s});return await Bc(c),c}static async _fromGetAccountInfoResponse(t,n,s){const l=n.users[0];Et(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?R0(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),g=new Xa;g.updateFromIdToken(s);const p=new Wn({uid:l.localId,auth:t,stsTokenManager:g,isAnonymous:f}),_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new Bd(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(p,_),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_=new Map;function ar(r){cr(r instanceof Function,"Expected a class definition");let t=L_.get(r);return t?(cr(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,L_.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}I0.type="NONE";const j_=I0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(r,t,n){return`firebase:${r}:${t}:${n}`}class $a{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=Cc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Cc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await zc(this.auth,{idToken:t}).catch(()=>{});return n?Wn._fromGetAccountInfoResponse(this.auth,n,t):null}return Wn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new $a(ar(j_),t,s);const l=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=l[0]||ar(j_);const f=Cc(s,t.config.apiKey,t.name);let g=null;for(const _ of n)try{const T=await _._get(f);if(T){let w;if(typeof T=="string"){const C=await zc(t,{idToken:T}).catch(()=>{});if(!C)break;w=await Wn._fromGetAccountInfoResponse(t,C,T)}else w=Wn._fromJSON(t,T);_!==c&&(g=w),c=_;break}}catch{}const p=l.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new $a(c,t,s):(c=p[0],g&&await c._set(f,g.toJSON()),await Promise.all(n.map(async _=>{if(_!==c)try{await _._remove(f)}catch{}})),new $a(c,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(D0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(C0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(M0(t))return"Blackberry";if(V0(t))return"Webos";if(N0(t))return"Safari";if((t.includes("chrome/")||x0(t))&&!t.includes("edge/"))return"Chrome";if(O0(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function C0(r=sn()){return/firefox\//i.test(r)}function N0(r=sn()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function x0(r=sn()){return/crios\//i.test(r)}function D0(r=sn()){return/iemobile/i.test(r)}function O0(r=sn()){return/android/i.test(r)}function M0(r=sn()){return/blackberry/i.test(r)}function V0(r=sn()){return/webos/i.test(r)}function ym(r=sn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function S1(r=sn()){var t;return ym(r)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function w1(){return kb()&&document.documentMode===10}function P0(r=sn()){return ym(r)||O0(r)||V0(r)||M0(r)||/windows phone/i.test(r)||D0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(r,t=[]){let n;switch(r){case"Browser":n=z_(sn());break;case"Worker":n=`${z_(sn())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${co}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=c=>new Promise((f,g)=>{try{const p=t(c);f(p)}catch(p){g(p)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I1(r,t={}){return mr(r,"GET","/v2/passwordPolicy",as(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=6;class N1{constructor(t){var n,s,l,c;const f=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:C1,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(l=(s=t.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&l!==void 0?l:"",this.forceUpgradeOnSignin=(c=t.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,s,l,c,f,g;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,p),this.validatePasswordCharacterOptions(t,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(l=p.containsLowercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsUppercaseLetter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(f=p.containsNumericCharacter)!==null&&f!==void 0?f:!0),p.isValid&&(p.isValid=(g=p.containsNonAlphanumericCharacter)!==null&&g!==void 0?g:!0),p}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),l&&(n.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<t.length;l++)s=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(t,n,s,l){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new B_(this),this.idTokenSubscription=new B_(this),this.beforeStateQueue=new R1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=A0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ar(n)),this._initializationPromise=this.queue(async()=>{var s,l,c;if(!this._deleted&&(this.persistenceManager=await $a.create(this,t),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((l=this._popupRedirectResolver)===null||l===void 0)&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await zc(this,{idToken:t}),s=await Wn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Cn(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(g,g))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let l=s,c=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,g=l==null?void 0:l._redirectEventId,p=await this.tryRedirectSignIn(t);(!f||f===g)&&(p!=null&&p.user)&&(l=p.user,c=!0)}if(!l)return this.directlySetCurrentUser(null);if(!l._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(l)}catch(f){l=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return l?this.reloadAndSetCurrentUserOrClear(l):this.directlySetCurrentUser(null)}return Et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===l._redirectEventId?this.directlySetCurrentUser(l):this.reloadAndSetCurrentUserOrClear(l)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Bc(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=l1()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Cn(this.app))return Promise.reject(or(this));const n=t?Xe(t):null;return n&&Et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Et(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Cn(this.app)?Promise.reject(or(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Cn(this.app)?Promise.reject(or(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ar(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await I1(this),n=new N1(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Hl("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await b1(this,s)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&ar(t)||this._popupRedirectResolver;Et(n,this,"argument-error"),this.redirectPersistenceManager=await $a.create(this,[ar(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Et(g,this,"internal-error"),g.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const p=t.addObserver(n,s,l);return()=>{f=!0,p()}}else{const p=t.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=k0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const l=await this._getAppCheckToken();return l&&(n["X-Firebase-AppCheck"]=l),n}async _getAppCheckToken(){var t;if(Cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&r1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function os(r){return Xe(r)}class B_{constructor(t){this.auth=t,this.observer=null,this.addObserver=Fb(n=>this.observer=n)}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ih={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function D1(r){ih=r}function U0(r){return ih.loadJS(r)}function O1(){return ih.recaptchaEnterpriseScript}function M1(){return ih.gapiScript}function V1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class P1{constructor(){this.enterprise=new k1}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class k1{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const U1="recaptcha-enterprise",L0="NO_RECAPTCHA";class L1{constructor(t){this.type=U1,this.auth=os(t)}async verify(t="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(f,g)=>{g1(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const _=new m1(p);return c.tenantId==null?c._agentRecaptchaConfig=_:c._tenantRecaptchaConfigs[c.tenantId]=_,f(_.siteKey)}}).catch(p=>{g(p)})})}function l(c,f,g){const p=window.grecaptcha;k_(p)?p.enterprise.ready(()=>{p.enterprise.execute(c,{action:t}).then(_=>{f(_)}).catch(()=>{f(L0)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new P1().execute("siteKey",{action:"verify"}):new Promise((c,f)=>{s(this.auth).then(g=>{if(!n&&k_(window.grecaptcha))l(g,c,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=O1();p.length!==0&&(p+=g),U0(p).then(()=>{l(g,c,f)}).catch(_=>{f(_)})}}).catch(g=>{f(g)})})}}async function q_(r,t,n,s=!1,l=!1){const c=new L1(r);let f;if(l)f=L0;else try{f=await c.verify(n)}catch{f=await c.verify(n,!0)}const g=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,_=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:_,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return s?Object.assign(g,{captchaResp:f}):Object.assign(g,{captchaResponse:f}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function qd(r,t,n,s,l){var c;if(!((c=r._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await q_(r,t,n,n==="getOobCode");return s(r,f)}else return s(r,t).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await q_(r,t,n,n==="getOobCode");return s(r,g)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(r,t){const n=hm(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(Fs(c,t??{}))return l;Gn(l,"already-initialized")}return n.initialize({options:t})}function z1(r,t){const n=(t==null?void 0:t.persistence)||[],s=(Array.isArray(n)?n:[n]).map(ar);t!=null&&t.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t==null?void 0:t.popupRedirectResolver)}function B1(r,t,n){const s=os(r);Et(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const l=!1,c=j0(t),{host:f,port:g}=q1(t),p=g===null?"":`:${g}`,_={url:`${c}//${f}${p}/`},T=Object.freeze({host:f,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Et(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Et(Fs(_,s.config.emulator)&&Fs(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,uo(f)?(d0(`${c}//${f}${p}`),m0("Auth",!0)):H1()}function j0(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function q1(r){const t=j0(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:H_(s.substr(c.length+1))}}else{const[c,f]=s.split(":");return{host:c,port:H_(f)}}}function H_(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function H1(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return sr("not implemented")}_getIdTokenResponse(t){return sr("not implemented")}_linkToIdToken(t,n){return sr("not implemented")}_getReauthenticationResolver(t){return sr("not implemented")}}async function F1(r,t){return mr(r,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G1(r,t){return Ql(r,"POST","/v1/accounts:signInWithPassword",as(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q1(r,t){return Ql(r,"POST","/v1/accounts:signInWithEmailLink",as(r,t))}async function K1(r,t){return Ql(r,"POST","/v1/accounts:signInWithEmailLink",as(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends _m{constructor(t,n,s,l=null){super("password",s),this._email=t,this._password=n,this._tenantId=l}static _fromEmailAndPassword(t,n){return new Pl(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new Pl(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qd(t,n,"signInWithPassword",G1);case"emailLink":return Q1(t,{email:this._email,oobCode:this._password});default:Gn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qd(t,s,"signUpPassword",F1);case"emailLink":return K1(t,{idToken:n,email:this._email,oobCode:this._password});default:Gn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(r,t){return Ql(r,"POST","/v1/accounts:signInWithIdp",as(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="http://localhost";class Qs extends _m{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Qs(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Gn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:l}=n,c=fm(n,["providerId","signInMethod"]);if(!s||!l)return null;const f=new Qs(s,l);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(t){const n=this.buildRequest();return Za(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,Za(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Za(t,n)}buildRequest(){const t={requestUri:Y1,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Fl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $1(r){const t=Al(bl(r)).link,n=t?Al(bl(t)).deep_link_id:null,s=Al(bl(r)).deep_link_id;return(s?Al(bl(s)).link:null)||s||n||t||r}class vm{constructor(t){var n,s,l,c,f,g;const p=Al(bl(t)),_=(n=p.apiKey)!==null&&n!==void 0?n:null,T=(s=p.oobCode)!==null&&s!==void 0?s:null,w=X1((l=p.mode)!==null&&l!==void 0?l:null);Et(_&&T&&w,"argument-error"),this.apiKey=_,this.operation=w,this.code=T,this.continueUrl=(c=p.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(f=p.lang)!==null&&f!==void 0?f:null,this.tenantId=(g=p.tenantId)!==null&&g!==void 0?g:null}static parseLink(t){const n=$1(t);try{return new vm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(){this.providerId=ho.PROVIDER_ID}static credential(t,n){return Pl._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=vm.parseLink(n);return Et(s,"argument-error"),Pl._fromEmailAndCode(t,s.code,s.tenantId)}}ho.PROVIDER_ID="password";ho.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ho.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends Em{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends Kl{constructor(){super("facebook.com")}static credential(t){return Qs._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Fr.credentialFromTaggedObject(t)}static credentialFromError(t){return Fr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Fr.credential(t.oauthAccessToken)}catch{return null}}}Fr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends Kl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Qs._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return rr.credentialFromTaggedObject(t)}static credentialFromError(t){return rr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return rr.credential(n,s)}catch{return null}}}rr.GOOGLE_SIGN_IN_METHOD="google.com";rr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Kl{constructor(){super("github.com")}static credential(t){return Qs._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Gr.credentialFromTaggedObject(t)}static credentialFromError(t){return Gr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Gr.credential(t.oauthAccessToken)}catch{return null}}}Gr.GITHUB_SIGN_IN_METHOD="github.com";Gr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends Kl{constructor(){super("twitter.com")}static credential(t,n){return Qs._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Qr.credentialFromTaggedObject(t)}static credentialFromError(t){return Qr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Qr.credential(n,s)}catch{return null}}}Qr.TWITTER_SIGN_IN_METHOD="twitter.com";Qr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z1(r,t){return Ql(r,"POST","/v1/accounts:signUp",as(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,l=!1){const c=await Wn._fromIdTokenResponse(t,s,l),f=F_(s);return new Ks({user:c,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const l=F_(s);return new Ks({user:t,providerId:l,_tokenResponse:s,operationType:n})}}function F_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends dr{constructor(t,n,s,l){var c;super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,qc.prototype),this.customData={appName:t.name,tenantId:(c=t.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,l){return new qc(t,n,s,l)}}function z0(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?qc._fromErrorAndOperation(r,c,t,s):c})}async function J1(r,t,n=!1){const s=await to(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return Ks._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W1(r,t,n=!1){const{auth:s}=r;if(Cn(s.app))return Promise.reject(or(s));const l="reauthenticate";try{const c=await to(r,z0(s,l,t,r),n);Et(c.idToken,s,"internal-error");const f=pm(c.idToken);Et(f,s,"internal-error");const{sub:g}=f;return Et(r.uid===g,s,"user-mismatch"),Ks._forOperation(r,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Gn(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B0(r,t,n=!1){if(Cn(r.app))return Promise.reject(or(r));const s="signIn",l=await z0(r,s,t),c=await Ks._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}async function tw(r,t){return B0(os(r),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q0(r){const t=os(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ew(r,t,n){if(Cn(r.app))return Promise.reject(or(r));const s=os(r),f=await qd(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Z1).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&q0(r),p}),g=await Ks._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(g.user),g}function nw(r,t,n){return Cn(r.app)?Promise.reject(or(r)):tw(Xe(r),ho.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&q0(r),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iw(r,t){return mr(r,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rw(r,{displayName:t,photoURL:n}){if(t===void 0&&n===void 0)return;const s=Xe(r),c={idToken:await s.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},f=await to(s,iw(s.auth,c));s.displayName=f.displayName||null,s.photoURL=f.photoUrl||null;const g=s.providerData.find(({providerId:p})=>p==="password");g&&(g.displayName=s.displayName,g.photoURL=s.photoURL),await s._updateTokensIfNecessary(f)}function sw(r,t,n,s){return Xe(r).onIdTokenChanged(t,n,s)}function aw(r,t,n){return Xe(r).beforeAuthStateChanged(t,n)}function ow(r,t,n,s){return Xe(r).onAuthStateChanged(t,n,s)}function lw(r){return Xe(r).signOut()}const Hc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hc,"1"),this.storage.removeItem(Hc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=1e3,cw=10;class F0 extends H0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=P0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&t(n,l,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((f,g,p)=>{this.notifyListeners(f,p)});return}const s=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},c=this.storage.getItem(s);w1()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,cw):l()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},uw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}F0.type="LOCAL";const hw=F0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0 extends H0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}G0.type="SESSION";const Q0=G0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const s=new rh(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:l,data:c}=n.data,f=this.handlersMap[l];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const g=Array.from(f).map(async _=>_(n.origin,c)),p=await fw(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:p})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,f;return new Promise((g,p)=>{const _=Tm("",20);l.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},s);f={messageChannel:l,onMessage(w){const C=w;if(C.data.eventId===_)switch(C.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(C.data.response);break;default:clearTimeout(T),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:_,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(){return window}function mw(r){Ai().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(){return typeof Ai().WorkerGlobalScope<"u"&&typeof Ai().importScripts=="function"}async function gw(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pw(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function yw(){return K0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="firebaseLocalStorageDb",_w=1,Fc="firebaseLocalStorage",X0="fbase_key";class Yl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sh(r,t){return r.transaction([Fc],t?"readwrite":"readonly").objectStore(Fc)}function vw(){const r=indexedDB.deleteDatabase(Y0);return new Yl(r).toPromise()}function Hd(){const r=indexedDB.open(Y0,_w);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Fc,{keyPath:X0})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Fc)?t(s):(s.close(),await vw(),t(await Hd()))})})}async function G_(r,t,n){const s=sh(r,!0).put({[X0]:t,value:n});return new Yl(s).toPromise()}async function Ew(r,t){const n=sh(r,!1).get(t),s=await new Yl(n).toPromise();return s===void 0?null:s.value}function Q_(r,t){const n=sh(r,!0).delete(t);return new Yl(n).toPromise()}const Tw=800,Aw=3;class $0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>Aw)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return K0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rh._getInstance(yw()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await gw(),!this.activeServiceWorker)return;this.sender=new dw(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((t=s[0])===null||t===void 0)&&t.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||pw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Hd();return await G_(t,Hc,"1"),await Q_(t,Hc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>G_(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>Ew(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Q_(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=sh(l,!1).getAll();return new Yl(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Tw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$0.type="LOCAL";const bw=$0;new Gl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(r,t){return t?ar(t):(Et(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am extends _m{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Za(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Za(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Za(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Sw(r){return B0(r.auth,new Am(r),r.bypassAuthState)}function ww(r){const{auth:t,user:n}=r;return Et(n,t,"internal-error"),W1(n,new Am(r),r.bypassAuthState)}async function Rw(r){const{auth:t,user:n}=r;return Et(n,t,"internal-error"),J1(n,new Am(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(t,n,s,l,c=!1){this.auth=t,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:f,type:g}=t;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(_){this.reject(_)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Sw;case"linkViaPopup":case"linkViaRedirect":return Rw;case"reauthViaPopup":case"reauthViaRedirect":return ww;default:Gn(this.auth,"internal-error")}}resolve(t){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=new Gl(2e3,1e4);async function Cw(r,t,n){if(Cn(r.app))return Promise.reject(ei(r,"operation-not-supported-in-this-environment"));const s=os(r);s1(r,t,Em);const l=Z0(s,n);return new qs(s,"signInViaPopup",t,l).executeNotNull()}class qs extends J0{constructor(t,n,s,l,c){super(t,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,qs.currentPopupAction&&qs.currentPopupAction.cancel(),qs.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Et(t,this.auth,"internal-error"),t}async onExecution(){cr(this.filter.length===1,"Popup operations only handle one event");const t=Tm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qs.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Iw.get())};t()}}qs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="pendingRedirect",Nc=new Map;class xw extends J0{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Nc.get(this.auth._key());if(!t){try{const s=await Dw(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Nc.set(this.auth._key(),t)}return this.bypassAuthState||Nc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Dw(r,t){const n=Vw(t),s=Mw(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function Ow(r,t){Nc.set(r._key(),t)}function Mw(r){return ar(r._redirectPersistence)}function Vw(r){return Cc(Nw,r.config.apiKey,r.name)}async function Pw(r,t,n=!1){if(Cn(r.app))return Promise.reject(or(r));const s=os(r),l=Z0(s,t),f=await new xw(s,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,t)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw=10*60*1e3;class Uw{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Lw(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var s;if(t.error&&!W0(t)){const l=((s=t.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(ei(this.auth,l))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=kw&&this.cachedEventUids.clear(),this.cachedEventUids.has(K_(t))}saveEventToCache(t){this.cachedEventUids.add(K_(t)),this.lastProcessedEventTime=Date.now()}}function K_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function W0({type:r,error:t}){return r==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Lw(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return W0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jw(r,t={}){return mr(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bw=/^https?/;async function qw(r){if(r.config.emulator)return;const{authorizedDomains:t}=await jw(r);for(const n of t)try{if(Hw(n))return}catch{}Gn(r,"unauthorized-domain")}function Hw(r){const t=zd(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!Bw.test(n))return!1;if(zw.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=new Gl(3e4,6e4);function Y_(){const r=Ai().___jsl;if(r!=null&&r.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function Gw(r){return new Promise((t,n)=>{var s,l,c;function f(){Y_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Y_(),n(ei(r,"network-request-failed"))},timeout:Fw.get()})}if(!((l=(s=Ai().gapi)===null||s===void 0?void 0:s.iframes)===null||l===void 0)&&l.Iframe)t(gapi.iframes.getContext());else if(!((c=Ai().gapi)===null||c===void 0)&&c.load)f();else{const g=V1("iframefcb");return Ai()[g]=()=>{gapi.load?f():n(ei(r,"network-request-failed"))},U0(`${M1()}?onload=${g}`).catch(p=>n(p))}}).catch(t=>{throw xc=null,t})}let xc=null;function Qw(r){return xc=xc||Gw(r),xc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=new Gl(5e3,15e3),Yw="__/auth/iframe",Xw="emulator/auth/iframe",$w={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jw(r){const t=r.config;Et(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?gm(t,Xw):`https://${r.config.authDomain}/${Yw}`,s={apiKey:t.apiKey,appName:r.name,v:co},l=Zw.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Fl(s).slice(1)}`}async function Ww(r){const t=await Qw(r),n=Ai().gapi;return Et(n,r,"internal-error"),t.open({where:document.body,url:Jw(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$w,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const f=ei(r,"network-request-failed"),g=Ai().setTimeout(()=>{c(f)},Kw.get());function p(){Ai().clearTimeout(g),l(s)}s.ping(p).then(p,()=>{c(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eR=500,nR=600,iR="_blank",rR="http://localhost";class X_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sR(r,t,n,s=eR,l=nR){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const p=Object.assign(Object.assign({},tR),{width:s.toString(),height:l.toString(),top:c,left:f}),_=sn().toLowerCase();n&&(g=x0(_)?iR:n),C0(_)&&(t=t||rR,p.scrollbars="yes");const T=Object.entries(p).reduce((C,[F,J])=>`${C}${F}=${J},`,"");if(S1(_)&&g!=="_self")return aR(t||"",g),new X_(null);const w=window.open(t||"",g,T);Et(w,r,"popup-blocked");try{w.focus()}catch{}return new X_(w)}function aR(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="__/auth/handler",lR="emulator/auth/handler",uR=encodeURIComponent("fac");async function $_(r,t,n,s,l,c){Et(r.config.authDomain,r,"auth-domain-config-required"),Et(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:co,eventId:l};if(t instanceof Em){t.setDefaultLanguage(r.languageCode),f.providerId=t.providerId||"",Hb(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[T,w]of Object.entries({}))f[T]=w}if(t instanceof Kl){const T=t.getScopes().filter(w=>w!=="");T.length>0&&(f.scopes=T.join(","))}r.tenantId&&(f.tid=r.tenantId);const g=f;for(const T of Object.keys(g))g[T]===void 0&&delete g[T];const p=await r._getAppCheckToken(),_=p?`#${uR}=${encodeURIComponent(p)}`:"";return`${cR(r)}?${Fl(g).slice(1)}${_}`}function cR({config:r}){return r.emulator?gm(r,lR):`https://${r.authDomain}/${oR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd="webStorageSupport";class hR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Q0,this._completeRedirectFn=Pw,this._overrideRedirectResult=Ow}async _openPopup(t,n,s,l){var c;cr((c=this.eventManagers[t._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const f=await $_(t,n,s,zd(),l);return sR(t,f,Tm())}async _openRedirect(t,n,s,l){await this._originValidation(t);const c=await $_(t,n,s,zd(),l);return mw(c),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(cr(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await Ww(t),s=new Uw(t);return n.register("authEvent",l=>(Et(l==null?void 0:l.authEvent,t,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(xd,{type:xd},l=>{var c;const f=(c=l==null?void 0:l[0])===null||c===void 0?void 0:c[xd];f!==void 0&&n(!!f),Gn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qw(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return P0()||N0()||ym()}}const fR=hR;var Z_="@firebase/auth",J_="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gR(r){Wa(new Gs("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:f,authDomain:g}=s.options;Et(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:f,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:k0(r)},_=new x1(s,l,c,p);return z1(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Wa(new Gs("auth-internal",t=>{const n=os(t.getProvider("auth").getImmediate());return(s=>new dR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$r(Z_,J_,mR(r)),$r(Z_,J_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=5*60,yR=f0("authIdTokenMaxAge")||pR;let W_=null;const _R=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>yR)return;const l=n==null?void 0:n.token;W_!==l&&(W_=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function vR(r=_0()){const t=hm(r,"auth");if(t.isInitialized())return t.getImmediate();const n=j1(r,{popupRedirectResolver:fR,persistence:[bw,hw,Q0]}),s=f0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const f=_R(c.toString());aw(n,f,()=>f(n.currentUser)),sw(n,g=>f(g))}}const l=c0("auth");return l&&B1(n,`http://${l}`),n}function ER(){var r,t;return(t=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&t!==void 0?t:document}D1({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=l=>{const c=ei("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",ER().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gR("Browser");var tv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zr,tE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(M,b){function R(){}R.prototype=b.prototype,M.D=b.prototype,M.prototype=new R,M.prototype.constructor=M,M.C=function(O,V,k){for(var I=Array(arguments.length-2),Zt=2;Zt<arguments.length;Zt++)I[Zt-2]=arguments[Zt];return b.prototype[V].apply(O,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(M,b,R){R||(R=0);var O=Array(16);if(typeof b=="string")for(var V=0;16>V;++V)O[V]=b.charCodeAt(R++)|b.charCodeAt(R++)<<8|b.charCodeAt(R++)<<16|b.charCodeAt(R++)<<24;else for(V=0;16>V;++V)O[V]=b[R++]|b[R++]<<8|b[R++]<<16|b[R++]<<24;b=M.g[0],R=M.g[1],V=M.g[2];var k=M.g[3],I=b+(k^R&(V^k))+O[0]+3614090360&4294967295;b=R+(I<<7&4294967295|I>>>25),I=k+(V^b&(R^V))+O[1]+3905402710&4294967295,k=b+(I<<12&4294967295|I>>>20),I=V+(R^k&(b^R))+O[2]+606105819&4294967295,V=k+(I<<17&4294967295|I>>>15),I=R+(b^V&(k^b))+O[3]+3250441966&4294967295,R=V+(I<<22&4294967295|I>>>10),I=b+(k^R&(V^k))+O[4]+4118548399&4294967295,b=R+(I<<7&4294967295|I>>>25),I=k+(V^b&(R^V))+O[5]+1200080426&4294967295,k=b+(I<<12&4294967295|I>>>20),I=V+(R^k&(b^R))+O[6]+2821735955&4294967295,V=k+(I<<17&4294967295|I>>>15),I=R+(b^V&(k^b))+O[7]+4249261313&4294967295,R=V+(I<<22&4294967295|I>>>10),I=b+(k^R&(V^k))+O[8]+1770035416&4294967295,b=R+(I<<7&4294967295|I>>>25),I=k+(V^b&(R^V))+O[9]+2336552879&4294967295,k=b+(I<<12&4294967295|I>>>20),I=V+(R^k&(b^R))+O[10]+4294925233&4294967295,V=k+(I<<17&4294967295|I>>>15),I=R+(b^V&(k^b))+O[11]+2304563134&4294967295,R=V+(I<<22&4294967295|I>>>10),I=b+(k^R&(V^k))+O[12]+1804603682&4294967295,b=R+(I<<7&4294967295|I>>>25),I=k+(V^b&(R^V))+O[13]+4254626195&4294967295,k=b+(I<<12&4294967295|I>>>20),I=V+(R^k&(b^R))+O[14]+2792965006&4294967295,V=k+(I<<17&4294967295|I>>>15),I=R+(b^V&(k^b))+O[15]+1236535329&4294967295,R=V+(I<<22&4294967295|I>>>10),I=b+(V^k&(R^V))+O[1]+4129170786&4294967295,b=R+(I<<5&4294967295|I>>>27),I=k+(R^V&(b^R))+O[6]+3225465664&4294967295,k=b+(I<<9&4294967295|I>>>23),I=V+(b^R&(k^b))+O[11]+643717713&4294967295,V=k+(I<<14&4294967295|I>>>18),I=R+(k^b&(V^k))+O[0]+3921069994&4294967295,R=V+(I<<20&4294967295|I>>>12),I=b+(V^k&(R^V))+O[5]+3593408605&4294967295,b=R+(I<<5&4294967295|I>>>27),I=k+(R^V&(b^R))+O[10]+38016083&4294967295,k=b+(I<<9&4294967295|I>>>23),I=V+(b^R&(k^b))+O[15]+3634488961&4294967295,V=k+(I<<14&4294967295|I>>>18),I=R+(k^b&(V^k))+O[4]+3889429448&4294967295,R=V+(I<<20&4294967295|I>>>12),I=b+(V^k&(R^V))+O[9]+568446438&4294967295,b=R+(I<<5&4294967295|I>>>27),I=k+(R^V&(b^R))+O[14]+3275163606&4294967295,k=b+(I<<9&4294967295|I>>>23),I=V+(b^R&(k^b))+O[3]+4107603335&4294967295,V=k+(I<<14&4294967295|I>>>18),I=R+(k^b&(V^k))+O[8]+1163531501&4294967295,R=V+(I<<20&4294967295|I>>>12),I=b+(V^k&(R^V))+O[13]+2850285829&4294967295,b=R+(I<<5&4294967295|I>>>27),I=k+(R^V&(b^R))+O[2]+4243563512&4294967295,k=b+(I<<9&4294967295|I>>>23),I=V+(b^R&(k^b))+O[7]+1735328473&4294967295,V=k+(I<<14&4294967295|I>>>18),I=R+(k^b&(V^k))+O[12]+2368359562&4294967295,R=V+(I<<20&4294967295|I>>>12),I=b+(R^V^k)+O[5]+4294588738&4294967295,b=R+(I<<4&4294967295|I>>>28),I=k+(b^R^V)+O[8]+2272392833&4294967295,k=b+(I<<11&4294967295|I>>>21),I=V+(k^b^R)+O[11]+1839030562&4294967295,V=k+(I<<16&4294967295|I>>>16),I=R+(V^k^b)+O[14]+4259657740&4294967295,R=V+(I<<23&4294967295|I>>>9),I=b+(R^V^k)+O[1]+2763975236&4294967295,b=R+(I<<4&4294967295|I>>>28),I=k+(b^R^V)+O[4]+1272893353&4294967295,k=b+(I<<11&4294967295|I>>>21),I=V+(k^b^R)+O[7]+4139469664&4294967295,V=k+(I<<16&4294967295|I>>>16),I=R+(V^k^b)+O[10]+3200236656&4294967295,R=V+(I<<23&4294967295|I>>>9),I=b+(R^V^k)+O[13]+681279174&4294967295,b=R+(I<<4&4294967295|I>>>28),I=k+(b^R^V)+O[0]+3936430074&4294967295,k=b+(I<<11&4294967295|I>>>21),I=V+(k^b^R)+O[3]+3572445317&4294967295,V=k+(I<<16&4294967295|I>>>16),I=R+(V^k^b)+O[6]+76029189&4294967295,R=V+(I<<23&4294967295|I>>>9),I=b+(R^V^k)+O[9]+3654602809&4294967295,b=R+(I<<4&4294967295|I>>>28),I=k+(b^R^V)+O[12]+3873151461&4294967295,k=b+(I<<11&4294967295|I>>>21),I=V+(k^b^R)+O[15]+530742520&4294967295,V=k+(I<<16&4294967295|I>>>16),I=R+(V^k^b)+O[2]+3299628645&4294967295,R=V+(I<<23&4294967295|I>>>9),I=b+(V^(R|~k))+O[0]+4096336452&4294967295,b=R+(I<<6&4294967295|I>>>26),I=k+(R^(b|~V))+O[7]+1126891415&4294967295,k=b+(I<<10&4294967295|I>>>22),I=V+(b^(k|~R))+O[14]+2878612391&4294967295,V=k+(I<<15&4294967295|I>>>17),I=R+(k^(V|~b))+O[5]+4237533241&4294967295,R=V+(I<<21&4294967295|I>>>11),I=b+(V^(R|~k))+O[12]+1700485571&4294967295,b=R+(I<<6&4294967295|I>>>26),I=k+(R^(b|~V))+O[3]+2399980690&4294967295,k=b+(I<<10&4294967295|I>>>22),I=V+(b^(k|~R))+O[10]+4293915773&4294967295,V=k+(I<<15&4294967295|I>>>17),I=R+(k^(V|~b))+O[1]+2240044497&4294967295,R=V+(I<<21&4294967295|I>>>11),I=b+(V^(R|~k))+O[8]+1873313359&4294967295,b=R+(I<<6&4294967295|I>>>26),I=k+(R^(b|~V))+O[15]+4264355552&4294967295,k=b+(I<<10&4294967295|I>>>22),I=V+(b^(k|~R))+O[6]+2734768916&4294967295,V=k+(I<<15&4294967295|I>>>17),I=R+(k^(V|~b))+O[13]+1309151649&4294967295,R=V+(I<<21&4294967295|I>>>11),I=b+(V^(R|~k))+O[4]+4149444226&4294967295,b=R+(I<<6&4294967295|I>>>26),I=k+(R^(b|~V))+O[11]+3174756917&4294967295,k=b+(I<<10&4294967295|I>>>22),I=V+(b^(k|~R))+O[2]+718787259&4294967295,V=k+(I<<15&4294967295|I>>>17),I=R+(k^(V|~b))+O[9]+3951481745&4294967295,M.g[0]=M.g[0]+b&4294967295,M.g[1]=M.g[1]+(V+(I<<21&4294967295|I>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+k&4294967295}s.prototype.u=function(M,b){b===void 0&&(b=M.length);for(var R=b-this.blockSize,O=this.B,V=this.h,k=0;k<b;){if(V==0)for(;k<=R;)l(this,M,k),k+=this.blockSize;if(typeof M=="string"){for(;k<b;)if(O[V++]=M.charCodeAt(k++),V==this.blockSize){l(this,O),V=0;break}}else for(;k<b;)if(O[V++]=M[k++],V==this.blockSize){l(this,O),V=0;break}}this.h=V,this.o+=b},s.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var b=1;b<M.length-8;++b)M[b]=0;var R=8*this.o;for(b=M.length-8;b<M.length;++b)M[b]=R&255,R/=256;for(this.u(M),M=Array(16),b=R=0;4>b;++b)for(var O=0;32>O;O+=8)M[R++]=this.g[b]>>>O&255;return M};function c(M,b){var R=g;return Object.prototype.hasOwnProperty.call(R,M)?R[M]:R[M]=b(M)}function f(M,b){this.h=b;for(var R=[],O=!0,V=M.length-1;0<=V;V--){var k=M[V]|0;O&&k==b||(R[V]=k,O=!1)}this.g=R}var g={};function p(M){return-128<=M&&128>M?c(M,function(b){return new f([b|0],0>b?-1:0)}):new f([M|0],0>M?-1:0)}function _(M){if(isNaN(M)||!isFinite(M))return w;if(0>M)return tt(_(-M));for(var b=[],R=1,O=0;M>=R;O++)b[O]=M/R|0,R*=4294967296;return new f(b,0)}function T(M,b){if(M.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(M.charAt(0)=="-")return tt(T(M.substring(1),b));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=_(Math.pow(b,8)),O=w,V=0;V<M.length;V+=8){var k=Math.min(8,M.length-V),I=parseInt(M.substring(V,V+k),b);8>k?(k=_(Math.pow(b,k)),O=O.j(k).add(_(I))):(O=O.j(R),O=O.add(_(I)))}return O}var w=p(0),C=p(1),F=p(16777216);r=f.prototype,r.m=function(){if(it(this))return-tt(this).m();for(var M=0,b=1,R=0;R<this.g.length;R++){var O=this.i(R);M+=(0<=O?O:4294967296+O)*b,b*=4294967296}return M},r.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(J(this))return"0";if(it(this))return"-"+tt(this).toString(M);for(var b=_(Math.pow(M,6)),R=this,O="";;){var V=Ot(R,b).g;R=At(R,V.j(b));var k=((0<R.g.length?R.g[0]:R.h)>>>0).toString(M);if(R=V,J(R))return k+O;for(;6>k.length;)k="0"+k;O=k+O}},r.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function J(M){if(M.h!=0)return!1;for(var b=0;b<M.g.length;b++)if(M.g[b]!=0)return!1;return!0}function it(M){return M.h==-1}r.l=function(M){return M=At(this,M),it(M)?-1:J(M)?0:1};function tt(M){for(var b=M.g.length,R=[],O=0;O<b;O++)R[O]=~M.g[O];return new f(R,~M.h).add(C)}r.abs=function(){return it(this)?tt(this):this},r.add=function(M){for(var b=Math.max(this.g.length,M.g.length),R=[],O=0,V=0;V<=b;V++){var k=O+(this.i(V)&65535)+(M.i(V)&65535),I=(k>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);O=I>>>16,k&=65535,I&=65535,R[V]=I<<16|k}return new f(R,R[R.length-1]&-2147483648?-1:0)};function At(M,b){return M.add(tt(b))}r.j=function(M){if(J(this)||J(M))return w;if(it(this))return it(M)?tt(this).j(tt(M)):tt(tt(this).j(M));if(it(M))return tt(this.j(tt(M)));if(0>this.l(F)&&0>M.l(F))return _(this.m()*M.m());for(var b=this.g.length+M.g.length,R=[],O=0;O<2*b;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<M.g.length;V++){var k=this.i(O)>>>16,I=this.i(O)&65535,Zt=M.i(V)>>>16,se=M.i(V)&65535;R[2*O+2*V]+=I*se,ht(R,2*O+2*V),R[2*O+2*V+1]+=k*se,ht(R,2*O+2*V+1),R[2*O+2*V+1]+=I*Zt,ht(R,2*O+2*V+1),R[2*O+2*V+2]+=k*Zt,ht(R,2*O+2*V+2)}for(O=0;O<b;O++)R[O]=R[2*O+1]<<16|R[2*O];for(O=b;O<2*b;O++)R[O]=0;return new f(R,0)};function ht(M,b){for(;(M[b]&65535)!=M[b];)M[b+1]+=M[b]>>>16,M[b]&=65535,b++}function ct(M,b){this.g=M,this.h=b}function Ot(M,b){if(J(b))throw Error("division by zero");if(J(M))return new ct(w,w);if(it(M))return b=Ot(tt(M),b),new ct(tt(b.g),tt(b.h));if(it(b))return b=Ot(M,tt(b)),new ct(tt(b.g),b.h);if(30<M.g.length){if(it(M)||it(b))throw Error("slowDivide_ only works with positive integers.");for(var R=C,O=b;0>=O.l(M);)R=_t(R),O=_t(O);var V=Rt(R,1),k=Rt(O,1);for(O=Rt(O,2),R=Rt(R,2);!J(O);){var I=k.add(O);0>=I.l(M)&&(V=V.add(R),k=I),O=Rt(O,1),R=Rt(R,1)}return b=At(M,V.j(b)),new ct(V,b)}for(V=w;0<=M.l(b);){for(R=Math.max(1,Math.floor(M.m()/b.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),k=_(R),I=k.j(b);it(I)||0<I.l(M);)R-=O,k=_(R),I=k.j(b);J(k)&&(k=C),V=V.add(k),M=At(M,I)}return new ct(V,M)}r.A=function(M){return Ot(this,M).h},r.and=function(M){for(var b=Math.max(this.g.length,M.g.length),R=[],O=0;O<b;O++)R[O]=this.i(O)&M.i(O);return new f(R,this.h&M.h)},r.or=function(M){for(var b=Math.max(this.g.length,M.g.length),R=[],O=0;O<b;O++)R[O]=this.i(O)|M.i(O);return new f(R,this.h|M.h)},r.xor=function(M){for(var b=Math.max(this.g.length,M.g.length),R=[],O=0;O<b;O++)R[O]=this.i(O)^M.i(O);return new f(R,this.h^M.h)};function _t(M){for(var b=M.g.length+1,R=[],O=0;O<b;O++)R[O]=M.i(O)<<1|M.i(O-1)>>>31;return new f(R,M.h)}function Rt(M,b){var R=b>>5;b%=32;for(var O=M.g.length-R,V=[],k=0;k<O;k++)V[k]=0<b?M.i(k+R)>>>b|M.i(k+R+1)<<32-b:M.i(k+R);return new f(V,M.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,tE=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=_,f.fromString=T,Zr=f}).apply(typeof tv<"u"?tv:typeof self<"u"?self:typeof window<"u"?window:{});var Ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eE,Sl,nE,Dc,Fd,iE,rE,sE;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,y){return u==Array.prototype||u==Object.prototype||(u[m]=y.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ac=="object"&&Ac];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=n(this);function l(u,m){if(m)t:{var y=s;u=u.split(".");for(var A=0;A<u.length-1;A++){var U=u[A];if(!(U in y))break t;y=y[U]}u=u[u.length-1],A=y[u],m=m(A),m!=A&&m!=null&&t(y,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var y=0,A=!1,U={next:function(){if(!A&&y<u.length){var H=y++;return{value:m(H,u[H]),done:!1}}return A=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},g=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function _(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function T(u,m,y){return u.call.apply(u.bind,arguments)}function w(u,m,y){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,A),u.apply(m,U)}}return function(){return u.apply(m,arguments)}}function C(u,m,y){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:w,C.apply(null,arguments)}function F(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var A=y.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function J(u,m){function y(){}y.prototype=m.prototype,u.aa=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(A,U,H){for(var et=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)et[Lt-2]=arguments[Lt];return m.prototype[U].apply(A,et)}}function it(u){const m=u.length;if(0<m){const y=Array(m);for(let A=0;A<m;A++)y[A]=u[A];return y}return[]}function tt(u,m){for(let y=1;y<arguments.length;y++){const A=arguments[y];if(p(A)){const U=u.length||0,H=A.length||0;u.length=U+H;for(let et=0;et<H;et++)u[U+et]=A[et]}else u.push(A)}}class At{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ht(u){return/^[\s\xa0]*$/.test(u)}function ct(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function Ot(u){return Ot[" "](u),u}Ot[" "]=function(){};var _t=ct().indexOf("Gecko")!=-1&&!(ct().toLowerCase().indexOf("webkit")!=-1&&ct().indexOf("Edge")==-1)&&!(ct().indexOf("Trident")!=-1||ct().indexOf("MSIE")!=-1)&&ct().indexOf("Edge")==-1;function Rt(u,m,y){for(const A in u)m.call(y,u[A],A,u)}function M(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function b(u){const m={};for(const y in u)m[y]=u[y];return m}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,m){let y,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(y in A)u[y]=A[y];for(let H=0;H<R.length;H++)y=R[H],Object.prototype.hasOwnProperty.call(A,y)&&(u[y]=A[y])}}function V(u){var m=1;u=u.split(":");const y=[];for(;0<m&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function k(u){g.setTimeout(()=>{throw u},0)}function I(){var u=Ut;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Zt{constructor(){this.h=this.g=null}add(m,y){const A=se.get();A.set(m,y),this.h?this.h.next=A:this.g=A,this.h=A}}var se=new At(()=>new q,u=>u.reset());class q{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let rt,ut=!1,Ut=new Zt,N=()=>{const u=g.Promise.resolve(void 0);rt=()=>{u.then(Y)}};var Y=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(y){k(y)}var m=se;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ut=!1};function nt(){this.s=this.s,this.C=this.C}nt.prototype.s=!1,nt.prototype.ma=function(){this.s||(this.s=!0,this.N())},nt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var at=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};g.addEventListener("test",y,m),g.removeEventListener("test",y,m)}catch{}return u}();function mt(u,m){if(W.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(_t){t:{try{Ot(m.nodeName);var U=!0;break t}catch{}U=!1}U||(m=null)}}else y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement);this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:bt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&mt.aa.h.call(this)}}J(mt,W);var bt={2:"touch",3:"pen",4:"mouse"};mt.prototype.h=function(){mt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var he="closure_listenable_"+(1e6*Math.random()|0),qt=0;function vn(u,m,y,A,U){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!A,this.ha=U,this.key=++qt,this.da=this.fa=!1}function fn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Nn(u){this.src=u,this.g={},this.h=0}Nn.prototype.add=function(u,m,y,A,U){var H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);var et=Ii(u,m,A,U);return-1<et?(m=u[et],y||(m.fa=!1)):(m=new vn(m,this.src,H,!!A,U),m.fa=y,u.push(m)),m};function xn(u,m){var y=m.type;if(y in u.g){var A=u.g[y],U=Array.prototype.indexOf.call(A,m,void 0),H;(H=0<=U)&&Array.prototype.splice.call(A,U,1),H&&(fn(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function Ii(u,m,y,A){for(var U=0;U<u.length;++U){var H=u[U];if(!H.da&&H.listener==m&&H.capture==!!y&&H.ha==A)return U}return-1}var Ci="closure_lm_"+(1e6*Math.random()|0),Ni={};function ii(u,m,y,A,U){if(Array.isArray(m)){for(var H=0;H<m.length;H++)ii(u,m[H],y,A,U);return null}return y=Dn(y),u&&u[he]?u.K(m,y,_(A)?!!A.capture:!1,U):Re(u,m,y,!1,A,U)}function Re(u,m,y,A,U,H){if(!m)throw Error("Invalid event type");var et=_(U)?!!U.capture:!!U,Lt=gr(u);if(Lt||(u[Ci]=Lt=new Nn(u)),y=Lt.add(m,y,A,et,H),y.proxy)return y;if(A=Qn(),y.proxy=A,A.src=u,A.listener=y,u.addEventListener)at||(U=et),U===void 0&&(U=!1),u.addEventListener(m.toString(),A,U);else if(u.attachEvent)u.attachEvent(an(m.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Qn(){function u(y){return m.call(u.src,u.listener,y)}const m=ls;return u}function ri(u,m,y,A,U){if(Array.isArray(m))for(var H=0;H<m.length;H++)ri(u,m[H],y,A,U);else A=_(A)?!!A.capture:!!A,y=Dn(y),u&&u[he]?(u=u.i,m=String(m).toString(),m in u.g&&(H=u.g[m],y=Ii(H,y,A,U),-1<y&&(fn(H[y]),Array.prototype.splice.call(H,y,1),H.length==0&&(delete u.g[m],u.h--)))):u&&(u=gr(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Ii(m,y,A,U)),(y=-1<u?m[u]:null)&&Ze(y))}function Ze(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[he])xn(m.i,u);else{var y=u.type,A=u.proxy;m.removeEventListener?m.removeEventListener(y,A,u.capture):m.detachEvent?m.detachEvent(an(y),A):m.addListener&&m.removeListener&&m.removeListener(A),(y=gr(m))?(xn(y,u),y.h==0&&(y.src=null,m[Ci]=null)):fn(u)}}}function an(u){return u in Ni?Ni[u]:Ni[u]="on"+u}function ls(u,m){if(u.da)u=!0;else{m=new mt(m,this);var y=u.listener,A=u.ha||u.src;u.fa&&Ze(u),u=y.call(A,m)}return u}function gr(u){return u=u[Ci],u instanceof Nn?u:null}var us="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dn(u){return typeof u=="function"?u:(u[us]||(u[us]=function(m){return u.handleEvent(m)}),u[us])}function ae(){nt.call(this),this.i=new Nn(this),this.M=this,this.F=null}J(ae,nt),ae.prototype[he]=!0,ae.prototype.removeEventListener=function(u,m,y,A){ri(this,u,m,y,A)};function Ft(u,m){var y,A=u.F;if(A)for(y=[];A;A=A.F)y.push(A);if(u=u.M,A=m.type||m,typeof m=="string")m=new W(m,u);else if(m instanceof W)m.target=m.target||u;else{var U=m;m=new W(A,u),O(m,U)}if(U=!0,y)for(var H=y.length-1;0<=H;H--){var et=m.g=y[H];U=Je(et,A,!0,m)&&U}if(et=m.g=u,U=Je(et,A,!0,m)&&U,U=Je(et,A,!1,m)&&U,y)for(H=0;H<y.length;H++)et=m.g=y[H],U=Je(et,A,!1,m)&&U}ae.prototype.N=function(){if(ae.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var y=u.g[m],A=0;A<y.length;A++)fn(y[A]);delete u.g[m],u.h--}}this.F=null},ae.prototype.K=function(u,m,y,A){return this.i.add(String(u),m,!1,y,A)},ae.prototype.L=function(u,m,y,A){return this.i.add(String(u),m,!0,y,A)};function Je(u,m,y,A){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,H=0;H<m.length;++H){var et=m[H];if(et&&!et.da&&et.capture==y){var Lt=et.listener,Ne=et.ha||et.src;et.fa&&xn(u.i,et),U=Lt.call(Ne,A)!==!1&&U}}return U&&!A.defaultPrevented}function Pe(u,m,y){if(typeof u=="function")y&&(u=C(u,y));else if(u&&typeof u.handleEvent=="function")u=C(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(u,m||0)}function ta(u){u.g=Pe(()=>{u.g=null,u.i&&(u.i=!1,ta(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class _o extends nt{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ta(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xi(u){nt.call(this),this.h=u,this.g={}}J(xi,nt);var Di=[];function Oi(u){Rt(u.g,function(m,y){this.g.hasOwnProperty(y)&&Ze(m)},u),u.g={}}xi.prototype.N=function(){xi.aa.N.call(this),Oi(this)},xi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dn=g.JSON.stringify,pr=g.JSON.parse,Mi=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function cs(){}cs.prototype.h=null;function Q(u){return u.h||(u.h=u.i())}function vt(){}var Gt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fe(){W.call(this,"d")}J(fe,W);function de(){W.call(this,"c")}J(de,W);var Ie={},mn=null;function si(){return mn=mn||new ae}Ie.La="serverreachability";function Vi(u){W.call(this,Ie.La,u)}J(Vi,W);function Kn(u){const m=si();Ft(m,new Vi(m))}Ie.STAT_EVENT="statevent";function tu(u,m){W.call(this,Ie.STAT_EVENT,u),this.stat=m}J(tu,W);function oe(u){const m=si();Ft(m,new tu(m,u))}Ie.Ma="timingevent";function Ce(u,m){W.call(this,Ie.Ma,u),this.size=m}J(Ce,W);function Ee(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},m)}function On(){this.g=!0}On.prototype.xa=function(){this.g=!1};function vo(u,m,y,A,U,H){u.info(function(){if(u.g)if(H)for(var et="",Lt=H.split("&"),Ne=0;Ne<Lt.length;Ne++){var jt=Lt[Ne].split("=");if(1<jt.length){var Ue=jt[0];jt=jt[1];var xe=Ue.split("_");et=2<=xe.length&&xe[1]=="type"?et+(Ue+"="+jt+"&"):et+(Ue+"=redacted&")}}else et=null;else et=H;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+m+`
`+y+`
`+et})}function Eh(u,m,y,A,U,H,et){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+m+`
`+y+`
`+H+" "+et})}function yr(u,m,y,A){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+hs(u,y)+(A?" "+A:"")})}function eu(u,m){u.info(function(){return"TIMEOUT: "+m})}On.prototype.info=function(){};function hs(u,m){if(!u.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var A=y[u];if(!(2>A.length)){var U=A[1];if(Array.isArray(U)&&!(1>U.length)){var H=U[0];if(H!="noop"&&H!="stop"&&H!="close")for(var et=1;et<U.length;et++)U[et]=""}}}}return dn(y)}catch{return m}}var _r={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ai;function oi(){}J(oi,cs),oi.prototype.g=function(){return new XMLHttpRequest},oi.prototype.i=function(){return{}},ai=new oi;function on(u,m,y,A){this.j=u,this.i=m,this.l=y,this.R=A||1,this.U=new xi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pe}function pe(){this.i=null,this.g="",this.h=!1}var Eo={},ea={};function Yn(u,m,y){u.L=1,u.v=ps(En(m)),u.m=y,u.P=!0,ki(u,null)}function ki(u,m){u.F=Date.now(),fs(u),u.A=En(u.v);var y=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),Ro(y.i,"t",A),u.C=0,y=u.j.J,u.h=new pe,u.g=yu(u.j,y?m:null,!u.m),0<u.O&&(u.M=new _o(C(u.Y,u,u.g),u.O)),m=u.U,y=u.g,A=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(Di[0]=U.toString()),U=Di);for(var H=0;H<U.length;H++){var et=ii(y,U[H],A||m.handleEvent,!1,m.h||m);if(!et)break;m.g[et.key]=et}m=u.H?b(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Kn(),vo(u.i,u.u,u.A,u.l,u.R,u.m)}on.prototype.ca=function(u){u=u.target;const m=this.M;m&&kn(u)==3?m.j():this.Y(u)},on.prototype.Y=function(u){try{if(u==this.g)t:{const xe=kn(this.g);var m=this.g.Ba();const Fi=this.g.Z();if(!(3>xe)&&(xe!=3||this.g&&(this.h.h||this.g.oa()||uu(this.g)))){this.J||xe!=4||m==7||(m==8||0>=Fi?Kn(3):Kn(2)),vr(this);var y=this.g.Z();this.X=y;e:if(nu(this)){var A=uu(this.g);u="";var U=A.length,H=kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qe(this),li(this);var et="";break e}this.h.i=new g.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,u+=this.h.i.decode(A[m],{stream:!(H&&m==U-1)});A.length=0,this.h.g+=u,this.C=0,et=this.h.g}else et=this.g.oa();if(this.o=y==200,Eh(this.i,this.u,this.A,this.l,this.R,xe,y),this.o){if(this.T&&!this.K){e:{if(this.g){var Lt,Ne=this.g;if((Lt=Ne.g?Ne.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ht(Lt)){var jt=Lt;break e}}jt=null}if(y=jt)yr(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ds(this,y);else{this.o=!1,this.s=3,oe(12),qe(this),li(this);break t}}if(this.P){y=!0;let He;for(;!this.J&&this.C<et.length;)if(He=iu(this,et),He==ea){xe==4&&(this.s=4,oe(14),y=!1),yr(this.i,this.l,null,"[Incomplete Response]");break}else if(He==Eo){this.s=4,oe(15),yr(this.i,this.l,et,"[Invalid Chunk]"),y=!1;break}else yr(this.i,this.l,He,null),ds(this,He);if(nu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xe!=4||et.length!=0||this.h.h||(this.s=1,oe(16),y=!1),this.o=this.o&&y,!y)yr(this.i,this.l,et,"[Invalid Chunked Response]"),qe(this),li(this);else if(0<et.length&&!this.W){this.W=!0;var Ue=this.j;Ue.g==this&&Ue.ba&&!Ue.M&&(Ue.j.info("Great, no buffering proxy detected. Bytes received: "+et.length),Ss(Ue),Ue.M=!0,oe(11))}}else yr(this.i,this.l,et,null),ds(this,et);xe==4&&qe(this),this.o&&!this.J&&(xe==4?mu(this.j,this):(this.o=!1,fs(this)))}else wh(this.g),y==400&&0<et.indexOf("Unknown SID")?(this.s=3,oe(12)):(this.s=0,oe(13)),qe(this),li(this)}}}catch{}finally{}};function nu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function iu(u,m){var y=u.C,A=m.indexOf(`
`,y);return A==-1?ea:(y=Number(m.substring(y,A)),isNaN(y)?Eo:(A+=1,A+y>m.length?ea:(m=m.slice(A,A+y),u.C=A+y,m)))}on.prototype.cancel=function(){this.J=!0,qe(this)};function fs(u){u.S=Date.now()+u.I,ru(u,u.I)}function ru(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ee(C(u.ba,u),m)}function vr(u){u.B&&(g.clearTimeout(u.B),u.B=null)}on.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(eu(this.i,this.A),this.L!=2&&(Kn(),oe(17)),qe(this),this.s=2,li(this)):ru(this,this.S-u)};function li(u){u.j.G==0||u.J||mu(u.j,u)}function qe(u){vr(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Oi(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function ds(u,m){try{var y=u.j;if(y.G!=0&&(y.g==u||To(y.h,u))){if(!u.K&&To(y.h,u)&&y.G==3){try{var A=y.Da.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){t:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)da(y),ha(y);else break t;Do(y),oe(18)}}else y.za=U[1],0<y.za-y.T&&37500>U[2]&&y.F&&y.v==0&&!y.C&&(y.C=Ee(C(y.Za,y),6e3));if(1>=ia(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Hi(y,11)}else if((u.K||y.g==u)&&da(y),!ht(m))for(U=y.Da.g.parse(m),m=0;m<U.length;m++){let jt=U[m];if(y.T=jt[0],jt=jt[1],y.G==2)if(jt[0]=="c"){y.K=jt[1],y.ia=jt[2];const Ue=jt[3];Ue!=null&&(y.la=Ue,y.j.info("VER="+y.la));const xe=jt[4];xe!=null&&(y.Aa=xe,y.j.info("SVER="+y.Aa));const Fi=jt[5];Fi!=null&&typeof Fi=="number"&&0<Fi&&(A=1.5*Fi,y.L=A,y.j.info("backChannelRequestTimeoutMs_="+A)),A=y;const He=u.g;if(He){const gi=He.g?He.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gi){var H=A.h;H.g||gi.indexOf("spdy")==-1&&gi.indexOf("quic")==-1&&gi.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(ra(H,H.h),H.h=null))}if(A.D){const Mo=He.g?He.g.getResponseHeader("X-HTTP-Session-Id"):null;Mo&&(A.ya=Mo,Jt(A.I,A.D,Mo))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),A=y;var et=u;if(A.qa=pu(A,A.J?A.ia:null,A.W),et.K){ln(A.h,et);var Lt=et,Ne=A.L;Ne&&(Lt.I=Ne),Lt.B&&(vr(Lt),fs(Lt)),A.g=et}else fu(A);0<y.i.length&&fa(y)}else jt[0]!="stop"&&jt[0]!="close"||Hi(y,7);else y.G==3&&(jt[0]=="stop"||jt[0]=="close"?jt[0]=="stop"?Hi(y,7):No(y):jt[0]!="noop"&&y.l&&y.l.ta(jt),y.v=0)}}Kn(4)}catch{}}var su=class{constructor(u,m){this.g=u,this.map=m}};function Ui(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function na(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ia(u){return u.h?1:u.g?u.g.size:0}function To(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ra(u,m){u.g?u.g.add(m):u.h=m}function ln(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ui.prototype.cancel=function(){if(this.i=Ao(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ao(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.D);return m}return it(u.i)}function Th(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],y=u.length,A=0;A<y;A++)m.push(u[A]);return m}m=[],y=0;for(A in u)m[y++]=u[A];return m}function sa(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var y=0;y<u;y++)m.push(y);return m}m=[],y=0;for(const A in u)m[y++]=A;return m}}}function bo(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var y=sa(u),A=Th(u),U=A.length,H=0;H<U;H++)m.call(void 0,A[H],y&&y[H],u)}var ms=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ah(u,m){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var A=u[y].indexOf("="),U=null;if(0<=A){var H=u[y].substring(0,A);U=u[y].substring(A+1)}else H=u[y];m(H,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Te(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Te){this.h=u.h,gs(this,u.j),this.o=u.o,this.g=u.g,Er(this,u.s),this.l=u.l;var m=u.i,y=new ji;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),Li(this,y),this.m=u.m}else u&&(m=String(u).match(ms))?(this.h=!1,gs(this,m[1]||"",!0),this.o=Mn(m[2]||""),this.g=Mn(m[3]||"",!0),Er(this,m[4]),this.l=Mn(m[5]||"",!0),Li(this,m[6]||"",!0),this.m=Mn(m[7]||"")):(this.h=!1,this.i=new ji(null,this.h))}Te.prototype.toString=function(){var u=[],m=this.j;m&&u.push(ys(m,So,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ys(m,So,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(ys(y,y.charAt(0)=="/"?bh:wo,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",ys(y,aa)),u.join("")};function En(u){return new Te(u)}function gs(u,m,y){u.j=y?Mn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Er(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Li(u,m,y){m instanceof ji?(u.i=m,ou(u.i,u.h)):(y||(m=ys(m,Sh)),u.i=new ji(m,u.h))}function Jt(u,m,y){u.i.set(m,y)}function ps(u){return Jt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Mn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ys(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,au),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function au(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var So=/[#\/\?@]/g,wo=/[#\?:]/g,bh=/[#\?]/g,Sh=/[#\?@]/g,aa=/#/g;function ji(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Vn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ah(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}r=ji.prototype,r.add=function(u,m){Vn(this),this.i=null,u=ui(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function zi(u,m){Vn(u),m=ui(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Bi(u,m){return Vn(u),m=ui(u,m),u.g.has(m)}r.forEach=function(u,m){Vn(this),this.g.forEach(function(y,A){y.forEach(function(U){u.call(m,U,A,this)},this)},this)},r.na=function(){Vn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let A=0;A<m.length;A++){const U=u[A];for(let H=0;H<U.length;H++)y.push(m[A])}return y},r.V=function(u){Vn(this);let m=[];if(typeof u=="string")Bi(this,u)&&(m=m.concat(this.g.get(ui(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)m=m.concat(u[y])}return m},r.set=function(u,m){return Vn(this),this.i=null,u=ui(this,u),Bi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Ro(u,m,y){zi(u,m),0<y.length&&(u.i=null,u.g.set(ui(u,m),it(y)),u.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var A=m[y];const H=encodeURIComponent(String(A)),et=this.V(A);for(A=0;A<et.length;A++){var U=H;et[A]!==""&&(U+="="+encodeURIComponent(String(et[A]))),u.push(U)}}return this.i=u.join("&")};function ui(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function ou(u,m){m&&!u.j&&(Vn(u),u.i=null,u.g.forEach(function(y,A){var U=A.toLowerCase();A!=U&&(zi(this,A),Ro(this,U,y))},u)),u.j=m}function _s(u,m){const y=new On;if(g.Image){const A=new Image;A.onload=F(Pn,y,"TestLoadImage: loaded",!0,m,A),A.onerror=F(Pn,y,"TestLoadImage: error",!1,m,A),A.onabort=F(Pn,y,"TestLoadImage: abort",!1,m,A),A.ontimeout=F(Pn,y,"TestLoadImage: timeout",!1,m,A),g.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else m(!1)}function Xn(u,m){const y=new On,A=new AbortController,U=setTimeout(()=>{A.abort(),Pn(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:A.signal}).then(H=>{clearTimeout(U),H.ok?Pn(y,"TestPingServer: ok",!0,m):Pn(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),Pn(y,"TestPingServer: error",!1,m)})}function Pn(u,m,y,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(y)}catch{}}function vs(){this.g=new Mi}function ci(u,m,y){const A=y||"";try{bo(u,function(U,H){let et=U;_(U)&&(et=dn(U)),m.push(A+H+"="+encodeURIComponent(et))})}catch(U){throw m.push(A+"type="+encodeURIComponent("_badmap")),U}}function Tr(u){this.l=u.Ub||null,this.j=u.eb||!1}J(Tr,cs),Tr.prototype.g=function(){return new qi(this.l,this.j)},Tr.prototype.i=function(u){return function(){return u}}({});function qi(u,m){ae.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}J(qi,ae),r=qi.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,fi(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hi(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,fi(this)),this.g&&(this.readyState=3,fi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Io(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Io(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?hi(this):fi(this),this.readyState==3&&Io(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,hi(this))},r.Qa=function(u){this.g&&(this.response=u,hi(this))},r.ga=function(){this.g&&hi(this)};function hi(u){u.readyState=4,u.l=null,u.j=null,u.v=null,fi(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function fi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Co(u){let m="";return Rt(u,function(y,A){m+=A,m+=":",m+=y,m+=`\r
`}),m}function ke(u,m,y){t:{for(A in y){var A=!1;break t}A=!0}A||(y=Co(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):Jt(u,m,y))}function Kt(u){ae.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}J(Kt,ae);var oa=/^https?$/i,Es=["POST","PUT"];r=Kt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,y,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ai.g(),this.v=this.o?Q(this.o):Q(ai),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){lu(this,H);return}if(u=y||"",y=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)y.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const H of A.keys())y.set(H,A.get(H));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(y.keys()).find(H=>H.toLowerCase()=="content-type"),U=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(Es,m,void 0))||A||U||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,et]of y)this.g.setRequestHeader(H,et);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ts(this),this.u=!0,this.g.send(u),this.u=!1}catch(H){lu(this,H)}};function lu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,la(u),di(u)}function la(u){u.A||(u.A=!0,Ft(u,"complete"),Ft(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ft(this,"complete"),Ft(this,"abort"),di(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),di(this,!0)),Kt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ua(this):this.bb())},r.bb=function(){ua(this)};function ua(u){if(u.h&&typeof f<"u"&&(!u.v[1]||kn(u)!=4||u.Z()!=2)){if(u.u&&kn(u)==4)Pe(u.Ea,0,u);else if(Ft(u,"readystatechange"),kn(u)==4){u.h=!1;try{const et=u.Z();t:switch(et){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var y;if(!(y=m)){var A;if(A=et===0){var U=String(u.D).match(ms)[1]||null;!U&&g.self&&g.self.location&&(U=g.self.location.protocol.slice(0,-1)),A=!oa.test(U?U.toLowerCase():"")}y=A}if(y)Ft(u,"complete"),Ft(u,"success");else{u.m=6;try{var H=2<kn(u)?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.Z()+"]",la(u)}}finally{di(u)}}}}function di(u,m){if(u.g){Ts(u);const y=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Ft(u,"ready");try{y.onreadystatechange=A}catch{}}}function Ts(u){u.I&&(g.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function kn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<kn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),pr(m)}};function uu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function wh(u){const m={};u=(u.g&&2<=kn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(ht(u[A]))continue;var y=V(u[A]);const U=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const H=m[U]||[];m[U]=H,H.push(y)}M(m,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function As(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function ca(u){this.Aa=0,this.i=[],this.j=new On,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=As("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=As("baseRetryDelayMs",5e3,u),this.cb=As("retryDelaySeedMs",1e4,u),this.Wa=As("forwardChannelMaxRetries",2,u),this.wa=As("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ui(u&&u.concurrentRequestLimit),this.Da=new vs,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ca.prototype,r.la=8,r.G=1,r.connect=function(u,m,y,A){oe(0),this.W=u,this.H=m||{},y&&A!==void 0&&(this.H.OSID=y,this.H.OAID=A),this.F=this.X,this.I=pu(this,null,this.W),fa(this)};function No(u){if(cu(u),u.G==3){var m=u.U++,y=En(u.I);if(Jt(y,"SID",u.K),Jt(y,"RID",m),Jt(y,"TYPE","terminate"),bs(u,y),m=new on(u,u.j,m),m.L=2,m.v=ps(En(y)),y=!1,g.navigator&&g.navigator.sendBeacon)try{y=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&g.Image&&(new Image().src=m.v,y=!0),y||(m.g=yu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),fs(m)}gu(u)}function ha(u){u.g&&(Ss(u),u.g.cancel(),u.g=null)}function cu(u){ha(u),u.u&&(g.clearTimeout(u.u),u.u=null),da(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function fa(u){if(!na(u.h)&&!u.s){u.s=!0;var m=u.Ga;rt||N(),ut||(rt(),ut=!0),Ut.add(m,u),u.B=0}}function Rh(u,m){return ia(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ee(C(u.Ga,u,m),Oo(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new on(this,this.j,u);let H=this.o;if(this.S&&(H?(H=b(H),O(H,this.S)):H=this.S),this.m!==null||this.O||(U.H=H,H=null),this.P)t:{for(var m=0,y=0;y<this.i.length;y++){e:{var A=this.i[y];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(m+=A,4096<m){m=y;break t}if(m===4096||y===this.i.length-1){m=y+1;break t}}m=1e3}else m=1e3;m=hu(this,U,m),y=En(this.I),Jt(y,"RID",u),Jt(y,"CVER",22),this.D&&Jt(y,"X-HTTP-Session-Id",this.D),bs(this,y),H&&(this.O?m="headers="+encodeURIComponent(String(Co(H)))+"&"+m:this.m&&ke(y,this.m,H)),ra(this.h,U),this.Ua&&Jt(y,"TYPE","init"),this.P?(Jt(y,"$req",m),Jt(y,"SID","null"),U.T=!0,Yn(U,y,null)):Yn(U,y,m),this.G=2}}else this.G==3&&(u?xo(this,u):this.i.length==0||na(this.h)||xo(this))};function xo(u,m){var y;m?y=m.l:y=u.U++;const A=En(u.I);Jt(A,"SID",u.K),Jt(A,"RID",y),Jt(A,"AID",u.T),bs(u,A),u.m&&u.o&&ke(A,u.m,u.o),y=new on(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),m&&(u.i=m.D.concat(u.i)),m=hu(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ra(u.h,y),Yn(y,A,m)}function bs(u,m){u.H&&Rt(u.H,function(y,A){Jt(m,A,y)}),u.l&&bo({},function(y,A){Jt(m,A,y)})}function hu(u,m,y){y=Math.min(u.i.length,y);var A=u.l?C(u.l.Na,u.l,u):null;t:{var U=u.i;let H=-1;for(;;){const et=["count="+y];H==-1?0<y?(H=U[0].g,et.push("ofs="+H)):H=0:et.push("ofs="+H);let Lt=!0;for(let Ne=0;Ne<y;Ne++){let jt=U[Ne].g;const Ue=U[Ne].map;if(jt-=H,0>jt)H=Math.max(0,U[Ne].g-100),Lt=!1;else try{ci(Ue,et,"req"+jt+"_")}catch{A&&A(Ue)}}if(Lt){A=et.join("&");break t}}}return u=u.i.splice(0,y),m.D=u,A}function fu(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;rt||N(),ut||(rt(),ut=!0),Ut.add(m,u),u.v=0}}function Do(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ee(C(u.Fa,u),Oo(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,du(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ee(C(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,oe(10),ha(this),du(this))};function Ss(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function du(u){u.g=new on(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=En(u.qa);Jt(m,"RID","rpc"),Jt(m,"SID",u.K),Jt(m,"AID",u.T),Jt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Jt(m,"TO",u.ja),Jt(m,"TYPE","xmlhttp"),bs(u,m),u.m&&u.o&&ke(m,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=ps(En(m)),y.m=null,y.P=!0,ki(y,u)}r.Za=function(){this.C!=null&&(this.C=null,ha(this),Do(this),oe(19))};function da(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function mu(u,m){var y=null;if(u.g==m){da(u),Ss(u),u.g=null;var A=2}else if(To(u.h,m))y=m.D,ln(u.h,m),A=1;else return;if(u.G!=0){if(m.o)if(A==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var U=u.B;A=si(),Ft(A,new Ce(A,y)),fa(u)}else fu(u);else if(U=m.s,U==3||U==0&&0<m.X||!(A==1&&Rh(u,m)||A==2&&Do(u)))switch(y&&0<y.length&&(m=u.h,m.i=m.i.concat(y)),U){case 1:Hi(u,5);break;case 4:Hi(u,10);break;case 3:Hi(u,6);break;default:Hi(u,2)}}}function Oo(u,m){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*m}function Hi(u,m){if(u.j.info("Error code "+m),m==2){var y=C(u.fb,u),A=u.Xa;const U=!A;A=new Te(A||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||gs(A,"https"),ps(A),U?_s(A.toString(),y):Xn(A.toString(),y)}else oe(2);u.G=0,u.l&&u.l.sa(m),gu(u),cu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),oe(2)):(this.j.info("Failed to ping google.com"),oe(1))};function gu(u){if(u.G=0,u.ka=[],u.l){const m=Ao(u.h);(m.length!=0||u.i.length!=0)&&(tt(u.ka,m),tt(u.ka,u.i),u.h.i.length=0,it(u.i),u.i.length=0),u.l.ra()}}function pu(u,m,y){var A=y instanceof Te?En(y):new Te(y);if(A.g!="")m&&(A.g=m+"."+A.g),Er(A,A.s);else{var U=g.location;A=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var H=new Te(null);A&&gs(H,A),m&&(H.g=m),U&&Er(H,U),y&&(H.l=y),A=H}return y=u.D,m=u.ya,y&&m&&Jt(A,y,m),Jt(A,"VER",u.la),bs(u,A),A}function yu(u,m,y){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Kt(new Tr({eb:y})):new Kt(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function _u(){}r=_u.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ma(){}ma.prototype.g=function(u,m){return new un(u,m)};function un(u,m){ae.call(this),this.g=new ca(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!ht(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ht(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new mi(this)}J(un,ae),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){No(this.g)},un.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=dn(u),u=y);m.i.push(new su(m.Ya++,u)),m.G==3&&fa(m)},un.prototype.N=function(){this.g.l=null,delete this.j,No(this.g),delete this.g,un.aa.N.call(this)};function vu(u){fe.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const y in m){u=y;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}J(vu,fe);function Eu(){de.call(this),this.status=1}J(Eu,de);function mi(u){this.g=u}J(mi,_u),mi.prototype.ua=function(){Ft(this.g,"a")},mi.prototype.ta=function(u){Ft(this.g,new vu(u))},mi.prototype.sa=function(u){Ft(this.g,new Eu)},mi.prototype.ra=function(){Ft(this.g,"b")},ma.prototype.createWebChannel=ma.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,sE=function(){return new ma},rE=function(){return si()},iE=Ie,Fd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_r.NO_ERROR=0,_r.TIMEOUT=8,_r.HTTP_ERROR=6,Dc=_r,Pi.COMPLETE="complete",nE=Pi,vt.EventType=Gt,Gt.OPEN="a",Gt.CLOSE="b",Gt.ERROR="c",Gt.MESSAGE="d",ae.prototype.listen=ae.prototype.K,Sl=vt,Kt.prototype.listenOnce=Kt.prototype.L,Kt.prototype.getLastError=Kt.prototype.Ka,Kt.prototype.getLastErrorCode=Kt.prototype.Ba,Kt.prototype.getStatus=Kt.prototype.Z,Kt.prototype.getResponseJson=Kt.prototype.Oa,Kt.prototype.getResponseText=Kt.prototype.oa,Kt.prototype.send=Kt.prototype.ea,Kt.prototype.setWithCredentials=Kt.prototype.Ha,eE=Kt}).apply(typeof Ac<"u"?Ac:typeof self<"u"?self:typeof window<"u"?window:{});const ev="@firebase/firestore",nv="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=new um("@firebase/firestore");function Ga(){return Ys.logLevel}function st(r,...t){if(Ys.logLevel<=Pt.DEBUG){const n=t.map(bm);Ys.debug(`Firestore (${fo}): ${r}`,...n)}}function hr(r,...t){if(Ys.logLevel<=Pt.ERROR){const n=t.map(bm);Ys.error(`Firestore (${fo}): ${r}`,...n)}}function eo(r,...t){if(Ys.logLevel<=Pt.WARN){const n=t.map(bm);Ys.warn(`Firestore (${fo}): ${r}`,...n)}}function bm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,aE(r,s,n)}function aE(r,t,n){let s=`FIRESTORE (${fo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw hr(s),new Error(s)}function Yt(r,t,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||aE(t,l,s)}function It(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lt extends dr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class TR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(nn.UNAUTHENTICATED))}shutdown(){}}class AR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bR{constructor(t){this.t=t,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Yt(this.o===void 0,42304);let s=this.i;const l=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let c=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Jr,t.enqueueRetryable(()=>l(this.currentUser))};const f=()=>{const p=c;t.enqueueRetryable(async()=>{await p.promise,await l(this.currentUser)})},g=p=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(p=>g(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Jr)}},0),f()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Yt(typeof s.accessToken=="string",31837,{l:s}),new oE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Yt(t===null||typeof t=="string",2055,{h:t}),new nn(t)}}class SR{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wR{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new SR(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RR{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Cn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Yt(this.o===void 0,3512);const s=c=>{c.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,st("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable(()=>s(c))};const l=c=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>l(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new iv(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Yt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new iv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=IR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=t.charAt(l[c]%62))}return s}}function xt(r,t){return r<t?-1:r>t?1:0}function Gd(r,t){let n=0;for(;n<r.length&&n<t.length;){const s=r.codePointAt(n),l=t.codePointAt(n);if(s!==l){if(s<128&&l<128)return xt(s,l);{const c=lE(),f=CR(c.encode(rv(r,n)),c.encode(rv(t,n)));return f!==0?f:xt(s,l)}}n+=s>65535?2:1}return xt(r.length,t.length)}function rv(r,t){return r.codePointAt(t)>65535?r.substring(t,t+2):r.substring(t,t+1)}function CR(r,t){for(let n=0;n<r.length&&n<t.length;++n)if(r[n]!==t[n])return xt(r[n],t[n]);return xt(r.length,t.length)}function no(r,t,n){return r.length===t.length&&r.every((s,l)=>n(s,t[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=-62135596800,av=1e6;class Me{static now(){return Me.fromMillis(Date.now())}static fromDate(t){return Me.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*av);return new Me(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new lt(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new lt(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<sv)throw new lt(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new lt(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/av}_compareTo(t){return this.seconds===t.seconds?xt(this.nanoseconds,t.nanoseconds):xt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-sv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{static fromTimestamp(t){return new wt(t)}static min(){return new wt(new Me(0,0))}static max(){return new wt(new Me(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="__name__";class Ti{constructor(t,n,s){n===void 0?n=0:n>t.length&&Tt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&Tt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return Ti.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Ti?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let l=0;l<s;l++){const c=Ti.compareSegments(t.get(l),n.get(l));if(c!==0)return c}return xt(t.length,n.length)}static compareSegments(t,n){const s=Ti.isNumericId(t),l=Ti.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?Ti.extractNumericId(t).compare(Ti.extractNumericId(n)):Gd(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Zr.fromString(t.substring(4,t.length-2))}}class re extends Ti{construct(t,n,s){return new re(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new lt(Z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(l=>l.length>0))}return new re(n)}static emptyPath(){return new re([])}}const NR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ye extends Ti{construct(t,n,s){return new Ye(t,n,s)}static isValidIdentifier(t){return NR.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ye.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ov}static keyField(){return new Ye([ov])}static fromServerFormat(t){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new lt(Z.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;l<t.length;){const g=t[l];if(g==="\\"){if(l+1===t.length)throw new lt(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[l+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new lt(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=p,l+=2}else g==="`"?(f=!f,l++):g!=="."||f?(s+=g,l++):(c(),l++)}if(c(),f)throw new lt(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ye(n)}static emptyPath(){return new Ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t){this.path=t}static fromPath(t){return new dt(re.fromString(t))}static fromName(t){return new dt(re.fromString(t).popFirst(5))}static empty(){return new dt(re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&re.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return re.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new dt(new re(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=-1;function xR(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=wt.fromTimestamp(s===1e9?new Me(n+1,0):new Me(n,s));return new ts(l,dt.empty(),t)}function DR(r){return new ts(r.readTime,r.key,kl)}class ts{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new ts(wt.min(),dt.empty(),kl)}static max(){return new ts(wt.max(),dt.empty(),kl)}}function OR(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=dt.comparator(r.documentKey,t.documentKey),n!==0?n:xt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==MR)throw r;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new $((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):$.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):$.reject(n)}static resolve(t){return new $((n,s)=>{n(t)})}static reject(t){return new $((n,s)=>{s(t)})}static waitFor(t){return new $((n,s)=>{let l=0,c=0,f=!1;t.forEach(g=>{++l,g.next(()=>{++c,f&&c===l&&n()},p=>s(p))}),f=!0,c===l&&n()})}static or(t){let n=$.resolve(!1);for(const s of t)n=n.next(l=>l?$.resolve(l):s());return n}static forEach(t,n){const s=[];return t.forEach((l,c)=>{s.push(n.call(this,l,c))}),this.waitFor(s)}static mapArray(t,n){return new $((s,l)=>{const c=t.length,f=new Array(c);let g=0;for(let p=0;p<c;p++){const _=p;n(t[_]).next(T=>{f[_]=T,++g,g===c&&s(f)},T=>l(T))}})}static doWhile(t,n){return new $((s,l)=>{const c=()=>{t()===!0?n().next(()=>{c()},l):s()};c()})}}function PR(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function go(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}ah.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm=-1;function oh(r){return r==null}function Gc(r){return r===0&&1/r==-1/0}function kR(r){return typeof r=="number"&&Number.isInteger(r)&&!Gc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="";function UR(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=lv(t)),t=LR(r.get(n),t);return lv(t)}function LR(r,t){let n=t;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case cE:n+="";break;default:n+=c}}return n}function lv(r){return r+cE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function $s(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function hE(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(t,n){this.comparator=t,this.root=n||Ke.EMPTY}insert(t,n){return new ce(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(t){return new ce(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new bc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new bc(this.root,t,this.comparator,!1)}getReverseIterator(){return new bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new bc(this.root,t,this.comparator,!0)}}class bc{constructor(t,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=n?s(t.key,n):1,n&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ke{constructor(t,n,s,l,c){this.key=t,this.value=n,this.color=s??Ke.RED,this.left=l??Ke.EMPTY,this.right=c??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,l,c){return new Ke(t??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let l=this;const c=s(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return Ke.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Tt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Tt(27949);return t+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw Tt(57766)}get value(){throw Tt(16141)}get color(){throw Tt(16727)}get left(){throw Tt(29726)}get right(){throw Tt(36894)}copy(t,n,s,l,c){return this}insert(t,n,s){return new Ke(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(t){this.comparator=t,this.data=new ce(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new cv(this.data.getIterator())}getIteratorFrom(t){return new cv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof Ve)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ve(this.comparator);return n.data=t,n}}class cv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(t){this.fields=t,t.sort(Ye.comparator)}static empty(){return new ti([])}unionWith(t){let n=new Ve(Ye.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new ti(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return no(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new fE("Invalid base64 string: "+c):c}}(t);return new $e(n)}static fromUint8Array(t){const n=function(l){let c="";for(let f=0;f<l.length;++f)c+=String.fromCharCode(l[f]);return c}(t);return new $e(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return xt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}$e.EMPTY_BYTE_STRING=new $e("");const jR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function es(r){if(Yt(!!r,39018),typeof r=="string"){let t=0;const n=jR.exec(r);if(Yt(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ve(r.seconds),nanos:ve(r.nanos)}}function ve(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ns(r){return typeof r=="string"?$e.fromBase64String(r):$e.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="server_timestamp",mE="__type__",gE="__previous_value__",pE="__local_write_time__";function wm(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)===null||t===void 0?void 0:t.fields)||{})[mE])===null||n===void 0?void 0:n.stringValue)===dE}function lh(r){const t=r.mapValue.fields[gE];return wm(t)?lh(t):t}function Ul(r){const t=es(r.mapValue.fields[pE].timestampValue);return new Me(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(t,n,s,l,c,f,g,p,_,T){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=_,this.isUsingEmulator=T}}const Qc="(default)";class Ll{constructor(t,n){this.projectId=t,this.database=n||Qc}static empty(){return new Ll("","")}get isDefaultDatabase(){return this.database===Qc}isEqual(t){return t instanceof Ll&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="__type__",BR="__max__",Sc={mapValue:{}},_E="__vector__",Kc="value";function is(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?wm(r)?4:HR(r)?9007199254740991:qR(r)?10:11:Tt(28295,{value:r})}function Ri(r,t){if(r===t)return!0;const n=is(r);if(n!==is(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Ul(r).isEqual(Ul(t));case 3:return function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const f=es(l.timestampValue),g=es(c.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos}(r,t);case 5:return r.stringValue===t.stringValue;case 6:return function(l,c){return ns(l.bytesValue).isEqual(ns(c.bytesValue))}(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return function(l,c){return ve(l.geoPointValue.latitude)===ve(c.geoPointValue.latitude)&&ve(l.geoPointValue.longitude)===ve(c.geoPointValue.longitude)}(r,t);case 2:return function(l,c){if("integerValue"in l&&"integerValue"in c)return ve(l.integerValue)===ve(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const f=ve(l.doubleValue),g=ve(c.doubleValue);return f===g?Gc(f)===Gc(g):isNaN(f)&&isNaN(g)}return!1}(r,t);case 9:return no(r.arrayValue.values||[],t.arrayValue.values||[],Ri);case 10:case 11:return function(l,c){const f=l.mapValue.fields||{},g=c.mapValue.fields||{};if(uv(f)!==uv(g))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(g[p]===void 0||!Ri(f[p],g[p])))return!1;return!0}(r,t);default:return Tt(52216,{left:r})}}function jl(r,t){return(r.values||[]).find(n=>Ri(n,t))!==void 0}function io(r,t){if(r===t)return 0;const n=is(r),s=is(t);if(n!==s)return xt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return xt(r.booleanValue,t.booleanValue);case 2:return function(c,f){const g=ve(c.integerValue||c.doubleValue),p=ve(f.integerValue||f.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1}(r,t);case 3:return hv(r.timestampValue,t.timestampValue);case 4:return hv(Ul(r),Ul(t));case 5:return Gd(r.stringValue,t.stringValue);case 6:return function(c,f){const g=ns(c),p=ns(f);return g.compareTo(p)}(r.bytesValue,t.bytesValue);case 7:return function(c,f){const g=c.split("/"),p=f.split("/");for(let _=0;_<g.length&&_<p.length;_++){const T=xt(g[_],p[_]);if(T!==0)return T}return xt(g.length,p.length)}(r.referenceValue,t.referenceValue);case 8:return function(c,f){const g=xt(ve(c.latitude),ve(f.latitude));return g!==0?g:xt(ve(c.longitude),ve(f.longitude))}(r.geoPointValue,t.geoPointValue);case 9:return fv(r.arrayValue,t.arrayValue);case 10:return function(c,f){var g,p,_,T;const w=c.fields||{},C=f.fields||{},F=(g=w[Kc])===null||g===void 0?void 0:g.arrayValue,J=(p=C[Kc])===null||p===void 0?void 0:p.arrayValue,it=xt(((_=F==null?void 0:F.values)===null||_===void 0?void 0:_.length)||0,((T=J==null?void 0:J.values)===null||T===void 0?void 0:T.length)||0);return it!==0?it:fv(F,J)}(r.mapValue,t.mapValue);case 11:return function(c,f){if(c===Sc.mapValue&&f===Sc.mapValue)return 0;if(c===Sc.mapValue)return 1;if(f===Sc.mapValue)return-1;const g=c.fields||{},p=Object.keys(g),_=f.fields||{},T=Object.keys(_);p.sort(),T.sort();for(let w=0;w<p.length&&w<T.length;++w){const C=Gd(p[w],T[w]);if(C!==0)return C;const F=io(g[p[w]],_[T[w]]);if(F!==0)return F}return xt(p.length,T.length)}(r.mapValue,t.mapValue);default:throw Tt(23264,{Pe:n})}}function hv(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return xt(r,t);const n=es(r),s=es(t),l=xt(n.seconds,s.seconds);return l!==0?l:xt(n.nanos,s.nanos)}function fv(r,t){const n=r.values||[],s=t.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=io(n[l],s[l]);if(c)return c}return xt(n.length,s.length)}function ro(r){return Qd(r)}function Qd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=es(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return ns(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return dt.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=Qd(c);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const f of s)c?c=!1:l+=",",l+=`${f}:${Qd(n.fields[f])}`;return l+"}"}(r.mapValue):Tt(61005,{value:r})}function Oc(r){switch(is(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=lh(r);return t?16+Oc(t):16;case 5:return 2*r.stringValue.length;case 6:return ns(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((l,c)=>l+Oc(c),0)}(r.arrayValue);case 10:case 11:return function(s){let l=0;return $s(s.fields,(c,f)=>{l+=c.length+Oc(f)}),l}(r.mapValue);default:throw Tt(13486,{value:r})}}function dv(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function Kd(r){return!!r&&"integerValue"in r}function Rm(r){return!!r&&"arrayValue"in r}function mv(r){return!!r&&"nullValue"in r}function gv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Mc(r){return!!r&&"mapValue"in r}function qR(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)===null||t===void 0?void 0:t.fields)||{})[yE])===null||n===void 0?void 0:n.stringValue)===_E}function xl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const t={mapValue:{fields:{}}};return $s(r.mapValue.fields,(n,s)=>t.mapValue.fields[n]=xl(s)),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=xl(r.arrayValue.values[n]);return t}return Object.assign({},r)}function HR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===BR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(t){this.value=t}static empty(){return new Fn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Mc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=xl(n)}setAll(t){let n=Ye.emptyPath(),s={},l=[];t.forEach((f,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,s,l),s={},l=[],n=g.popLast()}f?s[g.lastSegment()]=xl(f):l.push(g.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(t){const n=this.field(t.popLast());Mc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ri(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=n.mapValue.fields[t.get(s)];Mc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,s){$s(n,(l,c)=>t[l]=c);for(const l of s)delete t[l]}clone(){return new Fn(xl(this.value))}}function vE(r){const t=[];return $s(r.fields,(n,s)=>{const l=new Ye([n]);if(Mc(s)){const c=vE(s.mapValue).fields;if(c.length===0)t.push(l);else for(const f of c)t.push(l.child(f))}else t.push(l)}),new ti(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t,n,s,l,c,f,g){this.key=t,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=f,this.documentState=g}static newInvalidDocument(t){return new rn(t,0,wt.min(),wt.min(),wt.min(),Fn.empty(),0)}static newFoundDocument(t,n,s,l){return new rn(t,1,n,wt.min(),s,l,0)}static newNoDocument(t,n){return new rn(t,2,n,wt.min(),wt.min(),Fn.empty(),0)}static newUnknownDocument(t,n){return new rn(t,3,n,wt.min(),wt.min(),Fn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof rn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(t,n){this.position=t,this.inclusive=n}}function pv(r,t,n){let s=0;for(let l=0;l<r.position.length;l++){const c=t[l],f=r.position[l];if(c.field.isKeyField()?s=dt.comparator(dt.fromName(f.referenceValue),n.key):s=io(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function yv(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Ri(r.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(t,n="asc"){this.field=t,this.dir=n}}function FR(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{}class we extends EE{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new QR(t,n,s):n==="array-contains"?new XR(t,s):n==="in"?new $R(t,s):n==="not-in"?new ZR(t,s):n==="array-contains-any"?new JR(t,s):new we(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new KR(t,s):new YR(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(io(n,this.value)):n!==null&&is(this.value)===is(n)&&this.matchesComparison(io(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ni extends EE{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new ni(t,n)}matches(t){return TE(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function TE(r){return r.op==="and"}function AE(r){return GR(r)&&TE(r)}function GR(r){for(const t of r.filters)if(t instanceof ni)return!1;return!0}function Yd(r){if(r instanceof we)return r.field.canonicalString()+r.op.toString()+ro(r.value);if(AE(r))return r.filters.map(t=>Yd(t)).join(",");{const t=r.filters.map(n=>Yd(n)).join(",");return`${r.op}(${t})`}}function bE(r,t){return r instanceof we?function(s,l){return l instanceof we&&s.op===l.op&&s.field.isEqual(l.field)&&Ri(s.value,l.value)}(r,t):r instanceof ni?function(s,l){return l instanceof ni&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce((c,f,g)=>c&&bE(f,l.filters[g]),!0):!1}(r,t):void Tt(19439)}function SE(r){return r instanceof we?function(n){return`${n.field.canonicalString()} ${n.op} ${ro(n.value)}`}(r):r instanceof ni?function(n){return n.op.toString()+" {"+n.getFilters().map(SE).join(" ,")+"}"}(r):"Filter"}class QR extends we{constructor(t,n,s){super(t,n,s),this.key=dt.fromName(s.referenceValue)}matches(t){const n=dt.comparator(t.key,this.key);return this.matchesComparison(n)}}class KR extends we{constructor(t,n){super(t,"in",n),this.keys=wE("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class YR extends we{constructor(t,n){super(t,"not-in",n),this.keys=wE("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function wE(r,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>dt.fromName(s.referenceValue))}class XR extends we{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Rm(n)&&jl(n.arrayValue,this.value)}}class $R extends we{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&jl(this.value.arrayValue,n)}}class ZR extends we{constructor(t,n){super(t,"not-in",n)}matches(t){if(jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!jl(this.value.arrayValue,n)}}class JR extends we{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Rm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>jl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(t,n=null,s=[],l=[],c=null,f=null,g=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=f,this.endAt=g,this.Ie=null}}function _v(r,t=null,n=[],s=[],l=null,c=null,f=null){return new WR(r,t,n,s,l,c,f)}function Im(r){const t=It(r);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>Yd(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),oh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>ro(s)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>ro(s)).join(",")),t.Ie=n}return t.Ie}function Cm(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!FR(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!bE(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!yv(r.startAt,t.startAt)&&yv(r.endAt,t.endAt)}function Xd(r){return dt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(t,n=null,s=[],l=[],c=null,f="F",g=null,p=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=f,this.startAt=g,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function tI(r,t,n,s,l,c,f,g){return new Xl(r,t,n,s,l,c,f,g)}function uh(r){return new Xl(r)}function vv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function RE(r){return r.collectionGroup!==null}function Dl(r){const t=It(r);if(t.Ee===null){t.Ee=[];const n=new Set;for(const c of t.explicitOrderBy)t.Ee.push(c),n.add(c.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new Ve(Ye.comparator);return f.filters.forEach(p=>{p.getFlattenedFilters().forEach(_=>{_.isInequality()&&(g=g.add(_.field))})}),g})(t).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||t.Ee.push(new Xc(c,s))}),n.has(Ye.keyField().canonicalString())||t.Ee.push(new Xc(Ye.keyField(),s))}return t.Ee}function bi(r){const t=It(r);return t.de||(t.de=eI(t,Dl(r))),t.de}function eI(r,t){if(r.limitType==="F")return _v(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map(l=>{const c=l.dir==="desc"?"asc":"desc";return new Xc(l.field,c)});const n=r.endAt?new Yc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Yc(r.startAt.position,r.startAt.inclusive):null;return _v(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function $d(r,t){const n=r.filters.concat([t]);return new Xl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function Zd(r,t,n){return new Xl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function ch(r,t){return Cm(bi(r),bi(t))&&r.limitType===t.limitType}function IE(r){return`${Im(bi(r))}|lt:${r.limitType}`}function Qa(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(l=>SE(l)).join(", ")}]`),oh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(l=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(l)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(l=>ro(l)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(l=>ro(l)).join(",")),`Target(${s})`}(bi(r))}; limitType=${r.limitType})`}function hh(r,t){return t.isFoundDocument()&&function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):dt.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(r,t)&&function(s,l){for(const c of Dl(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0}(r,t)&&function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0}(r,t)&&function(s,l){return!(s.startAt&&!function(f,g,p){const _=pv(f,g,p);return f.inclusive?_<=0:_<0}(s.startAt,Dl(s),l)||s.endAt&&!function(f,g,p){const _=pv(f,g,p);return f.inclusive?_>=0:_>0}(s.endAt,Dl(s),l))}(r,t)}function nI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function CE(r){return(t,n)=>{let s=!1;for(const l of Dl(r)){const c=iI(l,t,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function iI(r,t,n){const s=r.field.isKeyField()?dt.comparator(t.key,n.key):function(c,f,g){const p=f.data.field(c),_=g.data.field(c);return p!==null&&_!==null?io(p,_):Tt(42886)}(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Tt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){$s(this.inner,(n,s)=>{for(const[l,c]of s)t(l,c)})}isEmpty(){return hE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=new ce(dt.comparator);function fr(){return rI}const NE=new ce(dt.comparator);function wl(...r){let t=NE;for(const n of r)t=t.insert(n.key,n);return t}function xE(r){let t=NE;return r.forEach((n,s)=>t=t.insert(n,s.overlayedDocument)),t}function Hs(){return Ol()}function DE(){return Ol()}function Ol(){return new Zs(r=>r.toString(),(r,t)=>r.isEqual(t))}const sI=new ce(dt.comparator),aI=new Ve(dt.comparator);function kt(...r){let t=aI;for(const n of r)t=t.add(n);return t}const oI=new Ve(xt);function lI(){return oI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gc(t)?"-0":t}}function OE(r){return{integerValue:""+r}}function uI(r,t){return kR(t)?OE(t):Nm(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this._=void 0}}function cI(r,t,n){return r instanceof zl?function(l,c){const f={fields:{[mE]:{stringValue:dE},[pE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&wm(c)&&(c=lh(c)),c&&(f.fields[gE]=c),{mapValue:f}}(n,t):r instanceof Bl?VE(r,t):r instanceof ql?PE(r,t):function(l,c){const f=ME(l,c),g=Ev(f)+Ev(l.Re);return Kd(f)&&Kd(l.Re)?OE(g):Nm(l.serializer,g)}(r,t)}function hI(r,t,n){return r instanceof Bl?VE(r,t):r instanceof ql?PE(r,t):n}function ME(r,t){return r instanceof $c?function(s){return Kd(s)||function(c){return!!c&&"doubleValue"in c}(s)}(t)?t:{integerValue:0}:null}class zl extends fh{}class Bl extends fh{constructor(t){super(),this.elements=t}}function VE(r,t){const n=kE(t);for(const s of r.elements)n.some(l=>Ri(l,s))||n.push(s);return{arrayValue:{values:n}}}class ql extends fh{constructor(t){super(),this.elements=t}}function PE(r,t){let n=kE(t);for(const s of r.elements)n=n.filter(l=>!Ri(l,s));return{arrayValue:{values:n}}}class $c extends fh{constructor(t,n){super(),this.serializer=t,this.Re=n}}function Ev(r){return ve(r.integerValue||r.doubleValue)}function kE(r){return Rm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(t,n){this.field=t,this.transform=n}}function dI(r,t){return r.field.isEqual(t.field)&&function(s,l){return s instanceof Bl&&l instanceof Bl||s instanceof ql&&l instanceof ql?no(s.elements,l.elements,Ri):s instanceof $c&&l instanceof $c?Ri(s.Re,l.Re):s instanceof zl&&l instanceof zl}(r.transform,t.transform)}class mI{constructor(t,n){this.version=t,this.transformResults=n}}class Si{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Si}static exists(t){return new Si(void 0,t)}static updateTime(t){return new Si(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Vc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class dh{}function UE(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new xm(r.key,Si.none()):new $l(r.key,r.data,Si.none());{const n=r.data,s=Fn.empty();let l=new Ve(Ye.comparator);for(let c of t.fields)if(!l.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),l=l.add(c)}return new Js(r.key,s,new ti(l.toArray()),Si.none())}}function gI(r,t,n){r instanceof $l?function(l,c,f){const g=l.value.clone(),p=Av(l.fieldTransforms,c,f.transformResults);g.setAll(p),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(r,t,n):r instanceof Js?function(l,c,f){if(!Vc(l.precondition,c))return void c.convertToUnknownDocument(f.version);const g=Av(l.fieldTransforms,c,f.transformResults),p=c.data;p.setAll(LE(l)),p.setAll(g),c.convertToFoundDocument(f.version,p).setHasCommittedMutations()}(r,t,n):function(l,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()}(0,t,n)}function Ml(r,t,n,s){return r instanceof $l?function(c,f,g,p){if(!Vc(c.precondition,f))return g;const _=c.value.clone(),T=bv(c.fieldTransforms,p,f);return _.setAll(T),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),null}(r,t,n,s):r instanceof Js?function(c,f,g,p){if(!Vc(c.precondition,f))return g;const _=bv(c.fieldTransforms,p,f),T=f.data;return T.setAll(LE(c)),T.setAll(_),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(w=>w.field))}(r,t,n,s):function(c,f,g){return Vc(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g}(r,t,n)}function pI(r,t){let n=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),c=ME(s.transform,l||null);c!=null&&(n===null&&(n=Fn.empty()),n.set(s.field,c))}return n||null}function Tv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&no(s,l,(c,f)=>dI(c,f))}(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class $l extends dh{constructor(t,n,s,l=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Js extends dh{constructor(t,n,s,l,c=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function LE(r){const t=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}}),t}function Av(r,t,n){const s=new Map;Yt(r.length===n.length,32656,{Ve:n.length,me:r.length});for(let l=0;l<n.length;l++){const c=r[l],f=c.transform,g=t.data.field(c.field);s.set(c.field,hI(f,g,n[l]))}return s}function bv(r,t,n){const s=new Map;for(const l of r){const c=l.transform,f=n.data.field(l.field);s.set(l.field,cI(c,f,t))}return s}class xm extends dh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yI extends dh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(t,n,s,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&gI(c,t,s[l])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=Ml(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=Ml(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=DE();return this.mutations.forEach(l=>{const c=t.get(l.key),f=c.overlayedDocument;let g=this.applyToLocalView(f,c.mutatedFields);g=n.has(l.key)?null:g;const p=UE(f,g);p!==null&&s.set(l.key,p),f.isValidDocument()||f.convertToNoDocument(wt.min())}),s}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),kt())}isEqual(t){return this.batchId===t.batchId&&no(this.mutations,t.mutations,(n,s)=>Tv(n,s))&&no(this.baseMutations,t.baseMutations,(n,s)=>Tv(n,s))}}class Dm{constructor(t,n,s,l){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(t,n,s){Yt(t.mutations.length===s.length,58842,{fe:t.mutations.length,ge:s.length});let l=function(){return sI}();const c=t.mutations;for(let f=0;f<c.length;f++)l=l.insert(c[f].key,s[f].version);return new Dm(t,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se,Bt;function TI(r){switch(r){case Z.OK:return Tt(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Tt(15467,{code:r})}}function jE(r){if(r===void 0)return hr("GRPC error has no .code"),Z.UNKNOWN;switch(r){case Se.OK:return Z.OK;case Se.CANCELLED:return Z.CANCELLED;case Se.UNKNOWN:return Z.UNKNOWN;case Se.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Se.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Se.INTERNAL:return Z.INTERNAL;case Se.UNAVAILABLE:return Z.UNAVAILABLE;case Se.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Se.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Se.NOT_FOUND:return Z.NOT_FOUND;case Se.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Se.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Se.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Se.ABORTED:return Z.ABORTED;case Se.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Se.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Se.DATA_LOSS:return Z.DATA_LOSS;default:return Tt(39323,{code:r})}}(Bt=Se||(Se={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=new Zr([4294967295,4294967295],0);function Sv(r){const t=lE().encode(r),n=new tE;return n.update(t),new Uint8Array(n.digest())}function wv(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Zr([n,s],0),new Zr([l,c],0)]}class Om{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Rl(`Invalid padding: ${n}`);if(s<0)throw new Rl(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Rl(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new Rl(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=Zr.fromNumber(this.pe)}we(t,n,s){let l=t.add(n.multiply(Zr.fromNumber(s)));return l.compare(AI)===1&&(l=new Zr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=Sv(t),[s,l]=wv(n);for(let c=0;c<this.hashCount;c++){const f=this.we(s,l,c);if(!this.be(f))return!1}return!0}static create(t,n,s){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),f=new Om(c,l,n);return s.forEach(g=>f.insert(g)),f}insert(t){if(this.pe===0)return;const n=Sv(t),[s,l]=wv(n);for(let c=0;c<this.hashCount;c++){const f=this.we(s,l,c);this.Se(f)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class Rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(t,n,s,l,c){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const l=new Map;return l.set(t,Zl.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new mh(wt.min(),l,new ce(xt),fr(),kt())}}class Zl{constructor(t,n,s,l,c){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new Zl(s,n,kt(),kt(),kt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(t,n,s,l){this.De=t,this.removedTargetIds=n,this.key=s,this.ve=l}}class zE{constructor(t,n){this.targetId=t,this.Ce=n}}class BE{constructor(t,n,s=$e.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=l}}class Rv{constructor(){this.Fe=0,this.Me=Iv(),this.xe=$e.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=kt(),n=kt(),s=kt();return this.Me.forEach((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:Tt(38017,{changeType:c})}}),new Zl(this.xe,this.Oe,t,n,s)}Qe(){this.Ne=!1,this.Me=Iv()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,Yt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class bI{constructor(t){this.ze=t,this.je=new Map,this.He=fr(),this.Je=wc(),this.Ye=wc(),this.Ze=new ce(xt)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const s=this.rt(n);switch(t.state){case 0:this.it(n)&&s.ke(t.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(t.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(t.resumeToken));break;default:Tt(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((s,l)=>{this.it(l)&&n(l)})}ot(t){const n=t.targetId,s=t.Ce.count,l=this._t(n);if(l){const c=l.target;if(Xd(c))if(s===0){const f=new dt(c.path);this.tt(n,f,rn.newNoDocument(f,wt.min()))}else Yt(s===1,20013,{expectedCount:s});else{const f=this.ut(n);if(f!==s){const g=this.ct(t),p=g?this.lt(g,t,f):1;if(p!==0){this.st(n);const _=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,_)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let f,g;try{f=ns(s).toUint8Array()}catch(p){if(p instanceof fE)return eo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new Om(f,l,c)}catch(p){return eo(p instanceof Rl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.pe===0?null:g}lt(t,n,s){return n.Ce.count===s-this.Tt(t,n.targetId)?0:2}Tt(t,n){const s=this.ze.getRemoteKeysForTarget(n);let l=0;return s.forEach(c=>{const f=this.ze.Pt(),g=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;t.mightContain(g)||(this.tt(n,c,null),l++)}),l}It(t){const n=new Map;this.je.forEach((c,f)=>{const g=this._t(f);if(g){if(c.current&&Xd(g.target)){const p=new dt(g.target.path);this.Et(p).has(f)||this.dt(f,p)||this.tt(f,p,rn.newNoDocument(p,t))}c.Le&&(n.set(f,c.qe()),c.Qe())}});let s=kt();this.Ye.forEach((c,f)=>{let g=!0;f.forEachWhile(p=>{const _=this._t(p);return!_||_.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(s=s.add(c))}),this.He.forEach((c,f)=>f.setReadTime(t));const l=new mh(t,n,this.Ze,this.He,s);return this.He=fr(),this.Je=wc(),this.Ye=wc(),this.Ze=new ce(xt),l}et(t,n){if(!this.it(t))return;const s=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,s){if(!this.it(t))return;const l=this.rt(t);this.dt(t,n)?l.$e(n,1):l.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),s&&(this.He=this.He.insert(n,s))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new Rv,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new Ve(xt),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new Ve(xt),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||st("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new Rv),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function wc(){return new ce(dt.comparator)}function Iv(){return new ce(dt.comparator)}const SI={asc:"ASCENDING",desc:"DESCENDING"},wI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RI={and:"AND",or:"OR"};class II{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Jd(r,t){return r.useProto3Json||oh(t)?t:{value:t}}function Zc(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function qE(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function CI(r,t){return Zc(r,t.toTimestamp())}function wi(r){return Yt(!!r,49232),wt.fromTimestamp(function(n){const s=es(n);return new Me(s.seconds,s.nanos)}(r))}function Mm(r,t){return Wd(r,t).canonicalString()}function Wd(r,t){const n=function(l){return new re(["projects",l.projectId,"databases",l.database])}(r).child("documents");return t===void 0?n:n.child(t)}function HE(r){const t=re.fromString(r);return Yt(YE(t),10190,{key:t.toString()}),t}function tm(r,t){return Mm(r.databaseId,t.path)}function Dd(r,t){const n=HE(t);if(n.get(1)!==r.databaseId.projectId)throw new lt(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new lt(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new dt(GE(n))}function FE(r,t){return Mm(r.databaseId,t)}function NI(r){const t=HE(r);return t.length===4?re.emptyPath():GE(t)}function em(r){return new re(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function GE(r){return Yt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Cv(r,t,n){return{name:tm(r,t),fields:n.value.mapValue.fields}}function xI(r,t){let n;if("targetChange"in t){t.targetChange;const s=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Tt(39313,{state:_})}(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=function(_,T){return _.useProto3Json?(Yt(T===void 0||typeof T=="string",58123),$e.fromBase64String(T||"")):(Yt(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),$e.fromUint8Array(T||new Uint8Array))}(r,t.targetChange.resumeToken),f=t.targetChange.cause,g=f&&function(_){const T=_.code===void 0?Z.UNKNOWN:jE(_.code);return new lt(T,_.message||"")}(f);n=new BE(s,l,c,g||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=Dd(r,s.document.name),c=wi(s.document.updateTime),f=s.document.createTime?wi(s.document.createTime):wt.min(),g=new Fn({mapValue:{fields:s.document.fields}}),p=rn.newFoundDocument(l,c,f,g),_=s.targetIds||[],T=s.removedTargetIds||[];n=new Pc(_,T,p.key,p)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=Dd(r,s.document),c=s.readTime?wi(s.readTime):wt.min(),f=rn.newNoDocument(l,c),g=s.removedTargetIds||[];n=new Pc([],g,f.key,f)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=Dd(r,s.document),c=s.removedTargetIds||[];n=new Pc([],c,l,null)}else{if(!("filter"in t))return Tt(11601,{Vt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,f=new EI(l,c),g=s.targetId;n=new zE(g,f)}}return n}function DI(r,t){let n;if(t instanceof $l)n={update:Cv(r,t.key,t.value)};else if(t instanceof xm)n={delete:tm(r,t.key)};else if(t instanceof Js)n={update:Cv(r,t.key,t.data),updateMask:zI(t.fieldMask)};else{if(!(t instanceof yI))return Tt(16599,{ft:t.type});n={verify:tm(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(c,f){const g=f.transform;if(g instanceof zl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Bl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof ql)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof $c)return{fieldPath:f.field.canonicalString(),increment:g.Re};throw Tt(20930,{transform:f.transform})}(0,s))),t.precondition.isNone||(n.currentDocument=function(l,c){return c.updateTime!==void 0?{updateTime:CI(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Tt(27497)}(r,t.precondition)),n}function OI(r,t){return r&&r.length>0?(Yt(t!==void 0,14353),r.map(n=>function(l,c){let f=l.updateTime?wi(l.updateTime):wi(c);return f.isEqual(wt.min())&&(f=wi(c)),new mI(f,l.transformResults||[])}(n,t))):[]}function MI(r,t){return{documents:[FE(r,t.path)]}}function VI(r,t){const n={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=FE(r,l);const c=function(_){if(_.length!==0)return KE(ni.create(_,"and"))}(t.filters);c&&(n.structuredQuery.where=c);const f=function(_){if(_.length!==0)return _.map(T=>function(C){return{field:Ka(C.field),direction:UI(C.dir)}}(T))}(t.orderBy);f&&(n.structuredQuery.orderBy=f);const g=Jd(r,t.limit);return g!==null&&(n.structuredQuery.limit=g),t.startAt&&(n.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(t.endAt)),{gt:n,parent:l}}function PI(r){let t=NI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){Yt(s===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:t=t.child(T.collectionId)}let c=[];n.where&&(c=function(w){const C=QE(w);return C instanceof ni&&AE(C)?C.getFilters():[C]}(n.where));let f=[];n.orderBy&&(f=function(w){return w.map(C=>function(J){return new Xc(Ya(J.field),function(tt){switch(tt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(J.direction))}(C))}(n.orderBy));let g=null;n.limit&&(g=function(w){let C;return C=typeof w=="object"?w.value:w,oh(C)?null:C}(n.limit));let p=null;n.startAt&&(p=function(w){const C=!!w.before,F=w.values||[];return new Yc(F,C)}(n.startAt));let _=null;return n.endAt&&(_=function(w){const C=!w.before,F=w.values||[];return new Yc(F,C)}(n.endAt)),tI(t,l,f,c,g,"F",p,_)}function kI(r,t){const n=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Tt(28987,{purpose:l})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function QE(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ya(n.unaryFilter.field);return we.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Ya(n.unaryFilter.field);return we.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ya(n.unaryFilter.field);return we.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ya(n.unaryFilter.field);return we.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Tt(61313);default:return Tt(60726)}}(r):r.fieldFilter!==void 0?function(n){return we.create(Ya(n.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Tt(58110);default:return Tt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return ni.create(n.compositeFilter.filters.map(s=>QE(s)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Tt(1026)}}(n.compositeFilter.op))}(r):Tt(30097,{filter:r})}function UI(r){return SI[r]}function LI(r){return wI[r]}function jI(r){return RI[r]}function Ka(r){return{fieldPath:r.canonicalString()}}function Ya(r){return Ye.fromServerFormat(r.fieldPath)}function KE(r){return r instanceof we?function(n){if(n.op==="=="){if(gv(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NAN"}};if(mv(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gv(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NOT_NAN"}};if(mv(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ka(n.field),op:LI(n.op),value:n.value}}}(r):r instanceof ni?function(n){const s=n.getFilters().map(l=>KE(l));return s.length===1?s[0]:{compositeFilter:{op:jI(n.op),filters:s}}}(r):Tt(54877,{filter:r})}function zI(r){const t=[];return r.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function YE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(t,n,s,l,c=wt.min(),f=wt.min(),g=$e.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(t){return new Kr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(t){this.wt=t}}function qI(r){const t=PI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Zd(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.Cn=new FI}addToCollectionParentIndex(t,n){return this.Cn.add(n),$.resolve()}getCollectionParents(t,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return $.resolve()}deleteFieldIndex(t,n){return $.resolve()}deleteAllFieldIndexes(t){return $.resolve()}createTargetIndexes(t,n){return $.resolve()}getDocumentsMatchingTarget(t,n){return $.resolve(null)}getIndexType(t,n){return $.resolve(0)}getFieldIndexes(t,n){return $.resolve([])}getNextCollectionGroupToUpdate(t){return $.resolve(null)}getMinOffset(t,n){return $.resolve(ts.min())}getMinOffsetFromCollectionGroup(t,n){return $.resolve(ts.min())}updateCollectionGroup(t,n,s){return $.resolve()}updateIndexEntries(t,n){return $.resolve()}}class FI{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n]||new Ve(re.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(t){return(this.index[t]||new Ve(re.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},XE=41943040;class _n{static withCacheSize(t){return new _n(t,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(XE,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new so(0)}static lr(){return new so(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="LruGarbageCollector",GI=1048576;function Dv([r,t],[n,s]){const l=xt(r,n);return l===0?xt(t,s):l}class QI{constructor(t){this.Er=t,this.buffer=new Ve(Dv),this.dr=0}Ar(){return++this.dr}Rr(t){const n=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Dv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class KI{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){st(xv,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){go(n)?st(xv,"Ignoring IndexedDB error during garbage collection: ",n):await mo(n)}await this.mr(3e5)})}}class YI{constructor(t,n){this.gr=t,this.params=n}calculateTargetCount(t,n){return this.gr.pr(t).next(s=>Math.floor(n/100*s))}nthSequenceNumber(t,n){if(n===0)return $.resolve(ah.le);const s=new QI(n);return this.gr.forEachTarget(t,l=>s.Rr(l.sequenceNumber)).next(()=>this.gr.yr(t,l=>s.Rr(l))).next(()=>s.maxValue)}removeTargets(t,n,s){return this.gr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.gr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Nv)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Nv):this.wr(t,n))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,n){let s,l,c,f,g,p,_;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),l=this.params.maximumSequenceNumbersToCollect):l=w,f=Date.now(),this.nthSequenceNumber(t,l))).next(w=>(s=w,g=Date.now(),this.removeTargets(t,s,n))).next(w=>(c=w,p=Date.now(),this.removeOrphanedDocuments(t,s))).next(w=>(_=Date.now(),Ga()<=Pt.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${l} in `+(g-f)+`ms
	Removed ${c} targets in `+(p-g)+`ms
	Removed ${w} documents in `+(_-p)+`ms
Total Duration: ${_-T}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:w})))}}function XI(r,t){return new YI(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this.changes=new Zs(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,rn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?$.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(t,n,s,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next(l=>(s=l,this.remoteDocumentCache.getEntry(t,n))).next(l=>(s!==null&&Ml(s.mutation,l,ti.empty(),Me.now()),l))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.getLocalViewOfDocuments(t,s,kt()).next(()=>s))}getLocalViewOfDocuments(t,n,s=kt()){const l=Hs();return this.populateOverlays(t,l,n).next(()=>this.computeViews(t,n,l,s).next(c=>{let f=wl();return c.forEach((g,p)=>{f=f.insert(g,p.overlayedDocument)}),f}))}getOverlayedDocuments(t,n){const s=Hs();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,kt()))}populateOverlays(t,n,s){const l=[];return s.forEach(c=>{n.has(c)||l.push(c)}),this.documentOverlayCache.getOverlays(t,l).next(c=>{c.forEach((f,g)=>{n.set(f,g)})})}computeViews(t,n,s,l){let c=fr();const f=Ol(),g=function(){return Ol()}();return n.forEach((p,_)=>{const T=s.get(_.key);l.has(_.key)&&(T===void 0||T.mutation instanceof Js)?c=c.insert(_.key,_):T!==void 0?(f.set(_.key,T.mutation.getFieldMask()),Ml(T.mutation,_,T.mutation.getFieldMask(),Me.now())):f.set(_.key,ti.empty())}),this.recalculateAndSaveOverlays(t,c).next(p=>(p.forEach((_,T)=>f.set(_,T)),n.forEach((_,T)=>{var w;return g.set(_,new ZI(T,(w=f.get(_))!==null&&w!==void 0?w:null))}),g))}recalculateAndSaveOverlays(t,n){const s=Ol();let l=new ce((f,g)=>f-g),c=kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(f=>{for(const g of f)g.keys().forEach(p=>{const _=n.get(p);if(_===null)return;let T=s.get(p)||ti.empty();T=g.applyToLocalView(_,T),s.set(p,T);const w=(l.get(g.batchId)||kt()).add(p);l=l.insert(g.batchId,w)})}).next(()=>{const f=[],g=l.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),_=p.key,T=p.value,w=DE();T.forEach(C=>{if(!c.has(C)){const F=UE(n.get(C),s.get(C));F!==null&&w.set(C,F),c=c.add(C)}}),f.push(this.documentOverlayCache.saveOverlays(t,_,w))}return $.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,n,s,l){return function(f){return dt.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):RE(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,l):this.getDocumentsMatchingCollectionQuery(t,n,s,l)}getNextDocuments(t,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,l).next(c=>{const f=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,l-c.size):$.resolve(Hs());let g=kl,p=c;return f.next(_=>$.forEach(_,(T,w)=>(g<w.largestBatchId&&(g=w.largestBatchId),c.get(T)?$.resolve():this.remoteDocumentCache.getEntry(t,T).next(C=>{p=p.insert(T,C)}))).next(()=>this.populateOverlays(t,_,c)).next(()=>this.computeViews(t,p,_,kt())).next(T=>({batchId:g,changes:xE(T)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new dt(n)).next(s=>{let l=wl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l})}getDocumentsMatchingCollectionGroupQuery(t,n,s,l){const c=n.collectionGroup;let f=wl();return this.indexManager.getCollectionParents(t,c).next(g=>$.forEach(g,p=>{const _=function(w,C){return new Xl(C,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(t,_,s,l).next(T=>{T.forEach((w,C)=>{f=f.insert(w,C)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(t,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,c,l))).next(f=>{c.forEach((p,_)=>{const T=_.getKey();f.get(T)===null&&(f=f.insert(T,rn.newInvalidDocument(T)))});let g=wl();return f.forEach((p,_)=>{const T=c.get(p);T!==void 0&&Ml(T.mutation,_,ti.empty(),Me.now()),hh(n,_)&&(g=g.insert(p,_))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,n){return $.resolve(this.kr.get(n))}saveBundleMetadata(t,n){return this.kr.set(n.id,function(l){return{id:l.id,version:l.version,createTime:wi(l.createTime)}}(n)),$.resolve()}getNamedQuery(t,n){return $.resolve(this.qr.get(n))}saveNamedQuery(t,n){return this.qr.set(n.name,function(l){return{name:l.name,query:qI(l.bundledQuery),readTime:wi(l.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.overlays=new ce(dt.comparator),this.Qr=new Map}getOverlay(t,n){return $.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Hs();return $.forEach(n,l=>this.getOverlay(t,l).next(c=>{c!==null&&s.set(l,c)})).next(()=>s)}saveOverlays(t,n,s){return s.forEach((l,c)=>{this.St(t,n,c)}),$.resolve()}removeOverlaysForBatchId(t,n,s){const l=this.Qr.get(s);return l!==void 0&&(l.forEach(c=>this.overlays=this.overlays.remove(c)),this.Qr.delete(s)),$.resolve()}getOverlaysForCollection(t,n,s){const l=Hs(),c=n.length+1,f=new dt(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const p=g.getNext().value,_=p.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===c&&p.largestBatchId>s&&l.set(p.getKey(),p)}return $.resolve(l)}getOverlaysForCollectionGroup(t,n,s,l){let c=new ce((_,T)=>_-T);const f=this.overlays.getIterator();for(;f.hasNext();){const _=f.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>s){let T=c.get(_.largestBatchId);T===null&&(T=Hs(),c=c.insert(_.largestBatchId,T)),T.set(_.getKey(),_)}}const g=Hs(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,T)=>g.set(_,T)),!(g.size()>=l)););return $.resolve(g)}St(t,n,s){const l=this.overlays.get(s.key);if(l!==null){const f=this.Qr.get(l.largestBatchId).delete(s.key);this.Qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new vI(n,s));let c=this.Qr.get(n);c===void 0&&(c=kt(),this.Qr.set(n,c)),this.Qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(){this.sessionToken=$e.EMPTY_BYTE_STRING}getSessionToken(t){return $.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(){this.$r=new Ve(Be.Ur),this.Kr=new Ve(Be.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,n){const s=new Be(t,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.zr(new Be(t,n))}jr(t,n){t.forEach(s=>this.removeReference(s,n))}Hr(t){const n=new dt(new re([])),s=new Be(n,t),l=new Be(n,t+1),c=[];return this.Kr.forEachInRange([s,l],f=>{this.zr(f),c.push(f.key)}),c}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const n=new dt(new re([])),s=new Be(n,t),l=new Be(n,t+1);let c=kt();return this.Kr.forEachInRange([s,l],f=>{c=c.add(f.key)}),c}containsKey(t){const n=new Be(t,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Be{constructor(t,n){this.key=t,this.Zr=n}static Ur(t,n){return dt.comparator(t.key,n.key)||xt(t.Zr,n.Zr)}static Wr(t,n){return xt(t.Zr,n.Zr)||dt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Ve(Be.Ur)}checkEmpty(t){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,l){const c=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new _I(c,n,s,l);this.mutationQueue.push(f);for(const g of l)this.Xr=this.Xr.add(new Be(g.key,c)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return $.resolve(f)}lookupMutationBatch(t,n){return $.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,l=this.ti(s),c=l<0?0:l;return $.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Sm:this.nr-1)}getAllMutationBatches(t){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Be(n,0),l=new Be(n,Number.POSITIVE_INFINITY),c=[];return this.Xr.forEachInRange([s,l],f=>{const g=this.ei(f.Zr);c.push(g)}),$.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Ve(xt);return n.forEach(l=>{const c=new Be(l,0),f=new Be(l,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([c,f],g=>{s=s.add(g.Zr)})}),$.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,l=s.length+1;let c=s;dt.isDocumentKey(c)||(c=c.child(""));const f=new Be(new dt(c),0);let g=new Ve(xt);return this.Xr.forEachWhile(p=>{const _=p.key.path;return!!s.isPrefixOf(_)&&(_.length===l&&(g=g.add(p.Zr)),!0)},f),$.resolve(this.ni(g))}ni(t){const n=[];return t.forEach(s=>{const l=this.ei(s);l!==null&&n.push(l)}),n}removeMutationBatch(t,n){Yt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return $.forEach(n.mutations,l=>{const c=new Be(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)}).next(()=>{this.Xr=s})}sr(t){}containsKey(t,n){const s=new Be(n,0),l=this.Xr.firstAfterOrEqual(s);return $.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,$.resolve()}ri(t,n){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const n=this.ti(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(t){this.ii=t,this.docs=function(){return new ce(dt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,f=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return $.resolve(s?s.document.mutableCopy():rn.newInvalidDocument(n))}getEntries(t,n){let s=fr();return n.forEach(l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():rn.newInvalidDocument(l))}),$.resolve(s)}getDocumentsMatchingQuery(t,n,s,l){let c=fr();const f=n.path,g=new dt(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:_,value:{document:T}}=p.getNext();if(!f.isPrefixOf(_.path))break;_.path.length>f.length+1||OR(DR(T),s)<=0||(l.has(T.key)||hh(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return $.resolve(c)}getAllFromCollectionGroup(t,n,s,l){Tt(9500)}si(t,n){return $.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new r2(this)}getSize(t){return $.resolve(this.size)}}class r2 extends $I{constructor(t){super(),this.Br=t}applyChanges(t){const n=[];return this.changes.forEach((s,l)=>{l.isValidDocument()?n.push(this.Br.addEntry(t,l)):this.Br.removeEntry(s)}),$.waitFor(n)}getFromCache(t,n){return this.Br.getEntry(t,n)}getAllFromCache(t,n){return this.Br.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(t){this.persistence=t,this.oi=new Zs(n=>Im(n),Cm),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this._i=0,this.ai=new Vm,this.targetCount=0,this.ui=so.cr()}forEachTarget(t,n){return this.oi.forEach((s,l)=>n(l)),$.resolve()}getLastRemoteSnapshotVersion(t){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return $.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),$.resolve()}Tr(t){this.oi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ui=new so(n),this.highestTargetId=n),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,n){return this.Tr(n),this.targetCount+=1,$.resolve()}updateTargetData(t,n){return this.Tr(n),$.resolve()}removeTargetData(t,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(t,n,s){let l=0;const c=[];return this.oi.forEach((f,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.oi.delete(f),c.push(this.removeMatchingKeysForTargetId(t,g.targetId)),l++)}),$.waitFor(c).next(()=>l)}getTargetCount(t){return $.resolve(this.targetCount)}getTargetData(t,n){const s=this.oi.get(n)||null;return $.resolve(s)}addMatchingKeys(t,n,s){return this.ai.Gr(n,s),$.resolve()}removeMatchingKeys(t,n,s){this.ai.jr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach(f=>{c.push(l.markPotentiallyOrphaned(t,f))}),$.waitFor(c)}removeMatchingKeysForTargetId(t,n){return this.ai.Hr(n),$.resolve()}getMatchingKeysForTargetId(t,n){const s=this.ai.Yr(n);return $.resolve(s)}containsKey(t,n){return $.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(t,n){this.ci={},this.overlays={},this.li=new ah(0),this.hi=!1,this.hi=!0,this.Pi=new e2,this.referenceDelegate=t(this),this.Ti=new s2(this),this.indexManager=new HI,this.remoteDocumentCache=function(l){return new i2(l)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new BI(n),this.Ei=new WI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new t2,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ci[t.toKey()];return s||(s=new n2(n,this.referenceDelegate),this.ci[t.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,n,s){st("MemoryPersistence","Starting transaction:",t);const l=new a2(this.li.next());return this.referenceDelegate.di(),s(l).next(c=>this.referenceDelegate.Ai(l).next(()=>c)).toPromise().then(c=>(l.raiseOnCommittedEvent(),c))}Ri(t,n){return $.or(Object.values(this.ci).map(s=>()=>s.containsKey(t,n)))}}class a2 extends VR{constructor(t){super(),this.currentSequenceNumber=t}}class Pm{constructor(t){this.persistence=t,this.Vi=new Vm,this.mi=null}static fi(t){return new Pm(t)}get gi(){if(this.mi)return this.mi;throw Tt(60996)}addReference(t,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),$.resolve()}removeReference(t,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),$.resolve()}markPotentiallyOrphaned(t,n){return this.gi.add(n.toString()),$.resolve()}removeTarget(t,n){this.Vi.Hr(n.targetId).forEach(l=>this.gi.add(l.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(l=>{l.forEach(c=>this.gi.add(c.toString()))}).next(()=>s.removeTargetData(t,n))}di(){this.mi=new Set}Ai(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.gi,s=>{const l=dt.fromPath(s);return this.pi(t,l).next(c=>{c||n.removeEntry(l,wt.min())})}).next(()=>(this.mi=null,n.apply(t)))}updateLimboDocument(t,n){return this.pi(t,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(t){return 0}pi(t,n){return $.or([()=>$.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ri(t,n)])}}class Jc{constructor(t,n){this.persistence=t,this.yi=new Zs(s=>UR(s.path),(s,l)=>s.isEqual(l)),this.garbageCollector=XI(this,n)}static fi(t,n){return new Jc(t,n)}di(){}Ai(t){return $.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}pr(t){const n=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>n.next(l=>s+l))}br(t){let n=0;return this.yr(t,s=>{n++}).next(()=>n)}yr(t,n){return $.forEach(this.yi,(s,l)=>this.Dr(t,s,l).next(c=>c?$.resolve():n(l)))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.si(t,f=>this.Dr(t,f,n).next(g=>{g||(s++,c.removeEntry(f,wt.min()))})).next(()=>c.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,n){return this.yi.set(n,t.currentSequenceNumber),$.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.yi.set(s,t.currentSequenceNumber),$.resolve()}removeReference(t,n,s){return this.yi.set(s,t.currentSequenceNumber),$.resolve()}updateLimboDocument(t,n){return this.yi.set(n,t.currentSequenceNumber),$.resolve()}Ii(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Oc(t.data.value)),n}Dr(t,n,s){return $.or([()=>this.persistence.Ri(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.yi.get(n);return $.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(t,n,s,l){this.targetId=t,this.fromCache=n,this.ds=s,this.As=l}static Rs(t,n){let s=kt(),l=kt();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new km(t,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return Ub()?8:PR(sn())>0?6:4}()}initialize(t,n){this.ys=t,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(t,n,s,l){const c={result:null};return this.ws(t,n).next(f=>{c.result=f}).next(()=>{if(!c.result)return this.bs(t,n,l,s).next(f=>{c.result=f})}).next(()=>{if(c.result)return;const f=new o2;return this.Ss(t,n,f).next(g=>{if(c.result=g,this.fs)return this.Ds(t,n,f,g.size)})}).next(()=>c.result)}Ds(t,n,s,l){return s.documentReadCount<this.gs?(Ga()<=Pt.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",Qa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),$.resolve()):(Ga()<=Pt.DEBUG&&st("QueryEngine","Query:",Qa(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.ps*l?(Ga()<=Pt.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",Qa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,bi(n))):$.resolve())}ws(t,n){if(vv(n))return $.resolve(null);let s=bi(n);return this.indexManager.getIndexType(t,s).next(l=>l===0?null:(n.limit!==null&&l===1&&(n=Zd(n,null,"F"),s=bi(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next(c=>{const f=kt(...c);return this.ys.getDocuments(t,f).next(g=>this.indexManager.getMinOffset(t,s).next(p=>{const _=this.vs(n,g);return this.Cs(n,_,f,p.readTime)?this.ws(t,Zd(n,null,"F")):this.Fs(t,_,n,p)}))})))}bs(t,n,s,l){return vv(n)||l.isEqual(wt.min())?$.resolve(null):this.ys.getDocuments(t,s).next(c=>{const f=this.vs(n,c);return this.Cs(n,f,s,l)?$.resolve(null):(Ga()<=Pt.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Qa(n)),this.Fs(t,f,n,xR(l,kl)).next(g=>g))})}vs(t,n){let s=new Ve(CE(t));return n.forEach((l,c)=>{hh(t,c)&&(s=s.add(c))}),s}Cs(t,n,s,l){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const c=t.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(t,n,s){return Ga()<=Pt.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",Qa(n)),this.ys.getDocumentsMatchingQuery(t,n,ts.min(),s)}Fs(t,n,s,l){return this.ys.getDocumentsMatchingQuery(t,s,l).next(c=>(n.forEach(f=>{c=c.insert(f.key,f)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="LocalStore",u2=3e8;class c2{constructor(t,n,s,l){this.persistence=t,this.Ms=n,this.serializer=l,this.xs=new ce(xt),this.Os=new Zs(c=>Im(c),Cm),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(s)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new JI(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.xs))}}function h2(r,t,n,s){return new c2(r,t,n,s)}async function ZE(r,t){const n=It(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next(c=>(l=c,n.Ls(t),n.mutationQueue.getAllMutationBatches(s))).next(c=>{const f=[],g=[];let p=kt();for(const _ of l){f.push(_.batchId);for(const T of _.mutations)p=p.add(T.key)}for(const _ of c){g.push(_.batchId);for(const T of _.mutations)p=p.add(T.key)}return n.localDocuments.getDocuments(s,p).next(_=>({ks:_,removedBatchIds:f,addedBatchIds:g}))})})}function f2(r,t){const n=It(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const l=t.batch.keys(),c=n.Bs.newChangeBuffer({trackRemovals:!0});return function(g,p,_,T){const w=_.batch,C=w.keys();let F=$.resolve();return C.forEach(J=>{F=F.next(()=>T.getEntry(p,J)).next(it=>{const tt=_.docVersions.get(J);Yt(tt!==null,48541),it.version.compareTo(tt)<0&&(w.applyToRemoteDocument(it,_),it.isValidDocument()&&(it.setReadTime(_.commitVersion),T.addEntry(it)))})}),F.next(()=>g.mutationQueue.removeMutationBatch(p,w))}(n,s,t,c).next(()=>c.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(g){let p=kt();for(let _=0;_<g.mutationResults.length;++_)g.mutationResults[_].transformResults.length>0&&(p=p.add(g.batch.mutations[_].key));return p}(t))).next(()=>n.localDocuments.getDocuments(s,l))})}function JE(r){const t=It(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ti.getLastRemoteSnapshotVersion(n))}function d2(r,t){const n=It(r),s=t.snapshotVersion;let l=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=n.Bs.newChangeBuffer({trackRemovals:!0});l=n.xs;const g=[];t.targetChanges.forEach((T,w)=>{const C=l.get(w);if(!C)return;g.push(n.Ti.removeMatchingKeys(c,T.removedDocuments,w).next(()=>n.Ti.addMatchingKeys(c,T.addedDocuments,w)));let F=C.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(w)!==null?F=F.withResumeToken($e.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):T.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(T.resumeToken,s)),l=l.insert(w,F),function(it,tt,At){return it.resumeToken.approximateByteSize()===0||tt.snapshotVersion.toMicroseconds()-it.snapshotVersion.toMicroseconds()>=u2?!0:At.addedDocuments.size+At.modifiedDocuments.size+At.removedDocuments.size>0}(C,F,T)&&g.push(n.Ti.updateTargetData(c,F))});let p=fr(),_=kt();if(t.documentUpdates.forEach(T=>{t.resolvedLimboDocuments.has(T)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))}),g.push(m2(c,f,t.documentUpdates).next(T=>{p=T.qs,_=T.Qs})),!s.isEqual(wt.min())){const T=n.Ti.getLastRemoteSnapshotVersion(c).next(w=>n.Ti.setTargetsMetadata(c,c.currentSequenceNumber,s));g.push(T)}return $.waitFor(g).next(()=>f.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,p,_)).next(()=>p)}).then(c=>(n.xs=l,c))}function m2(r,t,n){let s=kt(),l=kt();return n.forEach(c=>s=s.add(c)),t.getEntries(r,s).next(c=>{let f=fr();return n.forEach((g,p)=>{const _=c.get(g);p.isFoundDocument()!==_.isFoundDocument()&&(l=l.add(g)),p.isNoDocument()&&p.version.isEqual(wt.min())?(t.removeEntry(g,p.readTime),f=f.insert(g,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||p.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(p),f=f.insert(g,p)):st(Um,"Ignoring outdated watch update for ",g,". Current version:",_.version," Watch version:",p.version)}),{qs:f,Qs:l}})}function g2(r,t){const n=It(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=Sm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function p2(r,t){const n=It(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let l;return n.Ti.getTargetData(s,t).next(c=>c?(l=c,$.resolve(l)):n.Ti.allocateTargetId(s).next(f=>(l=new Kr(t,f,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,l).next(()=>l))))}).then(s=>{const l=n.xs.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(t,s.targetId)),s})}async function nm(r,t,n){const s=It(r),l=s.xs.get(t),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,f=>s.persistence.referenceDelegate.removeTarget(f,l))}catch(f){if(!go(f))throw f;st(Um,`Failed to update sequence numbers for target ${t}: ${f}`)}s.xs=s.xs.remove(t),s.Os.delete(l.target)}function Ov(r,t,n){const s=It(r);let l=wt.min(),c=kt();return s.persistence.runTransaction("Execute query","readwrite",f=>function(p,_,T){const w=It(p),C=w.Os.get(T);return C!==void 0?$.resolve(w.xs.get(C)):w.Ti.getTargetData(_,T)}(s,f,bi(t)).next(g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(f,g.targetId).next(p=>{c=p})}).next(()=>s.Ms.getDocumentsMatchingQuery(f,t,n?l:wt.min(),n?c:kt())).next(g=>(y2(s,nI(t),g),{documents:g,$s:c})))}function y2(r,t,n){let s=r.Ns.get(t)||wt.min();n.forEach((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),r.Ns.set(t,s)}class Mv{constructor(){this.activeTargetIds=lI()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class _2{constructor(){this.xo=new Mv,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,n,s){this.Oo[t]=n}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new Mv,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="ConnectivityMonitor";class Pv{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){st(Vv,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){st(Vv,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rc=null;function im(){return Rc===null?Rc=function(){return 268435456+Math.round(2147483648*Math.random())}():Rc++,"0x"+Rc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od="RestConnection",E2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class T2{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo=`projects/${s}/databases/${l}`,this.Go=this.databaseId.database===Qc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}zo(t,n,s,l,c){const f=im(),g=this.jo(t,n.toUriEncodedString());st(Od,`Sending RPC '${t}' ${f}:`,g,s);const p={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(p,l,c);const{host:_}=new URL(g),T=uo(_);return this.Jo(t,g,p,s,T).then(w=>(st(Od,`Received RPC '${t}' ${f}: `,w),w),w=>{throw eo(Od,`RPC '${t}' ${f} failed with error: `,w,"url: ",g,"request:",s),w})}Yo(t,n,s,l,c,f){return this.zo(t,n,s,l,c)}Ho(t,n,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((l,c)=>t[c]=l),s&&s.headers.forEach((l,c)=>t[c]=l)}jo(t,n){const s=E2[t];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class b2 extends T2{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,l,c){const f=im();return new Promise((g,p)=>{const _=new eE;_.setWithCredentials(!0),_.listenOnce(nE.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case Dc.NO_ERROR:const w=_.getResponseJson();st(en,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(w)),g(w);break;case Dc.TIMEOUT:st(en,`RPC '${t}' ${f} timed out`),p(new lt(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Dc.HTTP_ERROR:const C=_.getStatus();if(st(en,`RPC '${t}' ${f} failed with status:`,C,"response text:",_.getResponseText()),C>0){let F=_.getResponseJson();Array.isArray(F)&&(F=F[0]);const J=F==null?void 0:F.error;if(J&&J.status&&J.message){const it=function(At){const ht=At.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(ht)>=0?ht:Z.UNKNOWN}(J.status);p(new lt(it,J.message))}else p(new lt(Z.UNKNOWN,"Server responded with status "+_.getStatus()))}else p(new lt(Z.UNAVAILABLE,"Connection failed."));break;default:Tt(9055,{h_:t,streamId:f,P_:_.getLastErrorCode(),T_:_.getLastError()})}}finally{st(en,`RPC '${t}' ${f} completed.`)}});const T=JSON.stringify(l);st(en,`RPC '${t}' ${f} sending request:`,l),_.send(n,"POST",T,s,15)})}I_(t,n,s){const l=im(),c=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=sE(),g=rE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(p.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Ho(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const T=c.join("");st(en,`Creating RPC '${t}' stream ${l}: ${T}`,p);const w=f.createWebChannel(T,p);this.E_(w);let C=!1,F=!1;const J=new A2({Zo:tt=>{F?st(en,`Not sending because RPC '${t}' stream ${l} is closed:`,tt):(C||(st(en,`Opening RPC '${t}' stream ${l} transport.`),w.open(),C=!0),st(en,`RPC '${t}' stream ${l} sending:`,tt),w.send(tt))},Xo:()=>w.close()}),it=(tt,At,ht)=>{tt.listen(At,ct=>{try{ht(ct)}catch(Ot){setTimeout(()=>{throw Ot},0)}})};return it(w,Sl.EventType.OPEN,()=>{F||(st(en,`RPC '${t}' stream ${l} transport opened.`),J.__())}),it(w,Sl.EventType.CLOSE,()=>{F||(F=!0,st(en,`RPC '${t}' stream ${l} transport closed`),J.u_(),this.d_(w))}),it(w,Sl.EventType.ERROR,tt=>{F||(F=!0,eo(en,`RPC '${t}' stream ${l} transport errored. Name:`,tt.name,"Message:",tt.message),J.u_(new lt(Z.UNAVAILABLE,"The operation could not be completed")))}),it(w,Sl.EventType.MESSAGE,tt=>{var At;if(!F){const ht=tt.data[0];Yt(!!ht,16349);const ct=ht,Ot=(ct==null?void 0:ct.error)||((At=ct[0])===null||At===void 0?void 0:At.error);if(Ot){st(en,`RPC '${t}' stream ${l} received error:`,Ot);const _t=Ot.status;let Rt=function(R){const O=Se[R];if(O!==void 0)return jE(O)}(_t),M=Ot.message;Rt===void 0&&(Rt=Z.INTERNAL,M="Unknown error status: "+_t+" with message "+Ot.message),F=!0,J.u_(new lt(Rt,M)),w.close()}else st(en,`RPC '${t}' stream ${l} received:`,ht),J.c_(ht)}}),it(g,iE.STAT_EVENT,tt=>{tt.stat===Fd.PROXY?st(en,`RPC '${t}' stream ${l} detected buffering proxy`):tt.stat===Fd.NOPROXY&&st(en,`RPC '${t}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{J.a_()},0),J}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(n=>n===t)}}function Md(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(r){return new II(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(t,n,s=1e3,l=1.5,c=6e4){this.xi=t,this.timerId=n,this.A_=s,this.R_=l,this.V_=c,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),l=Math.max(0,n-s);l>0&&st("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,l,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="PersistentStream";class tT{constructor(t,n,s,l,c,f,g,p){this.xi=t,this.S_=s,this.D_=l,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new WE(t,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(hr(n.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(n)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,l])=>{this.v_===n&&this.z_(s,l)},s=>{t(()=>{const l=new lt(Z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(l)})})}z_(t,n){const s=this.G_(this.v_);this.stream=this.H_(t,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(l=>{s(()=>this.j_(l))}),this.stream.onMessage(l=>{s(()=>++this.M_==1?this.J_(l):this.onNext(l))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return st(kv,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return n=>{this.xi.enqueueAndForget(()=>this.v_===t?n():(st(kv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class S2 extends tT{constructor(t,n,s,l,c,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,f),this.serializer=c}H_(t,n){return this.connection.I_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const n=xI(this.serializer,t),s=function(c){if(!("targetChange"in c))return wt.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?wt.min():f.readTime?wi(f.readTime):wt.min()}(t);return this.listener.Y_(n,s)}Z_(t){const n={};n.database=em(this.serializer),n.addTarget=function(c,f){let g;const p=f.target;if(g=Xd(p)?{documents:MI(c,p)}:{query:VI(c,p).gt},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=qE(c,f.resumeToken);const _=Jd(c,f.expectedCount);_!==null&&(g.expectedCount=_)}else if(f.snapshotVersion.compareTo(wt.min())>0){g.readTime=Zc(c,f.snapshotVersion.toTimestamp());const _=Jd(c,f.expectedCount);_!==null&&(g.expectedCount=_)}return g}(this.serializer,t);const s=kI(this.serializer,t);s&&(n.labels=s),this.Q_(n)}X_(t){const n={};n.database=em(this.serializer),n.removeTarget=t,this.Q_(n)}}class w2 extends tT{constructor(t,n,s,l,c,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,f),this.serializer=c}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,n){return this.connection.I_("Write",t,n)}J_(t){return Yt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Yt(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){Yt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const n=OI(t.writeResults,t.commitTime),s=wi(t.commitTime);return this.listener.ra(s,n)}ia(){const t={};t.database=em(this.serializer),this.Q_(t)}ta(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>DI(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{}class I2 extends R2{constructor(t,n,s,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.sa=!1}oa(){if(this.sa)throw new lt(Z.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,n,s,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.zo(t,Wd(n,s),l,c,f)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new lt(Z.UNKNOWN,c.toString())})}Yo(t,n,s,l,c){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,g])=>this.connection.Yo(t,Wd(n,s),l,f,g,c)).catch(f=>{throw f.name==="FirebaseError"?(f.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new lt(Z.UNKNOWN,f.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class C2{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(hr(n),this.ua=!1):st("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="RemoteStore";class N2{constructor(t,n,s,l,c){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=c,this.Ra.No(f=>{s.enqueueAndForget(async()=>{Ws(this)&&(st(Xs,"Restarting streams for network reachability change."),await async function(p){const _=It(p);_.da.add(4),await Jl(_),_.Va.set("Unknown"),_.da.delete(4),await ph(_)}(this))})}),this.Va=new C2(s,l)}}async function ph(r){if(Ws(r))for(const t of r.Aa)await t(!0)}async function Jl(r){for(const t of r.Aa)await t(!1)}function eT(r,t){const n=It(r);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),Bm(n)?zm(n):po(n).N_()&&jm(n,t))}function Lm(r,t){const n=It(r),s=po(n);n.Ea.delete(t),s.N_()&&nT(n,t),n.Ea.size===0&&(s.N_()?s.k_():Ws(n)&&n.Va.set("Unknown"))}function jm(r,t){if(r.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(wt.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}po(r).Z_(t)}function nT(r,t){r.ma.Ke(t),po(r).X_(t)}function zm(r){r.ma=new bI({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>r.Ea.get(t)||null,Pt:()=>r.datastore.serializer.databaseId}),po(r).start(),r.Va.ca()}function Bm(r){return Ws(r)&&!po(r).O_()&&r.Ea.size>0}function Ws(r){return It(r).da.size===0}function iT(r){r.ma=void 0}async function x2(r){r.Va.set("Online")}async function D2(r){r.Ea.forEach((t,n)=>{jm(r,t)})}async function O2(r,t){iT(r),Bm(r)?(r.Va.Pa(t),zm(r)):r.Va.set("Unknown")}async function M2(r,t,n){if(r.Va.set("Online"),t instanceof BE&&t.state===2&&t.cause)try{await async function(l,c){const f=c.cause;for(const g of c.targetIds)l.Ea.has(g)&&(await l.remoteSyncer.rejectListen(g,f),l.Ea.delete(g),l.ma.removeTarget(g))}(r,t)}catch(s){st(Xs,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Wc(r,s)}else if(t instanceof Pc?r.ma.Xe(t):t instanceof zE?r.ma.ot(t):r.ma.nt(t),!n.isEqual(wt.min()))try{const s=await JE(r.localStore);n.compareTo(s)>=0&&await function(c,f){const g=c.ma.It(f);return g.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const T=c.Ea.get(_);T&&c.Ea.set(_,T.withResumeToken(p.resumeToken,f))}}),g.targetMismatches.forEach((p,_)=>{const T=c.Ea.get(p);if(!T)return;c.Ea.set(p,T.withResumeToken($e.EMPTY_BYTE_STRING,T.snapshotVersion)),nT(c,p);const w=new Kr(T.target,p,_,T.sequenceNumber);jm(c,w)}),c.remoteSyncer.applyRemoteEvent(g)}(r,n)}catch(s){st(Xs,"Failed to raise snapshot:",s),await Wc(r,s)}}async function Wc(r,t,n){if(!go(t))throw t;r.da.add(1),await Jl(r),r.Va.set("Offline"),n||(n=()=>JE(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{st(Xs,"Retrying IndexedDB access"),await n(),r.da.delete(1),await ph(r)})}function rT(r,t){return t().catch(n=>Wc(r,n,t))}async function yh(r){const t=It(r),n=rs(t);let s=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:Sm;for(;V2(t);)try{const l=await g2(t.localStore,s);if(l===null){t.Ia.length===0&&n.k_();break}s=l.batchId,P2(t,l)}catch(l){await Wc(t,l)}sT(t)&&aT(t)}function V2(r){return Ws(r)&&r.Ia.length<10}function P2(r,t){r.Ia.push(t);const n=rs(r);n.N_()&&n.ea&&n.ta(t.mutations)}function sT(r){return Ws(r)&&!rs(r).O_()&&r.Ia.length>0}function aT(r){rs(r).start()}async function k2(r){rs(r).ia()}async function U2(r){const t=rs(r);for(const n of r.Ia)t.ta(n.mutations)}async function L2(r,t,n){const s=r.Ia.shift(),l=Dm.from(s,t,n);await rT(r,()=>r.remoteSyncer.applySuccessfulWrite(l)),await yh(r)}async function j2(r,t){t&&rs(r).ea&&await async function(s,l){if(function(f){return TI(f)&&f!==Z.ABORTED}(l.code)){const c=s.Ia.shift();rs(s).L_(),await rT(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l)),await yh(s)}}(r,t),sT(r)&&aT(r)}async function Uv(r,t){const n=It(r);n.asyncQueue.verifyOperationInProgress(),st(Xs,"RemoteStore received new credentials");const s=Ws(n);n.da.add(3),await Jl(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await ph(n)}async function z2(r,t){const n=It(r);t?(n.da.delete(2),await ph(n)):t||(n.da.add(2),await Jl(n),n.Va.set("Unknown"))}function po(r){return r.fa||(r.fa=function(n,s,l){const c=It(n);return c.oa(),new S2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(r.datastore,r.asyncQueue,{e_:x2.bind(null,r),n_:D2.bind(null,r),i_:O2.bind(null,r),Y_:M2.bind(null,r)}),r.Aa.push(async t=>{t?(r.fa.L_(),Bm(r)?zm(r):r.Va.set("Unknown")):(await r.fa.stop(),iT(r))})),r.fa}function rs(r){return r.ga||(r.ga=function(n,s,l){const c=It(n);return c.oa(),new w2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(r.datastore,r.asyncQueue,{e_:()=>Promise.resolve(),n_:k2.bind(null,r),i_:j2.bind(null,r),na:U2.bind(null,r),ra:L2.bind(null,r)}),r.Aa.push(async t=>{t?(r.ga.L_(),await yh(r)):(await r.ga.stop(),r.Ia.length>0&&(st(Xs,`Stopping write stream with ${r.Ia.length} pending writes`),r.Ia=[]))})),r.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(t,n,s,l,c){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,l,c){const f=Date.now()+s,g=new qm(t,n,f,l,c);return g.start(s),g}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new lt(Z.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hm(r,t){if(hr("AsyncQueue",`${t}: ${r}`),go(r))return new lt(Z.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{static emptySet(t){return new Ja(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||dt.comparator(n.key,s.key):(n,s)=>dt.comparator(n.key,s.key),this.keyedMap=wl(),this.sortedSet=new ce(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ja)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new Ja;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(){this.pa=new ce(dt.comparator)}track(t){const n=t.doc.key,s=this.pa.get(n);s?t.type!==0&&s.type===3?this.pa=this.pa.insert(n,t):t.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.pa=this.pa.remove(n):t.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):Tt(63341,{Vt:t,ya:s}):this.pa=this.pa.insert(n,t)}wa(){const t=[];return this.pa.inorderTraversal((n,s)=>{t.push(s)}),t}}class ao{constructor(t,n,s,l,c,f,g,p,_){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=_}static fromInitialDocuments(t,n,s,l,c){const f=[];return n.forEach(g=>{f.push({type:0,doc:g})}),new ao(t,n,Ja.emptySet(n),f,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ch(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class q2{constructor(){this.queries=jv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=It(n),c=l.queries;l.queries=jv(),c.forEach((f,g)=>{for(const p of g.Sa)p.onError(s)})})(this,new lt(Z.ABORTED,"Firestore shutting down"))}}function jv(){return new Zs(r=>IE(r),ch)}async function oT(r,t){const n=It(r);let s=3;const l=t.query;let c=n.queries.get(l);c?!c.Da()&&t.va()&&(s=2):(c=new B2,s=t.va()?0:1);try{switch(s){case 0:c.ba=await n.onListen(l,!0);break;case 1:c.ba=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const g=Hm(f,`Initialization of query '${Qa(t.query)}' failed`);return void t.onError(g)}n.queries.set(l,c),c.Sa.push(t),t.Fa(n.onlineState),c.ba&&t.Ma(c.ba)&&Fm(n)}async function lT(r,t){const n=It(r),s=t.query;let l=3;const c=n.queries.get(s);if(c){const f=c.Sa.indexOf(t);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?l=t.va()?0:1:!c.Da()&&t.va()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function H2(r,t){const n=It(r);let s=!1;for(const l of t){const c=l.query,f=n.queries.get(c);if(f){for(const g of f.Sa)g.Ma(l)&&(s=!0);f.ba=l}}s&&Fm(n)}function F2(r,t,n){const s=It(r),l=s.queries.get(t);if(l)for(const c of l.Sa)c.onError(n);s.queries.delete(t)}function Fm(r){r.Ca.forEach(t=>{t.next()})}var rm,zv;(zv=rm||(rm={})).xa="default",zv.Cache="cache";class uT{constructor(t,n,s){this.query=t,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new ao(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Na?this.La(t)&&(this.Oa.next(t),n=!0):this.ka(t,this.onlineState)&&(this.qa(t),n=!0),this.Ba=t,n}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),n=!0),n}ka(t,n){if(!t.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}La(t){if(t.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(t){t=ao.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==rm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(t){this.key=t}}class hT{constructor(t){this.key=t}}class G2{constructor(t,n){this.query=t,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=kt(),this.mutatedKeys=kt(),this.Za=CE(t),this.Xa=new Ja(this.Za)}get eu(){return this.Ha}tu(t,n){const s=n?n.nu:new Lv,l=n?n.Xa:this.Xa;let c=n?n.mutatedKeys:this.mutatedKeys,f=l,g=!1;const p=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,_=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal((T,w)=>{const C=l.get(T),F=hh(this.query,w)?w:null,J=!!C&&this.mutatedKeys.has(C.key),it=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let tt=!1;C&&F?C.data.isEqual(F.data)?J!==it&&(s.track({type:3,doc:F}),tt=!0):this.ru(C,F)||(s.track({type:2,doc:F}),tt=!0,(p&&this.Za(F,p)>0||_&&this.Za(F,_)<0)&&(g=!0)):!C&&F?(s.track({type:0,doc:F}),tt=!0):C&&!F&&(s.track({type:1,doc:C}),tt=!0,(p||_)&&(g=!0)),tt&&(F?(f=f.add(F),c=it?c.add(T):c.delete(T)):(f=f.delete(T),c=c.delete(T)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),c=c.delete(T.key),s.track({type:1,doc:T})}return{Xa:f,nu:s,Cs:g,mutatedKeys:c}}ru(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,l){const c=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const f=t.nu.wa();f.sort((T,w)=>function(F,J){const it=tt=>{switch(tt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tt(20277,{Vt:tt})}};return it(F)-it(J)}(T.type,w.type)||this.Za(T.doc,w.doc)),this.iu(s),l=l!=null&&l;const g=n&&!l?this.su():[],p=this.Ya.size===0&&this.current&&!l?1:0,_=p!==this.Ja;return this.Ja=p,f.length!==0||_?{snapshot:new ao(this.query,t.Xa,c,f,t.mutatedKeys,p===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:g}:{ou:g}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Lv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=kt(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return t.forEach(s=>{this.Ya.has(s)||n.push(new hT(s))}),this.Ya.forEach(s=>{t.has(s)||n.push(new cT(s))}),n}au(t){this.Ha=t.$s,this.Ya=kt();const n=this.tu(t.documents);return this.applyChanges(n,!0)}uu(){return ao.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Gm="SyncEngine";class Q2{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class K2{constructor(t){this.key=t,this.cu=!1}}class Y2{constructor(t,n,s,l,c,f){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.lu={},this.hu=new Zs(g=>IE(g),ch),this.Pu=new Map,this.Tu=new Set,this.Iu=new ce(dt.comparator),this.Eu=new Map,this.du=new Vm,this.Au={},this.Ru=new Map,this.Vu=so.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function X2(r,t,n=!0){const s=yT(r);let l;const c=s.hu.get(t);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.uu()):l=await fT(s,t,n,!0),l}async function $2(r,t){const n=yT(r);await fT(n,t,!0,!1)}async function fT(r,t,n,s){const l=await p2(r.localStore,bi(t)),c=l.targetId,f=r.sharedClientState.addLocalQueryTarget(c,n);let g;return s&&(g=await Z2(r,t,c,f==="current",l.resumeToken)),r.isPrimaryClient&&n&&eT(r.remoteStore,l),g}async function Z2(r,t,n,s,l){r.fu=(w,C,F)=>async function(it,tt,At,ht){let ct=tt.view.tu(At);ct.Cs&&(ct=await Ov(it.localStore,tt.query,!1).then(({documents:M})=>tt.view.tu(M,ct)));const Ot=ht&&ht.targetChanges.get(tt.targetId),_t=ht&&ht.targetMismatches.get(tt.targetId)!=null,Rt=tt.view.applyChanges(ct,it.isPrimaryClient,Ot,_t);return qv(it,tt.targetId,Rt.ou),Rt.snapshot}(r,w,C,F);const c=await Ov(r.localStore,t,!0),f=new G2(t,c.$s),g=f.tu(c.documents),p=Zl.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),_=f.applyChanges(g,r.isPrimaryClient,p);qv(r,n,_.ou);const T=new Q2(t,n,f);return r.hu.set(t,T),r.Pu.has(n)?r.Pu.get(n).push(t):r.Pu.set(n,[t]),_.snapshot}async function J2(r,t,n){const s=It(r),l=s.hu.get(t),c=s.Pu.get(l.targetId);if(c.length>1)return s.Pu.set(l.targetId,c.filter(f=>!ch(f,t))),void s.hu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await nm(s.localStore,l.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(l.targetId),n&&Lm(s.remoteStore,l.targetId),sm(s,l.targetId)}).catch(mo)):(sm(s,l.targetId),await nm(s.localStore,l.targetId,!0))}async function W2(r,t){const n=It(r),s=n.hu.get(t),l=n.Pu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Lm(n.remoteStore,s.targetId))}async function tC(r,t,n){const s=oC(r);try{const l=await function(f,g){const p=It(f),_=Me.now(),T=g.reduce((F,J)=>F.add(J.key),kt());let w,C;return p.persistence.runTransaction("Locally write mutations","readwrite",F=>{let J=fr(),it=kt();return p.Bs.getEntries(F,T).next(tt=>{J=tt,J.forEach((At,ht)=>{ht.isValidDocument()||(it=it.add(At))})}).next(()=>p.localDocuments.getOverlayedDocuments(F,J)).next(tt=>{w=tt;const At=[];for(const ht of g){const ct=pI(ht,w.get(ht.key).overlayedDocument);ct!=null&&At.push(new Js(ht.key,ct,vE(ct.value.mapValue),Si.exists(!0)))}return p.mutationQueue.addMutationBatch(F,_,At,g)}).next(tt=>{C=tt;const At=tt.applyToLocalDocumentSet(w,it);return p.documentOverlayCache.saveOverlays(F,tt.batchId,At)})}).then(()=>({batchId:C.batchId,changes:xE(w)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),function(f,g,p){let _=f.Au[f.currentUser.toKey()];_||(_=new ce(xt)),_=_.insert(g,p),f.Au[f.currentUser.toKey()]=_}(s,l.batchId,n),await Wl(s,l.changes),await yh(s.remoteStore)}catch(l){const c=Hm(l,"Failed to persist write");n.reject(c)}}async function dT(r,t){const n=It(r);try{const s=await d2(n.localStore,t);t.targetChanges.forEach((l,c)=>{const f=n.Eu.get(c);f&&(Yt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.cu=!0:l.modifiedDocuments.size>0?Yt(f.cu,14607):l.removedDocuments.size>0&&(Yt(f.cu,42227),f.cu=!1))}),await Wl(n,s,t)}catch(s){await mo(s)}}function Bv(r,t,n){const s=It(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.hu.forEach((c,f)=>{const g=f.view.Fa(t);g.snapshot&&l.push(g.snapshot)}),function(f,g){const p=It(f);p.onlineState=g;let _=!1;p.queries.forEach((T,w)=>{for(const C of w.Sa)C.Fa(g)&&(_=!0)}),_&&Fm(p)}(s.eventManager,t),l.length&&s.lu.Y_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function eC(r,t,n){const s=It(r);s.sharedClientState.updateQueryState(t,"rejected",n);const l=s.Eu.get(t),c=l&&l.key;if(c){let f=new ce(dt.comparator);f=f.insert(c,rn.newNoDocument(c,wt.min()));const g=kt().add(c),p=new mh(wt.min(),new Map,new ce(xt),f,g);await dT(s,p),s.Iu=s.Iu.remove(c),s.Eu.delete(t),Qm(s)}else await nm(s.localStore,t,!1).then(()=>sm(s,t,n)).catch(mo)}async function nC(r,t){const n=It(r),s=t.batch.batchId;try{const l=await f2(n.localStore,t);gT(n,s,null),mT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Wl(n,l)}catch(l){await mo(l)}}async function iC(r,t,n){const s=It(r);try{const l=await function(f,g){const p=It(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let T;return p.mutationQueue.lookupMutationBatch(_,g).next(w=>(Yt(w!==null,37113),T=w.keys(),p.mutationQueue.removeMutationBatch(_,w))).next(()=>p.mutationQueue.performConsistencyCheck(_)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(_,T,g)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,T)).next(()=>p.localDocuments.getDocuments(_,T))})}(s.localStore,t);gT(s,t,n),mT(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Wl(s,l)}catch(l){await mo(l)}}function mT(r,t){(r.Ru.get(t)||[]).forEach(n=>{n.resolve()}),r.Ru.delete(t)}function gT(r,t,n){const s=It(r);let l=s.Au[s.currentUser.toKey()];if(l){const c=l.get(t);c&&(n?c.reject(n):c.resolve(),l=l.remove(t)),s.Au[s.currentUser.toKey()]=l}}function sm(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Pu.get(t))r.hu.delete(s),n&&r.lu.gu(s,n);r.Pu.delete(t),r.isPrimaryClient&&r.du.Hr(t).forEach(s=>{r.du.containsKey(s)||pT(r,s)})}function pT(r,t){r.Tu.delete(t.path.canonicalString());const n=r.Iu.get(t);n!==null&&(Lm(r.remoteStore,n),r.Iu=r.Iu.remove(t),r.Eu.delete(n),Qm(r))}function qv(r,t,n){for(const s of n)s instanceof cT?(r.du.addReference(s.key,t),rC(r,s)):s instanceof hT?(st(Gm,"Document no longer in limbo: "+s.key),r.du.removeReference(s.key,t),r.du.containsKey(s.key)||pT(r,s.key)):Tt(19791,{pu:s})}function rC(r,t){const n=t.key,s=n.path.canonicalString();r.Iu.get(n)||r.Tu.has(s)||(st(Gm,"New document in limbo: "+n),r.Tu.add(s),Qm(r))}function Qm(r){for(;r.Tu.size>0&&r.Iu.size<r.maxConcurrentLimboResolutions;){const t=r.Tu.values().next().value;r.Tu.delete(t);const n=new dt(re.fromString(t)),s=r.Vu.next();r.Eu.set(s,new K2(n)),r.Iu=r.Iu.insert(n,s),eT(r.remoteStore,new Kr(bi(uh(n.path)),s,"TargetPurposeLimboResolution",ah.le))}}async function Wl(r,t,n){const s=It(r),l=[],c=[],f=[];s.hu.isEmpty()||(s.hu.forEach((g,p)=>{f.push(s.fu(p,t,n).then(_=>{var T;if((_||n)&&s.isPrimaryClient){const w=_?!_.fromCache:(T=n==null?void 0:n.targetChanges.get(p.targetId))===null||T===void 0?void 0:T.current;s.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(_){l.push(_);const w=km.Rs(p.targetId,_);c.push(w)}}))}),await Promise.all(f),s.lu.Y_(l),await async function(p,_){const T=It(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>$.forEach(_,C=>$.forEach(C.ds,F=>T.persistence.referenceDelegate.addReference(w,C.targetId,F)).next(()=>$.forEach(C.As,F=>T.persistence.referenceDelegate.removeReference(w,C.targetId,F)))))}catch(w){if(!go(w))throw w;st(Um,"Failed to update sequence numbers: "+w)}for(const w of _){const C=w.targetId;if(!w.fromCache){const F=T.xs.get(C),J=F.snapshotVersion,it=F.withLastLimboFreeSnapshotVersion(J);T.xs=T.xs.insert(C,it)}}}(s.localStore,c))}async function sC(r,t){const n=It(r);if(!n.currentUser.isEqual(t)){st(Gm,"User change. New user:",t.toKey());const s=await ZE(n.localStore,t);n.currentUser=t,function(c,f){c.Ru.forEach(g=>{g.forEach(p=>{p.reject(new lt(Z.CANCELLED,f))})}),c.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Wl(n,s.ks)}}function aC(r,t){const n=It(r),s=n.Eu.get(t);if(s&&s.cu)return kt().add(s.key);{let l=kt();const c=n.Pu.get(t);if(!c)return l;for(const f of c){const g=n.hu.get(f);l=l.unionWith(g.view.eu)}return l}}function yT(r){const t=It(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=dT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=aC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=eC.bind(null,t),t.lu.Y_=H2.bind(null,t.eventManager),t.lu.gu=F2.bind(null,t.eventManager),t}function oC(r){const t=It(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=nC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=iC.bind(null,t),t}class th{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=gh(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,n){return null}Cu(t,n){return null}Du(t){return h2(this.persistence,new l2,t.initialUser,this.serializer)}Su(t){return new $E(Pm.fi,this.serializer)}bu(t){return new _2}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}th.provider={build:()=>new th};class lC extends th{constructor(t){super(),this.cacheSizeBytes=t}vu(t,n){Yt(this.persistence.referenceDelegate instanceof Jc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new KI(s,t.asyncQueue,n)}Su(t){const n=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new $E(s=>Jc.fi(s,n),this.serializer)}}class am{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Bv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=sC.bind(null,this.syncEngine),await z2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new q2}()}createDatastore(t){const n=gh(t.databaseInfo.databaseId),s=function(c){return new b2(c)}(t.databaseInfo);return function(c,f,g,p){return new I2(c,f,g,p)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return function(s,l,c,f,g){return new N2(s,l,c,f,g)}(this.localStore,this.datastore,t.asyncQueue,n=>Bv(this.syncEngine,n,0),function(){return Pv.C()?new Pv:new v2}())}createSyncEngine(t,n){return function(l,c,f,g,p,_,T){const w=new Y2(l,c,f,g,p,_);return T&&(w.mu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(l){const c=It(l);st(Xs,"RemoteStore shutting down."),c.da.add(5),await Jl(c),c.Ra.shutdown(),c.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}am.provider={build:()=>new am};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):hr("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="FirestoreClient";class uC{constructor(t,n,s,l,c){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=nn.UNAUTHENTICATED,this.clientId=uE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async f=>{st(ss,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(st(ss,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Hm(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function Vd(r,t){r.asyncQueue.verifyOperationInProgress(),st(ss,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async l=>{s.isEqual(l)||(await ZE(t.localStore,l),s=l)}),t.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=t}async function Hv(r,t){r.asyncQueue.verifyOperationInProgress();const n=await cC(r);st(ss,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener(s=>Uv(t.remoteStore,s)),r.setAppCheckTokenChangeListener((s,l)=>Uv(t.remoteStore,l)),r._onlineComponents=t}async function cC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){st(ss,"Using user provided OfflineComponentProvider");try{await Vd(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(l){return l.name==="FirebaseError"?l.code===Z.FAILED_PRECONDITION||l.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(n))throw n;eo("Error using user provided cache. Falling back to memory cache: "+n),await Vd(r,new th)}}else st(ss,"Using default OfflineComponentProvider"),await Vd(r,new lC(void 0));return r._offlineComponents}async function vT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(st(ss,"Using user provided OnlineComponentProvider"),await Hv(r,r._uninitializedComponentsProvider._online)):(st(ss,"Using default OnlineComponentProvider"),await Hv(r,new am))),r._onlineComponents}function hC(r){return vT(r).then(t=>t.syncEngine)}async function om(r){const t=await vT(r),n=t.eventManager;return n.onListen=X2.bind(null,t.syncEngine),n.onUnlisten=J2.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=$2.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=W2.bind(null,t.syncEngine),n}function fC(r,t,n={}){const s=new Jr;return r.asyncQueue.enqueueAndForget(async()=>function(c,f,g,p,_){const T=new _T({next:C=>{T.xu(),f.enqueueAndForget(()=>lT(c,w));const F=C.docs.has(g);!F&&C.fromCache?_.reject(new lt(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&C.fromCache&&p&&p.source==="server"?_.reject(new lt(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(C)},error:C=>_.reject(C)}),w=new uT(uh(g.path),T,{includeMetadataChanges:!0,Qa:!0});return oT(c,w)}(await om(r),r.asyncQueue,t,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(r,t,n){if(!n)throw new lt(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function dC(r,t,n,s){if(t===!0&&s===!0)throw new lt(Z.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Gv(r){if(!dt.isDocumentKey(r))throw new lt(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Qv(r){if(dt.isDocumentKey(r))throw new lt(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function _h(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Tt(12329,{type:typeof r})}function lr(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new lt(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_h(r);throw new lt(Z.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="firestore.googleapis.com",Kv=!0;class Yv{constructor(t){var n,s;if(t.host===void 0){if(t.ssl!==void 0)throw new lt(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=AT,this.ssl=Kv}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:Kv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=XE;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<GI)throw new lt(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}dC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ET((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new lt(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new lt(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new lt(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,l){return s.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class vh{constructor(t,n,s,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new lt(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new lt(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new TR;switch(s.type){case"firstParty":return new wR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new lt(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Fv.get(n);s&&(st("ComponentProvider","Removing Datastore"),Fv.delete(n),s.terminate())}(this),Promise.resolve()}}function mC(r,t,n,s={}){var l;r=lr(r,vh);const c=uo(t),f=r._getSettings(),g=Object.assign(Object.assign({},f),{emulatorOptions:r._getEmulatorOptions()}),p=`${t}:${n}`;c&&(d0(`https://${p}`),m0("Firestore",!0)),f.host!==AT&&f.host!==p&&eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _=Object.assign(Object.assign({},f),{host:p,ssl:c,emulatorOptions:s});if(!Fs(_,g)&&(r._setSettings(_),s.mockUserToken)){let T,w;if(typeof s.mockUserToken=="string")T=s.mockUserToken,w=nn.MOCK_USER;else{T=Cb(s.mockUserToken,(l=r._app)===null||l===void 0?void 0:l.options.projectId);const C=s.mockUserToken.sub||s.mockUserToken.user_id;if(!C)throw new lt(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new nn(C)}r._authCredentials=new AR(new oE(T,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new yo(this.firestore,t,this._query)}}class hn{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new hn(this.firestore,t,this._key)}}class Wr extends yo{constructor(t,n,s){super(t,n,uh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new hn(this.firestore,null,new dt(t))}withConverter(t){return new Wr(this.firestore,t,this._path)}}function Xv(r,t,...n){if(r=Xe(r),TT("collection","path",t),r instanceof vh){const s=re.fromString(t,...n);return Qv(s),new Wr(r,null,s)}{if(!(r instanceof hn||r instanceof Wr))throw new lt(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(re.fromString(t,...n));return Qv(s),new Wr(r.firestore,null,s)}}function $v(r,t,...n){if(r=Xe(r),arguments.length===1&&(t=uE.newId()),TT("doc","path",t),r instanceof vh){const s=re.fromString(t,...n);return Gv(s),new hn(r,null,new dt(s))}{if(!(r instanceof hn||r instanceof Wr))throw new lt(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(re.fromString(t,...n));return Gv(s),new hn(r.firestore,r instanceof Wr?r.converter:null,new dt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="AsyncQueue";class Jv{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new WE(this,"async_queue_retry"),this.rc=()=>{const s=Md();s&&st(Zv,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=t;const n=Md();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const n=Md();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Jr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!go(t))throw t;st(Zv,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const n=this.sc.then(()=>(this.ec=!0,t().catch(s=>{throw this.Xu=s,this.ec=!1,hr("INTERNAL UNHANDLED ERROR: ",Wv(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(t,n,s){this.oc(),this.nc.indexOf(t)>-1&&(n=0);const l=qm.createAndSchedule(this,t,n,s,c=>this.uc(c));return this.Zu.push(l),l}oc(){this.Xu&&Tt(47125,{cc:Wv(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const n of this.Zu)if(n.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const n=this.Zu.indexOf(t);this.Zu.splice(n,1)}}function Wv(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(r){return function(n,s){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1}(r,["next","error","complete"])}class oo extends vh{constructor(t,n,s,l){super(t,n,s,l),this.type="firestore",this._queue=new Jv,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Jv(t),this._firestoreClient=void 0,await t}}}function gC(r,t){const n=typeof r=="object"?r:_0(),s=typeof r=="string"?r:Qc,l=hm(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=Rb("firestore");c&&mC(l,...c)}return l}function Km(r){if(r._terminated)throw new lt(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||pC(r),r._firestoreClient}function pC(r){var t,n,s;const l=r._freezeSettings(),c=function(g,p,_,T){return new zR(g,p,_,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,ET(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)}(r._databaseId,((t=r._app)===null||t===void 0?void 0:t.options.appId)||"",r._persistenceKey,l);r._componentsProvider||!((n=l.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=l.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:l.localCache._offlineComponentProvider,_online:l.localCache._onlineComponentProvider}),r._firestoreClient=new uC(r._authCredentials,r._appCheckCredentials,r._queue,c,r._componentsProvider&&function(g){const p=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(t){this._byteString=t}static fromBase64String(t){try{return new lo($e.fromBase64String(t))}catch(n){throw new lt(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new lo($e.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new lt(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new lt(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new lt(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return xt(this._lat,t._lat)||xt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=/^__.*__$/;class _C{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new Js(t,this.data,this.fieldMask,n,this.fieldTransforms):new $l(t,this.data,n,this.fieldTransforms)}}function bT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Tt(40011,{Ic:r})}}class Jm{constructor(t,n,s,l,c,f){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Ec(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new Jm(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),l=this.dc({path:s,Rc:!1});return l.Vc(t),l}mc(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),l=this.dc({path:s,Rc:!1});return l.Ec(),l}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return eh(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(bT(this.Ic)&&yC.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class vC{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||gh(t)}bc(t,n,s,l=!1){return new Jm({Ic:t,methodName:n,wc:s,path:Ye.emptyPath(),Rc:!1,yc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ST(r){const t=r._freezeSettings(),n=gh(r._databaseId);return new vC(r._databaseId,!!t.ignoreUndefinedProperties,n)}function EC(r,t,n,s,l,c={}){const f=r.bc(c.merge||c.mergeFields?2:0,t,n,l);IT("Data must be an object, but it was:",f,s);const g=wT(s,f);let p,_;if(c.merge)p=new ti(f.fieldMask),_=f.fieldTransforms;else if(c.mergeFields){const T=[];for(const w of c.mergeFields){const C=AC(t,w,n);if(!f.contains(C))throw new lt(Z.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);SC(T,C)||T.push(C)}p=new ti(T),_=f.fieldTransforms.filter(w=>p.covers(w.field))}else p=null,_=f.fieldTransforms;return new _C(new Fn(g),p,_)}class Wm extends Xm{_toFieldTransform(t){return new fI(t.path,new zl)}isEqual(t){return t instanceof Wm}}function TC(r,t,n,s=!1){return tg(n,r.bc(s?4:3,t))}function tg(r,t){if(RT(r=Xe(r)))return IT("Unsupported field value:",t,r),wT(r,t);if(r instanceof Xm)return function(s,l){if(!bT(l.Ic))throw l.gc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.gc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)}(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(s,l){const c=[];let f=0;for(const g of s){let p=tg(g,l.fc(f));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),f++}return{arrayValue:{values:c}}}(r,t)}return function(s,l){if((s=Xe(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return uI(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Me.fromDate(s);return{timestampValue:Zc(l.serializer,c)}}if(s instanceof Me){const c=new Me(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Zc(l.serializer,c)}}if(s instanceof $m)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof lo)return{bytesValue:qE(l.serializer,s._byteString)};if(s instanceof hn){const c=l.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw l.gc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Mm(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Zm)return function(f,g){return{mapValue:{fields:{[yE]:{stringValue:_E},[Kc]:{arrayValue:{values:f.toArray().map(_=>{if(typeof _!="number")throw g.gc("VectorValues must only contain numeric values.");return Nm(g.serializer,_)})}}}}}}(s,l);throw l.gc(`Unsupported field value: ${_h(s)}`)}(r,t)}function wT(r,t){const n={};return hE(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$s(r,(s,l)=>{const c=tg(l,t.Ac(s));c!=null&&(n[s]=c)}),{mapValue:{fields:n}}}function RT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Me||r instanceof $m||r instanceof lo||r instanceof hn||r instanceof Xm||r instanceof Zm)}function IT(r,t,n){if(!RT(n)||!function(l){return typeof l=="object"&&l!==null&&(Object.getPrototypeOf(l)===Object.prototype||Object.getPrototypeOf(l)===null)}(n)){const s=_h(n);throw s==="an object"?t.gc(r+" a custom object"):t.gc(r+" "+s)}}function AC(r,t,n){if((t=Xe(t))instanceof Ym)return t._internalPath;if(typeof t=="string")return CT(r,t);throw eh("Field path arguments must be of type string or ",r,!1,void 0,n)}const bC=new RegExp("[~\\*/\\[\\]]");function CT(r,t,n){if(t.search(bC)>=0)throw eh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Ym(...t.split("."))._internalPath}catch{throw eh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function eh(r,t,n,s,l){const c=s&&!s.isEmpty(),f=l!==void 0;let g=`Function ${t}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(c||f)&&(p+=" (found",c&&(p+=` in field ${s}`),f&&(p+=` in document ${l}`),p+=")"),new lt(Z.INVALID_ARGUMENT,g+r+p)}function SC(r,t){return r.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(t,n,s,l,c){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new wC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(xT("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class wC extends NT{data(){return super.data()}}function xT(r,t){return typeof t=="string"?CT(r,t):t instanceof Ym?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new lt(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eg{}class IC extends eg{}function CC(r,t,...n){let s=[];t instanceof eg&&s.push(t),s=s.concat(n),function(c){const f=c.filter(p=>p instanceof ig).length,g=c.filter(p=>p instanceof ng).length;if(f>1||f>0&&g>0)throw new lt(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const l of s)r=l._apply(r);return r}class ng extends IC{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new ng(t,n,s)}_apply(t){const n=this._parse(t);return DT(t._query,n),new yo(t.firestore,t.converter,$d(t._query,n))}_parse(t){const n=ST(t.firestore);return function(c,f,g,p,_,T,w){let C;if(_.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new lt(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){n0(w,T);const J=[];for(const it of w)J.push(e0(p,c,it));C={arrayValue:{values:J}}}else C=e0(p,c,w)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||n0(w,T),C=TC(g,f,w,T==="in"||T==="not-in");return we.create(_,T,C)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class ig extends eg{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new ig(t,n)}_parse(t){const n=this._queryConstraints.map(s=>s._parse(t)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:ni.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(l,c){let f=l;const g=c.getFlattenedFilters();for(const p of g)DT(f,p),f=$d(f,p)}(t._query,n),new yo(t.firestore,t.converter,$d(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function e0(r,t,n){if(typeof(n=Xe(n))=="string"){if(n==="")throw new lt(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RE(t)&&n.indexOf("/")!==-1)throw new lt(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(re.fromString(n));if(!dt.isDocumentKey(s))throw new lt(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return dv(r,new dt(s))}if(n instanceof hn)return dv(r,n._key);throw new lt(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_h(n)}.`)}function n0(r,t){if(!Array.isArray(r)||r.length===0)throw new lt(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function DT(r,t){const n=function(l,c){for(const f of l)for(const g of f.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null}(r.filters,function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new lt(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new lt(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class NC{convertValue(t,n="none"){switch(is(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ve(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ns(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Tt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return $s(t,(l,c)=>{s[l]=this.convertValue(c,n)}),s}convertVectorValue(t){var n,s,l;const c=(l=(s=(n=t.fields)===null||n===void 0?void 0:n[Kc].arrayValue)===null||s===void 0?void 0:s.values)===null||l===void 0?void 0:l.map(f=>ve(f.doubleValue));return new Zm(c)}convertGeoPoint(t){return new $m(ve(t.latitude),ve(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=lh(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ul(t));default:return null}}convertTimestamp(t){const n=es(t);return new Me(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=re.fromString(t);Yt(YE(s),9688,{name:t});const l=new Ll(s.get(1),s.get(3)),c=new dt(s.popFirst(5));return l.isEqual(n)||hr(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(r,t,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(t,n):r.toFirestore(t):t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class OT extends NT{constructor(t,n,s,l,c,f){super(t,n,s,l,f),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new kc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(xT("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class kc extends OT{data(t={}){return super.data(t)}}class DC{constructor(t,n,s,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new Il(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(s=>{t.call(n,new kc(this._firestore,this._userDataWriter,s.key,s,new Il(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new lt(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(l,c){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map(g=>{const p=new kc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new Il(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}})}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(g=>c||g.type!==3).map(g=>{const p=new kc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new Il(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let _=-1,T=-1;return g.type!==0&&(_=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),T=f.indexOf(g.doc.key)),{type:OC(g.type),doc:p,oldIndex:_,newIndex:T}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function OC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tt(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(r){r=lr(r,hn);const t=lr(r.firestore,oo);return fC(Km(t),r._key).then(n=>PT(t,r,n))}class MT extends NC{constructor(t){super(),this.firestore=t}convertBytes(t){return new lo(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new hn(this.firestore,null,n)}}function VC(r,t,n){r=lr(r,hn);const s=lr(r.firestore,oo),l=xC(r.converter,t,n);return VT(s,[EC(ST(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,Si.none())])}function PC(r){return VT(lr(r.firestore,oo),[new xm(r._key,Si.none())])}function kC(r,...t){var n,s,l;r=Xe(r);let c={includeMetadataChanges:!1,source:"default"},f=0;typeof t[f]!="object"||t0(t[f])||(c=t[f],f++);const g={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(t0(t[f])){const w=t[f];t[f]=(n=w.next)===null||n===void 0?void 0:n.bind(w),t[f+1]=(s=w.error)===null||s===void 0?void 0:s.bind(w),t[f+2]=(l=w.complete)===null||l===void 0?void 0:l.bind(w)}let p,_,T;if(r instanceof hn)_=lr(r.firestore,oo),T=uh(r._key.path),p={next:w=>{t[f]&&t[f](PT(_,r,w))},error:t[f+1],complete:t[f+2]};else{const w=lr(r,yo);_=lr(w.firestore,oo),T=w._query;const C=new MT(_);p={next:F=>{t[f]&&t[f](new DC(_,C,w,F))},error:t[f+1],complete:t[f+2]},RC(r._query)}return function(C,F,J,it){const tt=new _T(it),At=new uT(F,tt,J);return C.asyncQueue.enqueueAndForget(async()=>oT(await om(C),At)),()=>{tt.xu(),C.asyncQueue.enqueueAndForget(async()=>lT(await om(C),At))}}(Km(_),T,g,p)}function VT(r,t){return function(s,l){const c=new Jr;return s.asyncQueue.enqueueAndForget(async()=>tC(await hC(s),l,c)),c.promise}(Km(r),t)}function PT(r,t,n){const s=n.docs.get(t._key),l=new MT(r);return new OT(r,l,t._key,s,new Il(n.hasPendingWrites,n.fromCache),t.converter)}function UC(){return new Wm("serverTimestamp")}(function(t,n=!0){(function(l){fo=l})(co),Wa(new Gs("firestore",(s,{instanceIdentifier:l,options:c})=>{const f=s.getProvider("app").getImmediate(),g=new oo(new bR(s.getProvider("auth-internal")),new RR(f,s.getProvider("app-check-internal")),function(_,T){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new lt(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ll(_.options.projectId,T)}(f,l),f);return c=Object.assign({useFetchStreams:n},c),g._setSettings(c),g},"PUBLIC").setMultipleInstances(!0)),$r(ev,nv,t),$r(ev,nv,"esm2017")})();const Ha="booking-app-1af02",LC={apiKey:"AIzaSyBWmkv8YDOAtSqrehqEkO1vWNbBvmhs65A",authDomain:"booking-app-1af02.firebaseapp.com",projectId:"booking-app-1af02",storageBucket:"booking-app-1af02.firebasestorage.app",messagingSenderId:"909871533345",appId:"1:909871533345:web:939fa5b6c8203ad4308260",measurementId:"G-NF4XH5S2QC"},i0="https://bookingapp-9pmk.onrender.com",r0=[{id:1,name:"Pioneer CDJ-3000",type:"CDJ Player",icon:"",category:"player"},{id:2,name:"Technics SL-1200",type:"Turntable",icon:"",category:"player"},{id:3,name:"DJM A9",type:"DJ Mixer",icon:"",category:"mixer"},{id:4,name:"DJM V10",type:"DJ Mixer",icon:"",category:"mixer"}],s0=2e5,zs=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),Tl=r=>r?new Date(r).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"",Fa=r=>{if(!r)return"";const[t,n]=r.split(":"),s=parseInt(t),l=s>=12?"PM":"AM";return`${s>12?s-12:s===0?12:s}:${n.padStart(2,"0")} ${l}`},jC=(r,t)=>{if(!r||isNaN(t))return"";const[n,s]=r.split(":"),l=new Date;return l.setHours(parseInt(n),parseInt(s),0,0),l.setHours(l.getHours()+t),`${l.getHours().toString().padStart(2,"0")}:${l.getMinutes().toString().padStart(2,"0")}`};function zC(){const[r,t]=yt.useState(""),[n,s]=yt.useState(""),[l,c]=yt.useState(2),[f,g]=yt.useState([]),[p,_]=yt.useState([]),[T,w]=yt.useState(!1),[C,F]=yt.useState(null),[J,it]=yt.useState("cash"),[tt,At]=yt.useState(!1),[ht,ct]=yt.useState(null),[Ot,_t]=yt.useState(!1),[Rt,M]=yt.useState(null),[b,R]=yt.useState(null),[O,V]=yt.useState(""),[k,I]=yt.useState(null),[Zt,se]=yt.useState(null),[q,rt]=yt.useState(null),[ut,Ut]=yt.useState(!0),[N,Y]=yt.useState(!1),[nt,W]=yt.useState(null),[at,mt]=yt.useState(null),[bt,he]=yt.useState(!1),[qt,vn]=yt.useState(""),[fn,Nn]=yt.useState(""),[xn,Ii]=yt.useState(!0),[Ci,Ni]=yt.useState(!1),[ii,Re]=yt.useState(""),[Qn,ri]=yt.useState(!1),[Ze,an]=yt.useState(null),ls=yt.useRef(null);yt.useEffect(()=>{try{console.log("Initializing Firebase app...");const Q=y0(LC),vt=gC(Q),Gt=vR(Q);I(Q),se(vt),rt(Gt),console.log("Firebase app, DB, Auth instances set.")}catch(Q){console.error("Firebase Initialization Error:",Q),W(`Firebase Initialization Error: ${Q.message}`),Ut(!1)}},[]),yt.useEffect(()=>{if(!q||!Zt){console.log("Auth or DB instance not ready, skipping auth state listener.");return}console.log("Setting up auth state listener...");const Q=ow(q,async vt=>{if(vt){R(vt.uid),mt(null),he(!1);try{ri(!0),an(null);const Gt=$v(Zt,`artifacts/${Ha}/users/${vt.uid}/profiles/userProfile`),fe=await MC(Gt);let de=vt.displayName||vt.email;fe.exists()?(de=fe.data().displayName||de,V(de),Re(de)):(await VC(Gt,{userId:vt.uid,displayName:de,createdAt:UC()},{merge:!0}),V(de),Re(de),console.log("Created new user profile in Firestore.")),console.log("Auth state changed: User is signed in. UID:",vt.uid,"Name:",de)}catch(Gt){console.error("Error fetching/creating user profile:",Gt),an(`Failed to load profile: ${Gt.message}`),V(vt.uid)}finally{ri(!1)}}else console.log("Auth state changed: User is signed out. No automatic anonymous sign-in."),R(null),V(""),Re(""),mt(null),an(null);Ut(!1)});return()=>{console.log("Cleaning up auth state listener."),Q()}},[q,Zt,Ha]),yt.useEffect(()=>{if(!Zt||b===null||ut||at){console.log("Firestore listener skipped: DB instance, userId, auth loading, or auth error not ready.",{dbInstance:Zt,userId:b,isLoadingAuth:ut,authError:at}),_([]),Y(!1);return}Y(!0),W(null);const Q=`artifacts/${Ha}/users/${b}/bookings`;console.log("Attempting to listen to Firestore collection:",Q,"with userId:",b);const vt=Xv(Zt,Q),Gt=CC(vt),fe=kC(Gt,de=>{console.log("Firestore snapshot received.");const Ie=[];de.forEach(mn=>{Ie.push({id:mn.id,...mn.data()})}),Ie.sort((mn,si)=>{var Vi,Kn;return(((Vi=si.timestamp)==null?void 0:Vi.toDate())||0)-(((Kn=mn.timestamp)==null?void 0:Kn.toDate())||0)}),_(Ie),Y(!1),console.log("Bookings updated:",Ie.length,"bookings.")},de=>{console.error("Firestore Error fetching bookings:",de),W(`Failed to load bookings: ${de.message}`),Y(!1)});return()=>{console.log("Cleaning up Firestore listener."),fe()}},[Zt,b,ut,at,Ha]);const gr=yt.useMemo(()=>new Date().toISOString().split("T")[0],[]),us=yt.useMemo(()=>{const Q=[];for(let vt=9;vt<=23;vt++){const Gt=`${vt.toString().padStart(2,"0")}:00`,fe=vt>12?`${vt-12}:00 PM`:vt===12?"12:00 PM":`${vt}:00 AM`;Q.push({value:Gt,label:fe})}return Q},[]),Dn=yt.useCallback(()=>s0*l,[l]),ae=yt.useMemo(()=>r0.filter(Q=>Q.category==="player"),[]),Ft=yt.useMemo(()=>r0.filter(Q=>Q.category==="mixer"),[]),Je=yt.useCallback(Q=>{g(vt=>vt.some(fe=>fe.id===Q.id)?vt.filter(fe=>fe.id!==Q.id):[...vt,Q])},[]),Pe=yt.useCallback(async()=>{if(!q){mt("Authentication service not available.");return}mt(null);try{const Q=await ew(q,qt,fn);console.log("User signed up successfully!",Q.user),await rw(Q.user,{displayName:qt.split("@")[0]||"New User"})}catch(Q){console.error("Sign-up error:",Q),mt(`Sign-up failed: ${Q.message}`)}},[q,qt,fn]),ta=yt.useCallback(async()=>{if(!q){mt("Authentication service not available.");return}mt(null);try{await nw(q,qt,fn),console.log("User signed in successfully!")}catch(Q){console.error("Sign-in error:",Q),mt(`Sign-in failed: ${Q.message}`)}},[q,qt,fn]),_o=yt.useCallback(async()=>{if(!q){mt("Authentication service not available.");return}mt(null);try{await Cw(q,new rr),console.log("User signed in with Google successfully!")}catch(Q){console.error("Google Sign-in error:",Q),Q.code==="auth/popup-closed-by-user"?mt("Google Sign-in popup closed. Please try again."):Q.code==="auth/cancelled-popup-request"?mt("Another sign-in attempt was already in progress. Please try again."):mt(`Google Sign-in failed: ${Q.message}`)}},[q]),xi=yt.useCallback(async()=>{if(q)try{await lw(q),R(null),V(""),_([]),console.log("User logged out."),ct(null),t(""),s(""),c(2),g([]),it("cash")}catch(Q){console.error("Logout error:",Q),W(`Logout failed: ${Q.message}`)}},[q]),Di=yt.useCallback(async()=>{if(!b||!q.currentUser)return;const Q=await q.currentUser.getIdToken();if(!ii.trim()){an("Display name cannot be empty.");return}ri(!0),an(null);try{const vt=await fetch(`${i0}/api/update-profile`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Q}`},body:JSON.stringify({displayName:ii.trim()})}),Gt=await vt.json();if(!vt.ok)throw new Error(Gt.error||"Failed to update profile via backend.");V(ii.trim()),Ni(!1),console.log("User profile updated successfully via standalone backend!")}catch(vt){console.error("Error updating profile via backend:",vt),an(`Failed to update profile: ${vt.message}`)}finally{ri(!1)}},[b,q,ii]),Oi=yt.useCallback(()=>{if(!r||!n){W("Please select both date and time to proceed with booking.");return}if(!b||!q.currentUser||N||Qn||at||Ze){W("App not ready to book. Please wait for authentication or resolve prior errors."),console.error("Booking attempted when app state not ready.",{userId:b,isLoadingBookings:N,profileLoading:Qn,authError:at,profileError:Ze});return}J==="online"?At(!0):dn("pending")},[r,n,l,f,Dn,b,q,N,Qn,at,Ze,J]),dn=yt.useCallback(async Q=>{try{W(null),Y(!0);const vt=await q.currentUser.getIdToken(),Gt={date:r,time:n,duration:l,equipment:f.map(mn=>({id:mn.id,name:mn.name,type:mn.type})),total:Dn(),paymentMethod:J,paymentStatus:Q},fe={bookingData:Gt,userName:O,editingBookingId:ht},de=await fetch(`${i0}/api/confirm-booking`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${vt}`},body:JSON.stringify(fe)}),Ie=await de.json();if(!de.ok)throw new Error(Ie.error||"Failed to confirm booking via backend.");F({...Gt,id:Ie.bookingId,userName:O,timestamp:new Date,paymentStatus:Q}),w(!0),ct(null),t(""),s(""),c(2),g([]),it("cash")}catch(vt){console.error("Error confirming booking via backend:",vt),W(`Failed to confirm session: ${vt.message}`)}finally{Y(!1),At(!1)}},[r,n,l,f,Dn,b,O,ht,q,J]),pr=yt.useCallback(Q=>{ct(Q.id),t(Q.date),s(Q.time),c(Q.duration),g(Q.equipment||[]),it(Q.paymentMethod||"cash"),W(null),ls.current&&ls.current.scrollIntoView({behavior:"smooth",block:"start"})},[]),Mi=yt.useCallback(Q=>{M(Q),_t(!0)},[]),cs=yt.useCallback(async()=>{if(!(!Rt||!Zt||!b))try{W(null),Y(!0);const Q=$v(Xv(Zt,`artifacts/${Ha}/users/${b}/bookings`),Rt.id);await PC(Q),console.log("Booking successfully deleted:",Rt.id)}catch(Q){console.error("Error deleting booking:",Q),W(`Failed to delete booking: ${Q.message}`)}finally{Y(!1),_t(!1),M(null)}},[Rt,Zt,b,Ha]);return ut||!k||at||Qn?x.jsxs("div",{className:"bg-gray-900 min-h-screen flex items-center justify-center text-orange-200 text-2xl p-4 text-center",children:[at?`Authentication Error: ${at}`:Qn?"Loading profile...":"Authenticating Firebase...",x.jsx("br",{}),nt&&x.jsx("span",{className:"text-red-300 text-base",children:nt}),Ze&&x.jsx("span",{className:"text-red-300 text-base",children:Ze})]}):x.jsx("div",{className:"bg-gray-900 min-h-screen p-4",children:x.jsxs("div",{className:"max-w-4xl mx-auto",children:[x.jsxs("div",{className:"text-center mb-8",children:[x.jsx("h1",{className:"text-4xl font-bold text-orange-400 mb-2",children:" DJ Studio Booking"}),x.jsx("p",{className:"text-gray-300 text-lg",children:"Book your professional DJ room with premium equipment"}),x.jsx("div",{className:"mt-4 flex flex-col sm:flex-row items-center justify-center gap-4",children:b?x.jsxs(x.Fragment,{children:[x.jsxs("p",{className:"text-gray-400 text-sm",children:["Logged In: ",x.jsx("span",{className:"font-semibold text-orange-200",children:O||(b?b.substring(0,8)+"...":"Loading...")})]}),x.jsx("button",{onClick:()=>{Re(O),Ni(!0)},className:"px-4 py-2 bg-orange-600 text-white rounded-xl text-sm hover:bg-orange-700 transition duration-200 shadow-lg",children:"Edit Profile"}),x.jsx("button",{onClick:xi,className:"px-4 py-2 bg-red-600 text-white rounded-xl text-sm hover:bg-red-700 transition duration-200 shadow-lg",children:"Logout"})]}):x.jsx("button",{onClick:()=>he(!0),className:"px-6 py-3 bg-orange-600 text-white rounded-xl text-lg font-semibold hover:bg-orange-700 transition duration-200 shadow-lg",children:"Sign In / Sign Up"})})]}),(nt||Ze)&&!at&&x.jsxs("div",{className:"bg-red-800 text-white px-4 py-3 rounded-xl relative mb-4",role:"alert",children:[x.jsx("strong",{className:"font-bold",children:"Error!"}),x.jsxs("span",{className:"block sm:inline",children:[" ",nt||Ze]})]}),x.jsx("div",{ref:ls,className:"bg-gray-800 shadow-2xl rounded-2xl p-8 mb-6 border border-gray-700",children:x.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[x.jsxs("div",{className:"space-y-6",children:[x.jsx("h2",{className:"text-2xl font-semibold text-orange-300 mb-4",children:" Schedule Your Session"}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"select-date",className:"block text-sm font-medium text-gray-300 mb-2",children:"Select Date"}),x.jsx("input",{id:"select-date",type:"date",min:gr,value:r,onChange:Q=>t(Q.target.value),className:"w-full p-3 border border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition duration-200 bg-gray-700 text-white"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"select-time",className:"block text-sm font-medium text-gray-300 mb-2",children:"Select Time"}),x.jsxs("select",{id:"select-time",value:n,onChange:Q=>s(Q.target.value),className:"w-full p-3 border border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition duration-200 bg-gray-700 text-white",children:[x.jsx("option",{value:"",children:"Choose a time..."}),us.map(Q=>x.jsx("option",{value:Q.value,children:Q.label},Q.value))]})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"select-duration",className:"block text-sm font-medium text-gray-300 mb-2",children:"Duration (hours)"}),x.jsxs("select",{id:"select-duration",value:l,onChange:Q=>c(parseInt(Q.target.value)),className:"w-full p-3 border border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition duration-200 bg-gray-700 text-white",children:[x.jsx("option",{value:1,children:"1 hour"}),x.jsx("option",{value:2,children:"2 hours (Default)"}),x.jsx("option",{value:3,children:"3 hours"}),x.jsx("option",{value:4,children:"4 hours"}),x.jsx("option",{value:6,children:"6 hours"}),x.jsx("option",{value:8,children:"8 hours"})]})]})]}),x.jsxs("div",{className:"bg-gray-700 rounded-xl p-6 border border-gray-600",children:[x.jsx("h3",{className:"text-xl font-semibold text-orange-300 mb-4",children:" Booking Summary"}),x.jsxs("div",{className:"space-y-3 text-gray-300",children:[x.jsxs("div",{className:"flex justify-between text-sm",children:[x.jsx("span",{children:"Room Rate (per hour)"}),x.jsx("span",{children:zs(s0)})]}),x.jsxs("div",{className:"flex justify-between text-sm",children:[x.jsx("span",{children:"Duration"}),x.jsxs("span",{children:[l," hours"]})]}),x.jsxs("div",{className:"flex justify-between text-sm",children:[x.jsx("span",{children:"Equipment"}),x.jsx("span",{className:"text-green-400",children:"Included"})]}),x.jsx("hr",{className:"my-3 border-gray-600"}),x.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[x.jsx("span",{children:"Total"}),x.jsx("span",{className:"text-orange-400",children:zs(Dn())})]})]}),r&&n&&x.jsxs("div",{className:"mt-6 p-4 bg-gray-600 rounded-lg text-gray-200",children:[x.jsx("p",{className:"text-sm text-gray-300",children:"Session Details:"}),x.jsx("p",{className:"font-medium",children:Tl(r)}),x.jsxs("p",{className:"font-medium",children:[Fa(n)," - ",Fa(jC(n,l))]})]})]})]})}),x.jsxs("div",{className:"bg-gray-800 shadow-2xl rounded-2xl p-8 mb-6 border border-gray-700",children:[x.jsx("h2",{className:"text-2xl font-semibold text-orange-300 mb-6",children:" Select Your Preferred Equipment"}),x.jsx("p",{className:"text-gray-300 mb-6",children:"All equipment is included in the room price. Please select what you'd like to use:"}),x.jsxs("div",{className:"grid sm:grid-cols-2 gap-6",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-4",children:"Players"}),x.jsx("div",{className:"space-y-3",children:ae.map(Q=>{const vt=f.some(Gt=>Gt.id===Q.id);return x.jsx("div",{onClick:()=>Je(Q),className:`p-4 rounded-xl cursor-pointer border-2 transition-all duration-200 hover:translate-y-[-2px] ${vt?"border-orange-500 bg-orange-900 shadow-md text-white":"border-gray-700 bg-gray-700 hover:border-orange-500 hover:shadow-sm text-gray-200"}`,children:x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"text-2xl",children:Q.icon}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold",children:Q.name}),x.jsx("p",{className:"text-sm text-gray-400",children:Q.type})]}),vt&&x.jsx("div",{className:"ml-auto",children:x.jsx("div",{className:"w-6 h-6 bg-orange-500 rounded-full flex items-center justify-center",children:x.jsx("span",{className:"text-white text-sm",children:""})})})]})},Q.id)})})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-4",children:"Mixers"}),x.jsx("div",{className:"space-y-3",children:Ft.map(Q=>{const vt=f.some(Gt=>Gt.id===Q.id);return x.jsx("div",{onClick:()=>Je(Q),className:`p-4 rounded-xl cursor-pointer border-2 transition-all duration-200 hover:translate-y-[-2px] ${vt?"border-orange-500 bg-orange-900 shadow-md text-white":"border-gray-700 bg-gray-700 hover:border-orange-500 hover:shadow-sm text-gray-200"}`,children:x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"text-2xl",children:Q.icon}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold",children:Q.name}),x.jsx("p",{className:"text-sm text-gray-400",children:Q.type})]}),vt&&x.jsx("div",{className:"ml-auto",children:x.jsx("div",{className:"w-6 h-6 bg-orange-500 rounded-full flex items-center justify-center",children:x.jsx("span",{className:"text-white text-sm",children:""})})})]})},Q.id)})})]})]}),f.length>0&&x.jsxs("div",{className:"mt-6 p-4 bg-green-900 rounded-lg text-green-300 border border-green-700",children:[x.jsx("h4",{className:"font-semibold mb-2",children:"Selected Equipment:"}),x.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(Q=>x.jsxs("span",{className:"bg-green-700 text-green-100 px-3 py-1 rounded-full text-sm",children:[Q.icon," ",Q.name]},Q.id))})]})]}),x.jsxs("div",{className:"bg-gray-800 shadow-2xl rounded-2xl p-8 mb-6 border border-gray-700",children:[x.jsx("h2",{className:"text-2xl font-semibold text-orange-300 mb-6",children:" Select Payment Method"}),x.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[x.jsxs("label",{className:`flex items-center p-4 rounded-xl border-2 cursor-pointer transition-all duration-200 w-full ${J==="online"?"border-orange-500 bg-orange-900 text-white shadow-md":"border-gray-700 bg-gray-700 hover:border-orange-500 text-gray-200"}`,children:[x.jsx("input",{type:"radio",name:"paymentMethod",value:"online",checked:J==="online",onChange:()=>it("online"),className:"form-radio h-5 w-5 text-orange-600"}),x.jsx("span",{className:"ml-3 text-lg font-medium",children:"Online Payment"})]}),x.jsxs("label",{className:`flex items-center p-4 rounded-xl border-2 cursor-pointer transition-all duration-200 w-full ${J==="cash"?"border-orange-500 bg-orange-900 text-white shadow-md":"border-gray-700 bg-gray-700 hover:border-orange-500 text-gray-200"}`,children:[x.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:J==="cash",onChange:()=>it("cash"),className:"form-radio h-5 w-5 text-orange-600"}),x.jsx("span",{className:"ml-3 text-lg font-medium",children:"Cash on Arrival"})]})]})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("button",{onClick:Oi,disabled:!r||!n||N||!b,className:`px-8 py-4 rounded-xl font-semibold text-lg transition-all duration-200 ${r&&n&&!N&&b?"bg-gradient-to-r from-orange-600 to-orange-800 text-white hover:from-orange-700 hover:to-orange-900 shadow-lg hover:shadow-xl transform hover:scale-105":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:N?ht?"Updating...":"Booking...":ht?` Update Booking - ${zs(Dn())}`:` Book DJ Studio - ${zs(Dn())}`}),ht&&x.jsx("button",{onClick:()=>{ct(null),t(""),s(""),c(2),g([]),it("cash"),W(null)},className:"ml-4 px-6 py-3 bg-gray-700 text-gray-300 rounded-xl font-semibold hover:bg-gray-600 transition duration-200",children:"Cancel Edit"})]}),b&&N&&p.length===0&&!nt?x.jsx("div",{className:"bg-gray-800 shadow-2xl rounded-2xl p-8 mt-6 text-center text-gray-400 border border-gray-700",children:"Loading bookings..."}):b&&p.length>0&&x.jsxs("div",{className:"bg-gray-800 shadow-2xl rounded-2xl p-8 mt-6 border border-gray-700",children:[x.jsx("h2",{className:"text-2xl font-semibold text-orange-300 mb-6",children:" Recent Bookings"}),x.jsx("div",{className:"space-y-4",children:p.map(Q=>x.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 flex flex-col sm:flex-row justify-between items-start sm:items-center border border-gray-600",children:[x.jsxs("div",{className:"flex-grow mb-4 sm:mb-0",children:[x.jsxs("p",{className:"font-medium text-gray-100",children:["Booking ID: ",x.jsx("span",{className:"font-mono text-xs text-gray-400",children:Q.id})]}),x.jsxs("p",{className:"text-sm text-gray-300",children:[Tl(Q.date)," at ",Fa(Q.time)," (",Q.duration," hours)"]}),x.jsxs("p",{className:"text-xs text-gray-400",children:["Equipment: ",Q.equipment&&Q.equipment.length>0?Q.equipment.map(vt=>vt.name).join(", "):"None selected"]}),x.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Payment: ",Q.paymentMethod==="online"?"Online":"Cash",x.jsx("span",{className:`ml-1 px-2 py-0.5 rounded-full text-xs font-semibold ${Q.paymentStatus==="paid"?"bg-green-700 text-green-200":"bg-yellow-700 text-yellow-200"}`,children:Q.paymentStatus==="paid"?"PAID":"PENDING"})]})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"font-bold text-orange-400",children:zs(Q.total)}),x.jsxs("p",{className:"text-xs text-gray-400",children:["Booked by: ",x.jsx("span",{className:"font-semibold text-orange-200",children:Q.userName||(Q.userId?Q.userId.substring(0,8)+"...":"N/A")})]})]}),x.jsx("div",{className:"flex flex-col sm:flex-row gap-2 mt-2 sm:mt-0 sm:ml-4",children:b===Q.userId&&x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:()=>pr(Q),className:"px-4 py-2 bg-orange-500 text-white rounded-xl text-sm hover:bg-orange-600 transition duration-200",children:"Edit"}),x.jsx("button",{onClick:()=>Mi(Q),className:"px-4 py-2 bg-red-600 text-white rounded-xl text-sm hover:bg-red-700 transition duration-200",children:"Cancel"})]})})]},Q.id))})]}),b&&!N&&p.length===0&&!nt&&x.jsx("div",{className:"bg-gray-800 shadow-2xl rounded-2xl p-8 mt-6 text-center text-gray-400 border border-gray-700",children:"No recent bookings found. Make your first booking above!"}),!b&&x.jsx("div",{className:"bg-gray-800 shadow-2xl rounded-2xl p-8 mt-6 text-center text-gray-400 border border-gray-700",children:"Sign in to view and make bookings."}),T&&C&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50",children:x.jsx("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full text-white border border-gray-700",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-6xl mb-4 pulse-animation",children:""}),x.jsx("h2",{className:"text-2xl font-bold text-orange-400 mb-4",children:ht?"Booking Updated!":"Booking Confirmed!"}),x.jsxs("div",{className:"text-left bg-gray-700 rounded-lg p-4 mb-6 text-gray-200",children:[x.jsxs("p",{children:[x.jsx("strong",{children:"Date:"})," ",Tl(C.date)]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Time:"})," ",Fa(C.time)]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Duration:"})," ",C.duration," hours"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Equipment:"})," ",C.equipment&&C.equipment.length>0?C.equipment.map(Q=>Q.name).join(", "):"None selected"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Total:"})," ",zs(C.total)]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Booking ID:"})," ",x.jsxs("span",{className:"font-mono text-xs text-gray-400",children:["#",C.id]})]}),x.jsxs("p",{className:"mt-2",children:[x.jsx("strong",{children:"Payment Method:"})," ",C.paymentMethod==="online"?"Online":"Cash on Arrival"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Payment Status:"}),x.jsx("span",{className:`ml-1 font-semibold ${C.paymentStatus==="paid"?"text-green-400":"text-yellow-400"}`,children:C.paymentStatus==="paid"?"PAID":"PENDING"})]}),x.jsxs("p",{className:"mt-2",children:[x.jsx("strong",{children:"Booked By:"})," ",x.jsx("span",{className:"font-semibold text-orange-200",children:C.userName||"N/A"})]})]}),x.jsx("button",{onClick:()=>w(!1),className:"bg-orange-600 text-white px-6 py-3 rounded-xl hover:bg-orange-700 transition duration-200",children:"Awesome! Close"})]})})}),bt&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50",children:x.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full text-white border border-gray-700",children:[x.jsx("h2",{className:"text-2xl font-bold text-orange-400 mb-6 text-center",children:xn?"Sign In":"Sign Up"}),at&&x.jsx("div",{className:"bg-red-800 text-white px-4 py-3 rounded-xl relative mb-4 text-sm",role:"alert",children:at}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),x.jsx("input",{type:"email",id:"email",value:qt,onChange:Q=>vn(Q.target.value),className:"w-full p-3 border border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition duration-200 bg-gray-700 text-white",placeholder:"your.email@example.com"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),x.jsx("input",{type:"password",id:"password",value:fn,onChange:Q=>Nn(Q.target.value),className:"w-full p-3 border border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition duration-200 bg-gray-700 text-white",placeholder:"********"})]})]}),x.jsxs("div",{className:"mt-6 space-y-4",children:[x.jsx("button",{onClick:xn?ta:Pe,className:"w-full px-6 py-3 bg-orange-600 text-white rounded-xl font-semibold hover:bg-orange-700 transition duration-200",children:xn?"Sign In":"Sign Up"}),x.jsx("button",{onClick:()=>Ii(Q=>!Q),className:"w-full px-6 py-3 bg-gray-700 text-gray-300 rounded-xl font-semibold hover:bg-gray-600 transition duration-200",children:xn?"Need an account? Sign Up":"Already have an account? Sign In"}),x.jsxs("button",{onClick:_o,className:"w-full px-6 py-3 bg-red-700 text-white rounded-xl font-semibold hover:bg-red-800 transition duration-200 flex items-center justify-center",children:[x.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google logo",className:"w-5 h-5 mr-2"}),"Sign In with Google"]}),x.jsx("button",{onClick:()=>{he(!1),mt(null),vn(""),Nn("")},className:"w-full text-sm text-gray-400 hover:text-gray-200 transition duration-200 mt-2",children:"Cancel"})]})]})}),Ci&&b&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50",children:x.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full text-white border border-gray-700",children:[x.jsx("h2",{className:"text-2xl font-bold text-orange-400 mb-6 text-center",children:"Manage Profile"}),Ze&&x.jsx("div",{className:"bg-red-800 text-white px-4 py-3 rounded-xl relative mb-4 text-sm",role:"alert",children:Ze}),x.jsx("div",{className:"space-y-4",children:x.jsxs("div",{children:[x.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-300 mb-2",children:"Display Name"}),x.jsx("input",{type:"text",id:"displayName",value:ii,onChange:Q=>Re(Q.target.value),className:"w-full p-3 border border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition duration-200 bg-gray-700 text-white",placeholder:"Your Name"})]})}),x.jsxs("div",{className:"mt-6 space-y-4",children:[x.jsx("button",{onClick:Di,disabled:Qn,className:"w-full px-6 py-3 bg-orange-600 text-white rounded-xl font-semibold hover:bg-orange-700 transition duration-200",children:Qn?"Updating...":"Update Profile"}),x.jsx("button",{onClick:()=>{Ni(!1),an(null),Re(O)},className:"w-full text-sm text-gray-400 hover:text-gray-200 transition duration-200 mt-2",children:"Cancel"})]})]})}),tt&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50",children:x.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full text-white text-center border border-gray-700",children:[x.jsx("h2",{className:"text-2xl font-bold text-orange-400 mb-4",children:"Simulate Online Payment"}),x.jsxs("p",{className:"text-gray-300 mb-6",children:["Please confirm payment of **",zs(Dn()),"** for your booking on ",Tl(r)," at ",Fa(n),"."]}),x.jsxs("div",{className:"flex justify-center gap-4",children:[x.jsx("button",{onClick:()=>dn("paid"),className:"px-6 py-3 bg-green-700 text-white rounded-xl font-semibold hover:bg-green-800 transition duration-200",children:"Confirm Payment (Simulated)"}),x.jsx("button",{onClick:()=>{At(!1),W("Payment cancelled by user.")},className:"px-6 py-3 bg-gray-700 text-gray-300 rounded-xl font-semibold hover:bg-gray-600 transition duration-200",children:"Cancel"})]})]})}),Ot&&Rt&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50",children:x.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full text-white text-center border border-gray-700",children:[x.jsx("h2",{className:"text-2xl font-bold text-red-400 mb-4",children:"Confirm Deletion"}),x.jsxs("p",{className:"text-gray-300 mb-6",children:["Are you sure you want to cancel the booking for **",Tl(Rt.date)," at ",Fa(Rt.time),"** (Booking ID: ",x.jsxs("span",{className:"font-mono text-xs text-gray-400",children:[Rt.id.substring(0,8),"..."]}),")? This action cannot be undone."]}),x.jsxs("div",{className:"flex justify-center gap-4",children:[x.jsx("button",{onClick:cs,className:"px-6 py-3 bg-red-600 text-white rounded-xl font-semibold hover:bg-red-700 transition duration-200",children:"Yes, Cancel Booking"}),x.jsx("button",{onClick:()=>{_t(!1),M(null),W(null)},className:"px-6 py-3 bg-gray-700 text-gray-300 rounded-xl font-semibold hover:bg-gray-600 transition duration-200",children:"No, Keep Booking"})]})]})})]})})}yb.createRoot(document.getElementById("root")).render(x.jsx(ub.StrictMode,{children:x.jsx(zC,{})}));
